{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/TeacherViewTB.vue?72bf","webpack:///./src/components/PubLog.vue?6934","webpack:///./src/components/TeacherNewClass.vue?24a0","webpack:///./src/components/TeacherPubQ.vue?1d67","webpack:///./src/components/Welcome.vue?44cd","webpack:///./src/App.vue","webpack:///./src/App.vue?6697","webpack:///./src/components/Welcome.vue","webpack:///./src/components/Welcome.vue?764a","webpack:///./src/components/PubHome.vue","webpack:///./src/api.js","webpack:///./src/components/PubHome.vue?d88f","webpack:///./src/components/PubLog.vue","webpack:///./src/components/PubLog.vue?5ae2","webpack:///./src/components/PubNewBook.vue","webpack:///./src/components/PubNewBook.vue?9e8a","webpack:///./src/components/PubNewTB.vue","webpack:///./src/components/PubNewTB.vue?eac3","webpack:///./src/components/PubQuestions.vue","webpack:///./src/components/PubQuestions.vue?d1df","webpack:///./src/components/PubViewFeedback.vue","webpack:///./src/components/PubViewFeedback.vue?c01b","webpack:///./src/components/PubViewTB.vue","webpack:///./src/components/PubViewTB.vue?db48","webpack:///./src/components/TeacherHome.vue","webpack:///./src/components/TeacherHome.vue?fe0e","webpack:///./src/components/TeacherLog.vue","webpack:///./src/components/TeacherLog.vue?5f29","webpack:///./src/components/TeacherNewClass.vue","webpack:///./src/components/TeacherNewClass.vue?a351","webpack:///./src/components/TeacherNewTB.vue","webpack:///./src/components/TeacherNewTB.vue?1f2e","webpack:///./src/components/TeacherPubQ.vue","webpack:///./src/components/TeacherPubQ.vue?a88f","webpack:///./src/components/TeacherQuestions.vue","webpack:///./src/components/TeacherQuestions.vue?327c","webpack:///./src/components/TeacherTemplate.vue","webpack:///./src/components/TeacherTemplate.vue?b30d","webpack:///./src/components/TeacherViewTB.vue","webpack:///./src/components/TeacherViewTB.vue?992c","webpack:///./src/components/WebmasterHome.vue","webpack:///./src/components/WebmasterHome.vue?8bf4","webpack:///./src/components/WebmasterLog.vue","webpack:///./src/components/WebmasterLog.vue?4eae","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/components/WebmasterHome.vue?1292","webpack:///./src/components/PubHome.vue?51b9","webpack:///./src/components/TeacherHome.vue?16ed","webpack:///./src/components/PubNewTB.vue?4dd5","webpack:///./src/components/PubNewBook.vue?5fd6","webpack:///./src/components/TeacherLog.vue?dbfa","webpack:///./src/components/TeacherNewTB.vue?17be","webpack:///./src/App.vue?8f12","webpack:///./src/components/TeacherTemplate.vue?0c90","webpack:///./src/components/WebmasterLog.vue?4493","webpack:///./src/components/PubViewFeedback.vue?a930","webpack:///./src/components/PubViewTB.vue?a94d","webpack:///./src/components/TeacherQuestions.vue?8cfc","webpack:///./src/components/PubQuestions.vue?c5c0"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","jsonpScriptSrc","p","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","id","title","__exports__","render","class","style","to","textbooks","textbook","textbook_id","api","axios","baseURL","responseType","async","refreshToken","currentToken","localStorage","getItem","res","post","token","newToken","setItem","removeItem","interceptors","use","config","headers","Authorization","response","originalRequest","status","_retry","warn","this","fetchTextbooks","methods","log","statusText","submitForm","for","username","password","disabled","loading","errorMessage","decoded","currentTime","Date","now","exp","role","$router","trim","toLowerCase","user_id","clear","saveBook","textbookTitle","author","ISBN","version","websiteLink","bookData","textbook_title","textbook_author","textbook_isbn","textbook_version","path","alert","saveTestBank","required","bankName","bankChapter","bankSection","textbookId","$route","query","testBankData","testbank_name","chapter_number","section_number","editBlockedReason","createCopyInstead","editBlockedPopup","selectedTestBank","testBanks","tb","testbank_id","href","selectTestBank","fetchQuestions","edit","selectedQuestionType","questions","question","index","selectedQuestionId","toggleQuestionSelection","text","chapter","section","points","time","image_url","alt","answer","correctOption","option_text","incorrectOptions","option","pairs","pair","term","definition","blanks","blank","correct_text","instructions","is_published","editQuestion","deleteQuestion","openAddToTestBank","filter","assignQuestionToTestBank","closeAddToTBModal","handleQuestionSave","editingQuestionId","questionData","answerChoices","matchingPairs","placeholder","removePair","addPair","imagePreview","handleImageUpload","accept","closeForm","showForm","showAddToTBModal","questionToAddToTB","oldMCOptionIds","reference","imageFile","postData","isEditing","editingQuestion","find","q","FormData","append","incorrectChoices","split","map","Boolean","options","is_correct","choice","JSON","stringify","prompt_text","match_text","val","entries","question_text","default_points","parseInt","est_time","grading_instructions","source","true_false_answer","to_delete","matches","oldMatchIds","match_id","patch","resetForm","serverMsg","params","testbanks","Array","isArray","base","attachment","url","correct_option","incorrect_options","questionId","testbankId","question_ids","errMsg","file","files","reader","FileReader","readAsDataURL","fileInput","querySelector","is_used","tests","opt","join","option_id","forEach","confirm","delete","fetchTestBanks","feedbackList","entry","question_id","feedback","fb","comment","openFeedbackForm","rows","feedbackText","submitFeedback","closeFeedbackForm","userRole","showFeedbackForm","selectedQuestionIdForFeedback","payload","parse","atob","fetchFeedbackByTestbank","comment_field","showEditForm","selectedTestBankId","publishTestbank","published","deleteTestBank","updateTestBank","editForm","selectedQuestions","match","removeQuestionFromTestBank","handleFileUpload","showPopup","computed","checkPublishedStatus","loadQuestions","testBank","put","questionsRes","rawQuestions","found","courses","course","selectCourse","viewPreviousTests","chooseTestToPublish","testFiles","test","test_id","download_url","hasAnswerKey","downloadTestAndKey","publishSelectedTest","selectedTestIdToPublish","showPublishSelector","fetchCourses","course_id","course_name","courseId","courseTitle","final_tests","enrichedTests","keyRes","file_url","testLink","download","body","click","removeChild","keyLink","saveCourse","courseNumber","selectedTextbookId","selectedTextbookTitle","courseData","course_number","viewPublishedTests","fetchFeedback","viewing","fullTestbanks","class_average","toFixed","f","rating","attachments","openTestBankModal","min","max","feedbackRating","unpublishedDraftPools","assignToDraftPool","closeTestBankModal","selectedQuestionToAdd","showTestBankModal","loadingPublished","fetchCourseTextbook","fetchTeacherTestbanks","loadFeedbackForQuestion","courseRes","courseListRes","matchingCourseIds","testList","publishedTests","includes","newRating","flatMap","importTest","selectQuestionType","showCourseEditPopup","saveCourseInfo","editCourseTitle","editCourseNumber","image","loadTestbanks","testBankName","titleParts","pop","newTitle","selectedTestbankId","testBankId","getElementById","formData","uploadResponse","file_path","importResponse","import_id","saveResponse","commonFields","correctAnswerText","some","oldBlankIds","b","blank_id","el","display","testOptions","testName","showBackWarning","exportWarning","totalEstimatedTime","totalPoints","confirmBack","confirmExport","saveEditedQuestion","item-key","handle","saveOrder","header","item","element","shuffleOptions","getShuffledMatches","getShuffledAnswerBank","String","fromCharCode","getMatchingKeyString","removeFromTest","footer","components","draggable","savedOptions","coverPage","selectedTemplate","uploadedImage","graphicPreview","selectedTypes","hasUnsavedChanges","publishWarning","addEventListener","confirmExit","removeEventListener","watch","deep","newList","idOrder","reduce","sum","isNaN","pts","parseFloat","newQuestionId","new_question_id","orderKey","savedOrder","updatedOrder","$nextTick","newQuestion","scrollIntoView","behavior","block","blob","filename","File","testId","keyFile","finalizePayload","test_bank_id","estimated_time","test_instructions","questionCount","question_count","dataUrl","arr","mime","bstr","u8arr","Uint8Array","charCodeAt","finalizedMeta","finalizeTestBeforeExport","exportToWord","publishTest","preventDefault","returnValue","goBackTB","types","finalOrdered","questionMap","Map","_shuffledAnswers","Math","floor","random","copy","shuffleArray","prompts","answers","prompt","shuffledAnswers","matchIndex","findIndex","ans","totalTime","confirmedPoints","confirmedTime","Document","Packer","Paragraph","TextRun","ImageRun","Table","TableRow","TableCell","HeadingLevel","AlignmentType","BorderStyle","ThematicBreak","WidthType","createHorizontalLine","pageBreak","children","pageBreakBefore","coverPageContent","cover","heading","TITLE","alignment","CENTER","spacing","after","HEADING_1","HEADING_2","instruction","bullet","level","testContent","content","imageResponse","fetch","imageBuffer","arrayBuffer","imageBytes","transformation","width","height","indent","left","shuffledMatches","tableRows","size","PERCENTAGE","margins","top","bottom","borders","NONE","color","right","insideHorizontal","insideVertical","keyContent","bold","answerText","correctIndex","resourceContent","resourceSection","base64Data","binaryString","byteArray","testDoc","sections","properties","concat","styles","default","run","font","keyDoc","testBlob","keyBlob","toBlob","testFile","blobToFile","testForm","uploadAnswerKey","displayChapter","displaySection","showCreateTestWarning","confirmRemoveQuestion","showDeleteConfirm","popupMessage","showInfoPopup","goToCreateTest","handleGraphicUpload","promptRemoveQuestion","showEditQuestionForm","editingQuestionData","graphicFile","graphicFileName","questionIdToDelete","initialize","downloadData","endpoints","users","endpoint","fetchAndDownload","URL","createObjectURL","a","revokeObjectURL","routes","component","Welcome","PubHome","PubLog","PubNewBook","PubNewTB","PubQuestions","PubViewFeedback","PubViewTB","TeacherHome","TeacherLog","TeacherNewClass","TeacherNewTB","TeacherPubQ","TeacherQuestions","TeacherTemplate","TeacherViewTB","WebmasterHome","WebmasterLog","router","history","app","App","mount"],"mappings":"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","file":"js/app.7d9a7bfe.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-2d0d6e77\":\"e4320951\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/API_Testing/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TeacherViewTB.vue?vue&type=style&index=0&id=472ecc14&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PubLog.vue?vue&type=style&index=0&id=800dd872&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TeacherNewClass.vue?vue&type=style&index=0&id=37be9029&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TeacherPubQ.vue?vue&type=style&index=0&id=6bde37a5&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Welcome.vue?vue&type=style&index=0&id=e7dbd576&scoped=true&lang=css\"","\r\n<template>\r\n  <div id=\"app\">\r\n    <!-- This is where the route's component will be displayed -->\r\n    <router-view></router-view>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'App',\r\n  name: 'App',\r\n  mounted() {\r\n    document.title = \"Print-A-Test\"; // Change this to your desired app name\r\n  }\r\n};\r\n</script>\r\n<style>\r\nhtml, body {\r\n  margin: 0; /* Remove default margin */\r\n  padding: 0; /* Remove default padding */\r\n  \r\n}\r\n\r\n\r\n</style>","import { render } from \"./App.vue?vue&type=template&id=0c49bc5c\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=0c49bc5c&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!-- filepath: /c:/Users/laure/Senior-Project/TestCreationVue/src/components/Welcome.vue -->\r\n<template>\r\n\r\n        <div class=\"theme-welcome\">\r\n            <div class=\"top-banner\">\r\n                <div class=\"banner-title\">Welcome to Print-A-Test</div>\r\n            </div>\r\n            <div class=\"center large-paragraph\" style=\"color:#222\"> \r\n                Select the role you are logging in as:</div>\r\n            <div class=\"button-container\">\r\n                <router-link to=\"/TeacherLog\">\r\n                    <button class=\"button\">Teacher</button>\r\n                </router-link>\r\n            </div>\r\n            <br>\r\n            <div class=\"button-container\">\r\n                <router-link to=\"/PubLog\">\r\n                    <button class=\"button\">Publisher</button>\r\n                </router-link>\r\n            </div>\r\n            <br>\r\n            <div class=\"button-container\">\r\n                <router-link to=\"/WebmasterLog\">\r\n                    <button class=\"button\">Webmaster</button>\r\n                </router-link>\r\n            </div>\r\n\r\n        </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'Welcome'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.button {\r\n    background-color: var(--banner-color);\r\n    border: none;\r\n    color: var(--text-color);\r\n    padding: 10px 20px;\r\n    font-size: 18px;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    transition: background-color 0.3s ease;\r\n}\r\n\r\n.button-container {\r\n    text-align: center;\r\n    display: flex;\r\n    justify-content: center;\r\n    margin: 10px 0;\r\n}\r\n.button:hover {\r\n  background-color: #cf685f;\r\n}\r\n\r\n.center {\r\n    text-align: center;\r\n    display: block;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n    width: 50%;\r\n}\r\n\r\n.large-heading {\r\n    font-size: 55px;\r\n}\r\n\r\n.large-paragraph {\r\n    font-size: 30px;\r\n}\r\n\r\n.theme-welcome {\r\n    --banner-color: #d2746b;\r\n    --text-color: #222;\r\n    --card-bg: #ffffff;\r\n    /*  Define this missing variable */\r\n    background-color: #fdfdfd;\r\n    min-height: 100vh;\r\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n}\r\n\r\n.top-banner {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    flex-wrap: wrap;\r\n    /*  allows wrap on small screens */\r\n    gap: 20px;\r\n    padding: 15px 30px;\r\n    background-color: var(--banner-color);\r\n    color: var(--text-color);\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n    position: sticky;\r\n    top: 0;\r\n    z-index: 999;\r\n}\r\n\r\n/* Larger submit button */\r\ninput[type=\"submit\"] {\r\n    background-color: #f1af15;\r\n    color: black;\r\n    font-size: 20px;\r\n    padding: 10px 20px;\r\n}\r\n</style>","import { render } from \"./Welcome.vue?vue&type=template&id=e7dbd576&scoped=true\"\nimport script from \"./Welcome.vue?vue&type=script&lang=js\"\nexport * from \"./Welcome.vue?vue&type=script&lang=js\"\n\nimport \"./Welcome.vue?vue&type=style&index=0&id=e7dbd576&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e7dbd576\"]])\n\nexport default __exports__","<!-- filepath: /c:/Users/laure/Senior-Project/TestCreationVue/src/components/PubHome.vue -->\r\n<template>\r\n <div class=\"theme-publisher\">\r\n  <div class=\"top-banner\">\r\n  <div class=\"banner-title\">Textbook Selection</div>\r\n\r\n  <div class=\"banner-actions\">\r\n    <router-link to=\"/\" class=\"p_banner-btn\">Log Out</router-link>\r\n  </div>\r\n</div>\r\n    <div class=\"center large-paragraph\" style = \"color:#222\">\r\n      <div class=\"page-wrapper\">\r\n\r\n      Please select or add a textbook:\r\n\r\n      <div class=\"button-row\">\r\n      <!--selecting a course will be a drop down menu with all previous courses-->\r\n      <!--If else that ensures there are courses to select from-->\r\n      <div class=\"p_dropdown\" v-if=\"textbooks.length\">\r\n        <button class=\"p_dropbtn\">Select Textbook</button>\r\n        <div class=\"p_dropdown-content\">\r\n          <router-link v-for=\"textbook in textbooks\" :key=\"textbook.id\"\r\n          :to=\"{ path: 'PubQuestions', query: { title: textbook.title, textbook_id: textbook.id } }\">\r\n            {{ textbook.title }}\r\n          </router-link>\r\n        </div>\r\n      </div>\r\n      <div v-else>\r\n        No courses available.\r\n      </div>\r\n      <!--creating a new course will take user to new page-->\r\n      <router-link to=\"PubNewBook\">\r\n        <button class=\"p_button\">Add New Textbook</button>\r\n      </router-link>\r\n      <br>\r\n    </div>\r\n  </div>\r\n  </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api'; // <-- your custom Axios instance with token handling\r\nimport jwtDecode from 'jwt-decode';\r\nexport default {\r\n  name: 'PublisherHome',\r\n  data() {\r\n    return {\r\n      textbooks: [],\r\n      error: null,\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchTextbooks();\r\n  },\r\n  methods: {\r\n    async fetchTextbooks() {\r\n      try {\r\n        console.log('Fetching textbooks...'); // Debugging\r\n\r\n        const response = await api.get('/textbooks', {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        console.log('Textbooks fetched:', response.data); // Debugging\r\n\r\n        if (response.data && response.data.textbooks) {\r\n          this.textbooks = response.data.textbooks;\r\n        } else {\r\n          this.error = 'Failed to fetch textbooks data.';\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching textbooks:', error);\r\n\r\n        // Check if error has a response from the backend\r\n        if (error.response) {\r\n          this.error = `Error: ${error.response.status} - ${error.response.data.message || error.response.statusText}`;\r\n        } else {\r\n          this.error = 'Network error or server is not responding.';\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import '../assets/publisher_styles.css';\r\n\r\n.pub-home-container {\r\n  background-color: #17552a;\r\n  font-family: Arial, sans-serif;\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.dropbtn {\r\n  background-color: rgb(48, 191, 223);\r\n  color: black;\r\n  padding: 10px;\r\n  font-size: 20px;\r\n  border: none;\r\n}\r\n\r\n.dropdown {\r\n  position: relative;\r\n  display: inline-block;\r\n}\r\n\r\n.dropdown-content {\r\n  display: none;\r\n  position: absolute;\r\n  background-color: #f1f1f1;\r\n  min-width: 160px;\r\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\r\n  z-index: 1;\r\n}\r\n\r\n.dropdown-content a {\r\n  color: black;\r\n  padding: 10px 15px;\r\n  text-decoration: none;\r\n  display: block;\r\n}\r\n\r\n.dropdown-content a:hover {\r\n  background-color: rgb(48, 191, 223);\r\n}\r\n\r\n.dropdown:hover .dropdown-content {\r\n  display: block;\r\n}\r\n\r\n.dropdown:hover .dropbtn {\r\n  background-color: rgb(40, 151, 176);\r\n}\r\n</style>","// src/api.js\r\nimport axios from 'axios';\r\n\r\nconst api = axios.create({\r\n  baseURL: 'https://api-testing-yfy6.onrender.com',\r\n  responseType: 'json'\r\n});\r\n\r\n\r\n// Attach the token to every outgoing request\r\napi.interceptors.request.use(config => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n}, error => Promise.reject(error));\r\n\r\n// Response interceptor to handle token expiration and refresh\r\napi.interceptors.response.use(\r\n  response => response,\r\n  async error => {\r\n    const originalRequest = error.config;\r\n\r\n    // If request failed due to 401 and hasn't been retried\r\n    if (error.response && error.response.status === 401 && !originalRequest._retry) {\r\n      originalRequest._retry = true;\r\n\r\n      const newToken = await refreshToken();\r\n\r\n      if (newToken) {\r\n        originalRequest.headers.Authorization = `Bearer ${newToken}`;\r\n        return api(originalRequest); // retry the original request with new token\r\n      } else {\r\n        console.warn(\"Token refresh failed or user logged out.\");\r\n      }\r\n    }\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Refresh token logic (calls backend /auth/refresh)\r\nasync function refreshToken() {\r\n  const currentToken = localStorage.getItem('token');\r\n  if (!currentToken) return null;\r\n\r\n  try {\r\n    const res = await axios.post('https://api-testing-yfy6.onrender.com/auth/refresh', {\r\n      token: currentToken\r\n    });\r\n\r\n    const newToken = res.data.token;\r\n    localStorage.setItem('token', newToken);\r\n    return newToken;\r\n  } catch (err) {\r\n    console.error('Token refresh failed:', err);\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user_id');\r\n    localStorage.removeItem('role');\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default api;\r\n","import { render } from \"./PubHome.vue?vue&type=template&id=46fbfbd4&scoped=true\"\nimport script from \"./PubHome.vue?vue&type=script&lang=js\"\nexport * from \"./PubHome.vue?vue&type=script&lang=js\"\n\nimport \"./PubHome.vue?vue&type=style&index=0&id=46fbfbd4&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-46fbfbd4\"]])\n\nexport default __exports__","<!-- filepath: /c:/Users/laure/Senior-Project/TestCreationVue/src/components/PubLog.vue -->\r\n<template>\r\n  <div class=\"theme-publisher\">\r\n  <div class=\"top-banner\">\r\n  <div class=\"banner-title\">Publisher Login</div>\r\n</div>\r\n    <!-- This is the page where publishers log in-->\r\n    <div class=\"center large-paragraph\" style =\"color: #222\">\r\n      Please enter your publisher username and password:\r\n      <br />\r\n      <br />\r\n      <form @submit.prevent=\"submitForm\">\r\n        <!-- create username text box-->\r\n        <label for=\"uname\">Username:</label><br />\r\n        <input type=\"text\" id=\"uname\" v-model=\"username\" /><br />\r\n        <br />\r\n        <!-- create password textbox-->\r\n        <label for=\"pass\">Password:</label><br />\r\n        <input type=\"password\" id=\"pass\" v-model=\"password\" /><br /><br />\r\n        <!-- submit button, when pressed it takes user to url specified-->\r\n        <input type=\"submit\" value=\"Submit\" :disabled=\"loading\" />\r\n      </form>\r\n\r\n      <!-- Show error message if user and password are entered incorrectly -->\r\n      <div v-if=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</div>\r\n      \r\n      <!-- Show loading spinner if the form is submitting -->\r\n      <div v-if=\"loading\" class=\"loading-message\">Logging in...</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api'; // <-- your custom Axios instance with token handling\r\nimport jwtDecode from 'jwt-decode';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      username: '',\r\n      password: '',\r\n      errorMessage: '',\r\n      loading: false\r\n    };\r\n  },\r\n  mounted() {\r\n    // Optional: Check if token exists and redirect if still valid\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      try {\r\n        const decoded = jwtDecode(token);\r\n        const currentTime = Date.now() / 1000;\r\n\r\n        if (decoded.exp > currentTime && decoded.role === 'publisher') {\r\n          this.$router.push('/PubHome');\r\n        }\r\n      } catch (error) {\r\n        console.error('Invalid token', error);\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async submitForm() {\r\n  if (!this.username || !this.password) {\r\n    this.errorMessage = \"Please enter both username and password.\";\r\n    return;\r\n  }\r\n\r\n  if (this.username.trim().length < 3 || this.password.trim().length < 6) {\r\n    this.errorMessage = \"Username must be at least 3 characters and password at least 6 characters.\";\r\n    return;\r\n  }\r\n\r\n  this.loading = true;\r\n  this.errorMessage = \"\";\r\n\r\n  try {\r\n    const res = await api.post('/auth/login', {\r\n      username: this.username.toLowerCase(),\r\n      password: this.password\r\n    });\r\n\r\n    const { token, user_id, role } = res.data;\r\n\r\n    // Store token and identity in localStorage\r\n    localStorage.setItem('token', token);\r\n    localStorage.setItem('user_id', user_id);\r\n    localStorage.setItem('role', role);\r\n\r\n    // Redirect based on role\r\n    if (role === 'publisher') {\r\n      this.$router.push('/PubHome');\r\n    } else {\r\n      this.errorMessage = \"Only publishers can log in here.\";\r\n      localStorage.clear(); // Clear stored data for non-teachers\r\n    }\r\n  } catch (error) {\r\n    if (!error.response) {\r\n      this.errorMessage = \"Network error. Please check your connection.\";\r\n    } else if (error.response.status === 401) {\r\n      this.errorMessage = \"Invalid username or password.\";\r\n    } else {\r\n  this.errorMessage = (error.response && error.response.data && error.response.data.message) || \"An error occurred during login.\";\r\n}\r\n  } finally {\r\n    this.loading = false;\r\n  }\r\n}\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n@import '../assets/publisher_styles.css';\r\n\r\n.pub-log-container {\r\n  background-color: #17552a;\r\n  font-family: Arial, sans-serif;\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n/* Larger submit button */\r\ninput[type=\"submit\"] {\r\n  background-color: rgb(48, 191, 223);\r\n  color: black;\r\n  font-size: 20px;\r\n  padding: 10px 20px;\r\n}\r\n.error-message {\r\n  color: rgb(174, 38, 38);\r\n  margin-top: 10px;\r\n}\r\n\r\n.loading-message {\r\n  color: #ffffff;\r\n  margin-top: 10px;\r\n}\r\n\r\ninput[type=\"submit\"] {\r\n  background-color: rgb(84, 178, 150);\r\n  color: black;\r\n  font-size: 20px;\r\n  padding: 10px 20px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\ninput[type=\"submit\"]:disabled {\r\n  background-color: #cccccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\ninput[type=\"text\"], input[type=\"password\"] {\r\n  padding: 10px;\r\n  font-size: 16px;\r\n  border-radius: 4px;\r\n  border: 1px solid #ddd;\r\n}\r\n\r\n.center {\r\n  text-align: center;\r\n}\r\n\r\n.large-heading {\r\n  font-size: 2em;\r\n}\r\n\r\n.large-paragraph {\r\n  font-size: 1.2em;\r\n}\r\n</style>","import { render } from \"./PubLog.vue?vue&type=template&id=800dd872&scoped=true\"\nimport script from \"./PubLog.vue?vue&type=script&lang=js\"\nexport * from \"./PubLog.vue?vue&type=script&lang=js\"\n\nimport \"./PubLog.vue?vue&type=style&index=0&id=800dd872&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-800dd872\"]])\n\nexport default __exports__","<!-- filepath: /c:/Users/laure/Senior-Project/TestCreationVue/src/components/PubNewBook.vue -->\r\n<template>\r\n  <div class=\"theme-publisher\">\r\n    <div class=\"top-banner\">\r\n      <div class=\"banner-title\">Add New Textbook</div>\r\n\r\n      <div class=\"banner-actions\">\r\n        <router-link to=\"/PubHome\" class=\"p_banner-btn\">Home</router-link>\r\n        <router-link to=\"/\" class=\"p_banner-btn\">Log Out</router-link>\r\n      </div>\r\n    </div>\r\n    <div class=\"center large-paragraph\" style=\"color:#222\">\r\n      <form @submit.prevent=\"saveBook\">\r\n        <label for=\"textbookTitle\">Textbook Title:</label>\r\n        <input type=\"text\" id=\"textbookTitle\" v-model=\"textbookTitle\" style=\"height:20px\"><br>\r\n\r\n        <label for=\"author\">Author:</label>\r\n        <input type=\"text\" id=\"author\" v-model=\"author\" style=\"height:20px\"><br>\r\n\r\n        <label for=\"ISBN\">ISBN:</label>\r\n        <input type=\"text\" id=\"ISBN\" v-model=\"ISBN\" style=\"height:20px\"><br>\r\n\r\n        <label for=\"version\">Version:</label>\r\n        <input type=\"text\" id=\"version\" v-model=\"version\" style=\"height:20px\"><br>\r\n\r\n        <label for=\"websiteLink\">Website Link:</label>\r\n        <input type=\"text\" id=\"websiteLink\" v-model=\"websiteLink\" style=\"height:20px\"><br>\r\n\r\n        <div class=\"center large-heading\">\r\n          <input type=\"submit\" value=\"Save\">\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport api from '@/api'\r\n\r\nexport default {\r\n  name: 'PublisherNewBook',\r\n  data() {\r\n    return {\r\n      textbookTitle: '',\r\n      author: '',\r\n      ISBN: '',\r\n      version: '',\r\n      websiteLink: ''\r\n    };\r\n  },\r\n  methods: {\r\n    async saveBook() {\r\n      //&& this.websiteLink include in condition when table updated\r\n      if (this.textbookTitle && this.author && this.ISBN && this.version) {\r\n        const bookData = {\r\n          //replaced with titles of database fields\r\n          textbook_title: this.textbookTitle,\r\n          textbook_author: this.author,\r\n          textbook_isbn: this.ISBN,\r\n          textbook_version: this.version,\r\n          websiteLink: this.websiteLink\r\n        };\r\n\r\n        try {\r\n\r\n          const response = await api.post('/textbooks', bookData, {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n            },\r\n          });\r\n          console.log('Book saved successfully:', response.data);\r\n          //alert('Book saved successfully!');\r\n          this.$router.push({\r\n            path: '/PubHome'\r\n          }\r\n          );\r\n\r\n        }\r\n        catch (error) {\r\n          console.error('Error saving book:', error);\r\n          alert('Failed to save the book. Please try again.');\r\n        }\r\n      } else {\r\n        alert('Please fill out all fields.');\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import '../assets/publisher_styles.css';\r\n\r\n.small-font {\r\n  font-size: 15x;\r\n}\r\n</style>","import { render } from \"./PubNewBook.vue?vue&type=template&id=4c95a948&scoped=true\"\nimport script from \"./PubNewBook.vue?vue&type=script&lang=js\"\nexport * from \"./PubNewBook.vue?vue&type=script&lang=js\"\n\nimport \"./PubNewBook.vue?vue&type=style&index=0&id=4c95a948&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4c95a948\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"theme-publisher\">\r\n    <div class=\"top-banner\">\r\n      <div class=\"banner-title\">Create New Draft Pool</div>\r\n\r\n      <div class=\"banner-actions\">\r\n        <router-link to=\"/PubHome\" class=\"p_banner-btn\">Home</router-link>\r\n        <router-link to=\"/\" class=\"p_banner-btn\">Log Out</router-link>\r\n      </div>\r\n    </div>\r\n    <div class=\"center large-paragraph\" style=\"color:#222\">\r\n      <form @submit.prevent=\"saveTestBank\">\r\n\r\n        <label for=\"bankName\">Name of Draft Pool:</label>\r\n        <input type=\"text\" id=\"bankName\" v-model=\"bankName\" style=\"height:20px\" required /><br>\r\n\r\n        <label for=\"bankCh\">Textbook Chapter:</label>\r\n        <input type=\"text\" id=\"bankCh\" v-model=\"bankChapter\" /><br>\r\n\r\n        <label for=\"bankSec\">Textbook Section:</label>\r\n        <input type=\"text\" id=\"bankSec\" v-model=\"bankSection\" /><br>\r\n\r\n        <input type=\"submit\" value=\"Submit\" />\r\n      </form>\r\n\r\n      <div v-if=\"error\" style=\"color: red; margin-top: 10px;\">{{ error }}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api';\r\n\r\nexport default {\r\n  name: 'PublisherNewTB',\r\n  data() {\r\n    return {\r\n      bankName: '',\r\n      bankChapter: '',\r\n      bankSection: '',\r\n      textbookId: this.$route.query.textbook_id || '',\r\n      textbookTitle: this.$route.query.title || '',\r\n      error: null\r\n    };\r\n  },\r\n  methods: {\r\n    async saveTestBank() {\r\n      if (this.bankName && this.bankChapter && this.bankSection && this.textbookId) {\r\n        const testBankData = {\r\n          testbank_name: this.bankName,\r\n          chapter_number: this.bankChapter,\r\n          section_number: this.bankSection,\r\n          textbook_id: this.textbookId\r\n        };\r\n\r\n        try {\r\n          const response = await api.post('/testbanks/publisher', testBankData, {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem('token')}`\r\n            }\r\n          });\r\n          console.log('Test bank saved successfully:', response.data);\r\n          //alert('Test bank saved successfully!');\r\n          this.$router.push({\r\n            path: '/PubQuestions',\r\n            query: {\r\n              title: this.textbookTitle,\r\n              textbook_id: this.textbookId\r\n            }\r\n          });\r\n        } catch (error) {\r\n          console.error('Error saving test bank:', error);\r\n          //alert('Failed to save the test bank. Please try again.');\r\n        }\r\n      } else {\r\n        //alert('Please fill out all fields.');\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import '../assets/publisher_styles.css';\r\n\r\n.pub-newTB-container {\r\n  background-color: #17552a;\r\n  font-family: Arial, sans-serif;\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\ninput[type=\"submit\"] {\r\n  background-color: rgb(48, 191, 223);\r\n  color: black;\r\n  font-size: 20px;\r\n  padding: 10px 20px;\r\n}\r\n\r\n.form-row {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-bottom: 15px;\r\n}\r\n\r\ninput[type=\"text\"] {\r\n  width: 300px;\r\n  padding: 10px 12px;\r\n  font-size: 18px;\r\n  border: 2px solid #ccc;\r\n  border-radius: 8px;\r\n  background-color: #f9f9f9;\r\n  transition: border-color 0.3s ease, box-shadow 0.3s ease;\r\n  margin-left: 10px;\r\n}\r\n\r\ninput[type=\"text\"]:focus {\r\n  border-color: rgb(48, 191, 223);\r\n  box-shadow: 0 0 5px rgba(48, 191, 223, 0.5);\r\n  outline: none;\r\n}\r\n</style>\r\n","import { render } from \"./PubNewTB.vue?vue&type=template&id=6c70d6b4&scoped=true\"\nimport script from \"./PubNewTB.vue?vue&type=script&lang=js\"\nexport * from \"./PubNewTB.vue?vue&type=script&lang=js\"\n\nimport \"./PubNewTB.vue?vue&type=style&index=0&id=6c70d6b4&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6c70d6b4\"]])\n\nexport default __exports__","<template>\r\n\r\n  <div class=\"theme-publisher\">\r\n    <div class=\"top-banner\">\r\n      <div class=\"banner-title\">{{ textbookTitle }}</div>\r\n\r\n      <div class=\"banner-actions\">\r\n        <router-link to=\"/PubHome\" class=\"p_banner-btn\">Home</router-link>\r\n        <router-link to=\"/\" class=\"p_banner-btn\">Log Out</router-link>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Edit Blocked Warning Popup -->\r\n    <div class=\"popup-overlay\" v-if=\"editBlockedPopup\">\r\n      <div class=\"form-popup-modal\">\r\n        <h2>Cannot Edit Question</h2>\r\n        <p>{{ editBlockedReason }}</p>\r\n        <p>A new copy will be made instead.</p>\r\n        <button class=\"btn\" @click=\"createCopyInstead\">Create a Copy</button>\r\n        <button class=\"btn cancel\" @click=\"editBlockedPopup = false\">Cancel</button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Toolbar -->\r\n    <div class=\"page-wrapper\">\r\n      <div class=\"button-row\">\r\n        <div class=\"p_dropdown\">\r\n          <button class=\"p_dropbtn\">\r\n            {{ selectedTestBank ? selectedTestBank.name : 'Select Draft Pool' }}\r\n          </button>\r\n          <div class=\"p_dropdown-content\">\r\n            <a v-for=\"tb in testBanks\" :key=\"tb.testbank_id\" href=\"#\" @click.prevent=\"selectTestBank(tb)\">\r\n              {{ tb.name }}\r\n            </a>\r\n          </div>\r\n        </div>\r\n\r\n        <router-link :to=\"{ path: 'PubNewTB', query: { title: textbookTitle, textbook_id: textbookId } }\">\r\n          <button class=\"p_button\">New Draft Pool</button>\r\n        </router-link>\r\n\r\n        <div class=\"p_dropdown\">\r\n          <button class=\"p_dropbtn\">Question Type</button>\r\n          <div class=\"p_dropdown-content\">\r\n            <a @click=\"fetchQuestions('True/False')\">True/False</a>\r\n            <a @click=\"fetchQuestions('Multiple Choice')\">Multiple Choice</a>\r\n            <a @click=\"fetchQuestions('Matching')\">Matching</a>\r\n            <a @click=\"fetchQuestions('Fill in the Blank')\">Fill in the Blank</a>\r\n            <a @click=\"fetchQuestions('Short Answer')\">Short Answer</a>\r\n            <a @click=\"fetchQuestions('Essay')\">Essay</a>\r\n          </div>\r\n        </div>\r\n\r\n        <button class=\"p_button\" @click=\"edit\">New Question</button>\r\n      </div>\r\n\r\n      <!-- Optional display of selected type -->\r\n      <div id=\"selectedQuestionType\" style=\"color: #222;\" class=\"center large-paragraph\">\r\n        {{ selectedQuestionType }}\r\n      </div>\r\n\r\n      <hr />\r\n\r\n      <!-- Question List Display -->\r\n      <ul>\r\n        <div v-for=\"(question, index) in questions\" :key=\"index\" class=\"p_question-box\"\r\n          :class=\"{ selected: selectedQuestionId === question.id }\" @click=\"toggleQuestionSelection(question.id)\">\r\n          <strong>Question {{ index + 1 }}:</strong> {{ question.text }}<br>\r\n          <span><strong>Type:</strong> {{ question.type }}</span><br>\r\n          <span><strong>Chapter:</strong> {{ question.chapter || 'N/A' }}</span><br>\r\n          <span><strong>Section:</strong> {{ question.section || 'N/A' }}</span><br>\r\n          <span><strong>Points:</strong> {{ question.points }}</span><br>\r\n          <span><strong>Estimated Time:</strong> {{ question.time }} minutes</span><br>\r\n\r\n          <!--  New Image Section -->\r\n          <div v-if=\"question.image_url\" style=\"margin-top: 10px;\">\r\n            <strong>Attached Image:</strong><br />\r\n            <img :src=\"question.image_url\" alt=\"Attached Image\" style=\"max-width: 100%; margin-top: 5px;\" />\r\n          </div>\r\n\r\n          <div v-if=\"question.type === 'True/False'\">\r\n            <strong>Answer:</strong> {{ question.answer ? 'True' : 'False' }}\r\n          </div>\r\n\r\n          <div v-if=\"question.type === 'Multiple Choice'\">\r\n            <strong>Correct Answer:</strong>\r\n            {{ (question.correctOption && question.correctOption.option_text) || 'Not specified' }}<br>\r\n\r\n            <strong>Other Options:</strong>\r\n            <ul>\r\n              <li v-for=\"(option, i) in question.incorrectOptions\" :key=\"i\">{{ option.option_text }}</li>\r\n            </ul>\r\n          </div>\r\n\r\n          <div v-if=\"question.type === 'Matching'\">\r\n            <strong>Pairs:</strong>\r\n            <ul>\r\n              <li v-for=\"(pair, i) in question.pairs\" :key=\"i\">{{ pair.term }} - {{ pair.definition }}</li>\r\n            </ul>\r\n          </div>\r\n\r\n          <div v-if=\"question.type === 'Fill in the Blank'\">\r\n            <strong>Correct Answer(s):</strong>\r\n            <ul>\r\n              <li v-for=\"(blank, i) in question.blanks\" :key=\"i\">{{ blank.correct_text }}</li>\r\n            </ul>\r\n          </div>\r\n\r\n          <!-- <div v-if=\"question.type === 'Short Answer'\">\r\n          <strong>Answer:</strong> {{ question.answer || 'Not provided' }}\r\n        </div> -->\r\n\r\n          <!-- <div v-if=\"question.type === 'Essay'\">\r\n          <strong>Essay Instructions:</strong> {{ question.instructions || 'None' }}\r\n        </div> -->\r\n\r\n          <span><strong>Grading Instructions:</strong> {{ question.instructions || 'None' }}</span>\r\n\r\n          <div v-if=\"selectedQuestionId === question.id\" class=\"p_button-group\">\r\n            <button v-if=\"!question.is_published\" @click.stop=\"editQuestion(question)\">Edit</button>\r\n            <button v-if=\"!question.is_published\" @click.stop=\"deleteQuestion(question.id)\">Delete</button>\r\n            <button @click.stop=\"openAddToTestBank(question.id)\">Add to Draft Pool</button>\r\n          </div>\r\n        </div>\r\n      </ul>\r\n\r\n      <!-- Add to Test Bank Modal -->\r\n      <div class=\"popup-overlay\" v-if=\"showAddToTBModal\">\r\n        <div class=\"form-popup-modal\">\r\n          <h2 style=\"text-align: center;\">Select Draft Pool</h2>\r\n          <div class=\"form-container\"\r\n            style=\"display: flex; flex-direction: column; align-items: center; gap: 10px; margin-top: 1rem;\">\r\n            <button v-for=\"tb in testBanks.filter(tb => !tb.is_published)\" :key=\"tb.testbank_id\" class=\"t_button\"\r\n              style=\"width: 100%;\" @click=\"assignQuestionToTestBank(tb.testbank_id)\">\r\n              {{ tb.name }}\r\n            </button>\r\n            <button type=\"button\" class=\"btn cancel\" style=\"width: 100%;\" @click=\"closeAddToTBModal\">\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Popup Overlay -->\r\n      <div class=\"popup-overlay\" v-show=\"showForm\">\r\n        <div class=\"form-popup-modal\">\r\n          <form class=\"form-container\" @submit.prevent=\"handleQuestionSave\">\r\n            <h1>{{ editingQuestionId ? 'Edit Question' : 'New Question' }}</h1>\r\n\r\n            <label><b>Chapter Number</b></label>\r\n            <input type=\"text\" v-model=\"questionData.chapter\" required />\r\n\r\n            <label><b>Section Number</b></label>\r\n            <input type=\"text\" v-model=\"questionData.section\" required />\r\n\r\n            <label><b>Question Type</b><br /></label>\r\n\r\n            <!-- Show a disabled select in view-only mode when editing -->\r\n            <div v-if=\"editingQuestionId\">\r\n              <input type=\"text\" :value=\"selectedQuestionType\" disabled class=\"readonly-input\" />\r\n            </div>\r\n            <!-- Allow selecting type only if creating -->\r\n            <div v-else>\r\n              <select v-model=\"selectedQuestionType\" required>\r\n                <option disabled value=\"\">Select a type</option>\r\n                <option>True/False</option>\r\n                <option>Multiple Choice</option>\r\n                <option>Matching</option>\r\n                <option>Fill in the Blank</option>\r\n                <option>Short Answer</option>\r\n                <option>Essay</option>\r\n              </select>\r\n            </div>\r\n\r\n            <br /><br />\r\n            <label><b>Question Text</b></label>\r\n            <input type=\"text\" v-model=\"questionData.question\" required />\r\n\r\n            <!-- Conditional Fields -->\r\n            <div v-if=\"selectedQuestionType === 'True/False'\">\r\n              <label><b>Answer</b></label>\r\n              <select v-model=\"questionData.answer\">\r\n                <option value=\"True\">True</option>\r\n                <option value=\"False\">False</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div v-if=\"selectedQuestionType === 'Multiple Choice'\">\r\n              <label><b>Correct Answer</b></label>\r\n              <input type=\"text\" v-model=\"questionData.answer\" />\r\n              <label><b>Incorrect Answer Choices (comma-separated)</b></label>\r\n              <input type=\"text\" v-model=\"questionData.answerChoices\" />\r\n            </div>\r\n\r\n            <div v-if=\"selectedQuestionType === 'Matching'\">\r\n              <label><b>Matching Pairs</b></label>\r\n              <div v-for=\"(pair, index) in matchingPairs\" :key=\"index\">\r\n                <input type=\"text\" v-model=\"pair.term\" placeholder=\"Term\" />\r\n                <input type=\"text\" v-model=\"pair.definition\" placeholder=\"Definition\" />\r\n                <button type=\"button\" @click=\"removePair(index)\">Remove</button>\r\n              </div>\r\n              <button type=\"button\" @click=\"addPair\">Add Pair</button>\r\n            </div>\r\n\r\n            <div v-if=\"selectedQuestionType === 'Fill in the Blank'\">\r\n              <label><b>Correct Answer</b></label>\r\n              <input type=\"text\" v-model=\"questionData.answer\" />\r\n            </div>\r\n\r\n            <!-- <div v-if=\"selectedQuestionType === 'Short Answer'\">\r\n            <label><b>Answer</b></label>\r\n            <input type=\"text\" v-model=\"questionData.answer\" />\r\n          </div> -->\r\n\r\n            <div v-if=\"selectedQuestionType === 'Essay'\">\r\n            </div>\r\n\r\n            <br />\r\n            <label><b>Points Worth</b></label>\r\n            <input type=\"text\" v-model=\"questionData.points\" required />\r\n\r\n            <label><b>Estimated Time (in minutes)</b></label>\r\n            <input type=\"text\" v-model=\"questionData.time\" required />\r\n\r\n            <label><b>Grading Instructions</b></label>\r\n            <input type=\"text\" v-model=\"questionData.instructions\" required />\r\n\r\n            <label><b>Attached Image</b></label>\r\n            <!-- Show existing image when editing -->\r\n            <div v-if=\"editingQuestionId && imagePreview\">\r\n              <img :src=\"imagePreview\" alt=\"Attached\" style=\"max-width: 100%;\" />\r\n            </div>\r\n\r\n            <!-- Only allow upload when creating -->\r\n            <div v-else>\r\n              <input type=\"file\" @change=\"handleImageUpload\" accept=\"image/*\" />\r\n              <img v-if=\"imagePreview\" :src=\"imagePreview\" alt=\"Preview\" style=\"max-width: 100%;\" />\r\n            </div>\r\n            <br /><br />\r\n\r\n            <button type=\"submit\" class=\"btn\">Save</button>\r\n            <button type=\"button\" class=\"btn cancel\" @click=\"closeForm\">Close</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api';\r\n\r\nexport default {\r\n  name: 'PubQuestions',\r\n  data() {\r\n    return {\r\n      textbookTitle: '',\r\n      textbookId: '',\r\n      testBanks: [],\r\n      selectedTestBank: null,\r\n      selectedQuestionType: '',\r\n      questions: [],\r\n      selectedQuestionId: null,\r\n      showForm: false,\r\n      showAddToTBModal: false,\r\n      questionToAddToTB: null,\r\n      matchingPairs: [],\r\n      imagePreview: '',\r\n      editingQuestionId: null,\r\n      oldMCOptionIds: [],\r\n      editBlockedPopup: false,\r\n      editBlockedReason: '',\r\n      questionData: {\r\n        chapter: '',\r\n        section: '',\r\n        question: '',\r\n        reference: '',\r\n        answer: '',\r\n        answerChoices: '',\r\n        points: '',\r\n        time: '',\r\n        instructions: '',\r\n        imageFile: null\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    async handleQuestionSave() {\r\n      try {\r\n        let postData;\r\n        let config;\r\n        const isEditing = !!this.editingQuestionId;\r\n        const editingQuestion = this.questions.find(q => q.id === this.editingQuestionId);\r\n\r\n        if (this.questionData.imageFile) {\r\n          postData = new FormData();\r\n\r\n          postData.append('file', this.questionData.imageFile);\r\n          postData.append('question_text', this.questionData.question);\r\n          postData.append('default_points', this.questionData.points);\r\n          postData.append('est_time', this.questionData.time);\r\n          postData.append('chapter_number', this.questionData.chapter);\r\n          postData.append('section_number', this.questionData.section);\r\n          postData.append('grading_instructions', this.questionData.instructions);\r\n          postData.append('type', this.selectedQuestionType);\r\n          postData.append('source', 'manual');\r\n          postData.append('textbook_id', this.textbookId);  //  fixed (was courseId for teachers)\r\n\r\n          if (this.selectedQuestionType === 'True/False') {\r\n            postData.append('true_false_answer', this.questionData.answer === 'True');\r\n          } else if (this.selectedQuestionType === 'Multiple Choice') {\r\n            const incorrectChoices = this.questionData.answerChoices\r\n              .split(',')\r\n              .map(c => c.trim())\r\n              .filter(Boolean);\r\n\r\n            const options = [\r\n              { option_text: this.questionData.answer.trim(), is_correct: true },\r\n              ...incorrectChoices.map(choice => ({\r\n                option_text: choice,\r\n                is_correct: false\r\n              }))\r\n            ];\r\n            postData.append('options', JSON.stringify(options));\r\n          } else if (this.selectedQuestionType === 'Matching') {\r\n            postData.append('matches', JSON.stringify(\r\n              this.matchingPairs.map(pair => ({\r\n                prompt_text: pair.term,\r\n                match_text: pair.definition\r\n              }))\r\n            ));\r\n          } else if (this.selectedQuestionType === 'Fill in the Blank') {\r\n            postData.append('blanks', JSON.stringify([{ correct_text: this.questionData.answer }]));\r\n          } else if (this.selectedQuestionType === 'Short Answer') {\r\n            postData.append('answer', this.questionData.answer);\r\n          } else if (this.selectedQuestionType === 'Essay') {\r\n            postData.append('grading_instructions', this.questionData.instructions);\r\n          }\r\n\r\n          // Optional: log FormData for debugging\r\n          for (let [key, val] of postData.entries()) {\r\n            console.log(`${key}:`, val);\r\n          }\r\n\r\n          config = {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n              'Content-Type': 'multipart/form-data'\r\n            }\r\n          };\r\n        } else {\r\n          // JSON fallback when no image is uploaded\r\n          postData = {\r\n            question_text: this.questionData.question,\r\n            default_points: parseInt(this.questionData.points),\r\n            est_time: parseInt(this.questionData.time),\r\n            chapter_number: this.questionData.chapter,\r\n            section_number: this.questionData.section,\r\n            grading_instructions: this.questionData.instructions,\r\n            type: this.selectedQuestionType,\r\n            source: 'manual',\r\n            textbook_id: this.textbookId\r\n          };\r\n\r\n          if (this.selectedQuestionType === 'True/False') {\r\n            postData.true_false_answer = this.questionData.answer === 'True';\r\n          } else if (this.selectedQuestionType === 'Multiple Choice') {\r\n            const incorrectChoices = this.questionData.answerChoices\r\n              .split(',')\r\n              .map(c => c.trim())\r\n              .filter(Boolean);\r\n\r\n            postData.options = [\r\n              { option_text: this.questionData.answer.trim(), is_correct: true },\r\n              ...incorrectChoices.map(choice => ({ option_text: choice, is_correct: false }))\r\n            ];\r\n            if (isEditing && this.oldMCOptionIds.length > 0) {\r\n              postData.to_delete = this.oldMCOptionIds;\r\n            }\r\n          } else if (this.selectedQuestionType === 'Matching') {\r\n            postData.matches = this.matchingPairs.map(pair => ({\r\n              prompt_text: pair.term,\r\n              match_text: pair.definition\r\n            }));\r\n            if (isEditing && editingQuestion) {\r\n              const oldMatchIds = (editingQuestion.pairs || []).map(p => p.match_id);\r\n              postData.to_delete = oldMatchIds;\r\n            }\r\n          } else if (this.selectedQuestionType === 'Fill in the Blank') {\r\n            postData.blanks = [{ correct_text: this.questionData.answer }];\r\n          } else if (this.selectedQuestionType === 'Short Answer') {\r\n            postData.answer = this.questionData.answer;\r\n          } else if (this.selectedQuestionType === 'Essay') {\r\n            postData.grading_instructions = this.questionData.instructions;\r\n          }\r\n\r\n          config = {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem('token')}`\r\n            }\r\n          };\r\n        }\r\n\r\n        if (isEditing) {\r\n          await api.patch(`/questions/${this.editingQuestionId}`, postData, config);\r\n        } else {\r\n          await api.post('/questions', postData, config);\r\n        }\r\n        //alert('Question saved successfully!');\r\n        this.closeForm();\r\n        this.resetForm();\r\n        this.fetchQuestions(this.selectedQuestionType);\r\n\r\n      } catch (err) {\r\n        let serverMsg = 'Something went wrong.';\r\n        if (err && err.response && err.response.data) {\r\n          serverMsg = err.response.data.error || err.response.data.message || serverMsg;\r\n        }\r\n        alert('Save failed: ' + serverMsg);\r\n        console.error('Error saving question:', err);\r\n      }\r\n    },\r\n\r\n    async fetchTestBanks() {\r\n      try {\r\n        const response = await api.get('/testbanks/publisher', {\r\n          params: { textbook_id: this.textbookId },\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n        });\r\n        this.testBanks = response.data.testbanks;\r\n      } catch (error) {\r\n        console.error('Error loading test banks:', error);\r\n      }\r\n    },\r\n    async fetchQuestions(type) {\r\n      this.selectedQuestionType = type;\r\n      try {\r\n        const response = await api.get(`/questions`, {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\r\n          params: { textbook_id: this.textbookId, type: type }\r\n        });\r\n        if (Array.isArray(response.data.questions)) {\r\n          this.questions = response.data.questions.map((question) => {\r\n            const base = {\r\n              text: question.question_text,\r\n              type: question.type,\r\n              points: question.default_points,\r\n              id: question.id,\r\n              instructions: question.grading_instructions || '',\r\n              time: question.est_time,\r\n              chapter: question.chapter_number,\r\n              section: question.section_number,\r\n              image_url: question.attachment && question.attachment.url ? question.attachment.url : '',\r\n              is_published: question.is_published || false\r\n            };\r\n            switch (question.type) {\r\n              case 'True/False': return { ...base, answer: question.true_false_answer };\r\n              case 'Multiple Choice': return { ...base, correctOption: question.correct_option || null, incorrectOptions: question.incorrect_options || [] };\r\n              case 'Matching': return { ...base, pairs: (question.matches || []).map(pair => ({ term: pair.prompt_text, definition: pair.match_text })) };\r\n              case 'Fill in the Blank': return { ...base, blanks: question.blanks || [] };\r\n              case 'Short Answer': return base; // { ...base, answer: question.answer || '' };\r\n              case 'Essay': return base;\r\n              default: return base;\r\n            }\r\n          });\r\n        } else {\r\n          this.questions = [];\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching questions:', error);\r\n        this.questions = [];\r\n      }\r\n    },\r\n    openAddToTestBank(questionId) {\r\n      this.questionToAddToTB = questionId;\r\n      this.showAddToTBModal = true;\r\n    },\r\n    closeAddToTBModal() {\r\n      this.questionToAddToTB = null;\r\n      this.showAddToTBModal = false;\r\n    },\r\n    async assignQuestionToTestBank(testbankId) {\r\n      if (!this.questionToAddToTB) return;\r\n      try {\r\n        await api.post(`/testbanks/publisher/${testbankId}/questions`, {\r\n          question_ids: [this.questionToAddToTB]\r\n        }, {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n        });\r\n        alert('Question successfully added to testbank!');\r\n        this.closeAddToTBModal();\r\n      } catch (error) {\r\n        console.error('Failed to add question to testbank:', error);\r\n        // alert('Failed to add question.');\r\n        let errMsg = 'Failed to add question.';\r\n        if (error.response && error.response.data && error.response.data.error) {\r\n          errMsg = error.response.data.error;\r\n        }\r\n        //alert(errMsg);\r\n      }\r\n    },\r\n\r\n    selectTestBank(tb) {\r\n      this.$router.push({\r\n        name: 'PubViewTB',\r\n        query: {\r\n          testbank_id: tb.testbank_id,\r\n          name: tb.name,                     //  this is the draft pool name\r\n          title: this.textbookTitle,\r\n          textbook_id: this.textbookId,\r\n          chapter: tb.chapter_number,\r\n          section: tb.section_number\r\n        }\r\n      });\r\n\r\n\r\n    },\r\n    toggleQuestionSelection(id) {\r\n      this.selectedQuestionId = this.selectedQuestionId === id ? null : id;\r\n    },\r\n    selectQuestionType(type) {\r\n      this.selectedQuestionType = type;\r\n      this.edit();\r\n    },\r\n    edit() {\r\n      this.showForm = true;\r\n    },\r\n    closeForm() {\r\n      this.showForm = false;\r\n      this.resetForm();\r\n    },\r\n    addPair() {\r\n      this.matchingPairs.push({ term: '', definition: '' });\r\n    },\r\n    removePair(index) {\r\n      this.matchingPairs.splice(index, 1);\r\n    },\r\n    handleImageUpload(event) {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        this.questionData.imageFile = file;\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n          this.imagePreview = e.target.result;\r\n        };\r\n        reader.readAsDataURL(file);\r\n      }\r\n    },\r\n    resetForm() {\r\n      this.questionData = {\r\n        chapter: '',\r\n        section: '',\r\n        question: '',\r\n        reference: '',\r\n        answer: '',\r\n        answerChoices: '',\r\n        points: '',\r\n        time: '',\r\n        instructions: '',\r\n        imageFile: null  //  correct property\r\n      };\r\n      this.selectedQuestionType = '';\r\n      this.matchingPairs = [];\r\n      this.imagePreview = '';\r\n      this.editingQuestionId = null;\r\n      this.oldMCOptionIds = []; //  reset here\r\n\r\n      //  Clear the file input manually\r\n      const fileInput = document.querySelector('input[type=\"file\"]');\r\n      if (fileInput) fileInput.value = '';\r\n    },\r\n\r\n    async editQuestion(question) {\r\n\r\n      try {\r\n        const res = await api.get(`/questions/${question.id}/used_in`, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        if (res.data.is_used) {\r\n          // Question is used in a published/final test\r\n          this.editBlockedReason = `This question is used in a \"${res.data.tests[0].status}\" test: \"${res.data.tests[0].name}\".`;\r\n          this.editingQuestionId = question.id;\r\n          this.editBlockedPopup = true;\r\n          return;\r\n        }\r\n      } catch (err) {\r\n        console.error('Error checking question status:', err);\r\n        alert('Could not verify question status.');\r\n        return;\r\n      }\r\n\r\n      // If not used, proceed with editing\r\n      this.editingQuestionId = question.id;\r\n      this.questionData.question = question.text;\r\n      this.questionData.chapter = question.chapter;\r\n      this.questionData.section = question.section;\r\n      this.questionData.points = question.points;\r\n      this.questionData.time = question.time;\r\n      this.questionData.instructions = question.instructions;\r\n      this.questionData.answer = question.answer || '';\r\n      this.selectedQuestionType = question.type;\r\n\r\n      //  Show existing image if editing\r\n      this.imagePreview = question.image_url || '';\r\n\r\n      if (question.type === 'Multiple Choice') {\r\n        this.questionData.answer = (question.correctOption && question.correctOption.option_text) || ''; this.questionData.answerChoices = question.incorrectOptions.map(opt => opt.option_text).join(', ');\r\n        this.oldMCOptionIds = [];\r\n        if (question.correctOption && question.correctOption.option_id) {\r\n          this.oldMCOptionIds.push(question.correctOption.option_id);\r\n        }\r\n        if (Array.isArray(question.incorrectOptions)) {\r\n          question.incorrectOptions.forEach(opt => {\r\n            if (opt.option_id) this.oldMCOptionIds.push(opt.option_id);\r\n          });\r\n        }\r\n      } else if (question.type === 'Matching') {\r\n        this.matchingPairs = question.pairs.map(pair => ({\r\n          term: pair.term,\r\n          definition: pair.definition\r\n        }));\r\n      }\r\n\r\n      this.showForm = true;\r\n    },\r\n\r\n    async deleteQuestion(id) {\r\n      if (confirm('Are you sure you want to delete this question?')) {\r\n        try {\r\n          await api.delete(`/questions/${id}`, {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem('token')}`\r\n            }\r\n          });\r\n          this.questions = this.questions.filter(q => q.id !== id);\r\n          //alert('Question deleted.');\r\n        } catch (err) {\r\n          console.error(err);\r\n          alert('Failed to delete question.');\r\n        }\r\n      }\r\n    },\r\n\r\n    async createCopyInstead() {\r\n      try {\r\n        const res = await api.post(`/questions/${this.editingQuestionId}/copy_to_textbook`, {\r\n          textbook_id: this.textbookId\r\n        }, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        alert('A copy of the question was created. You can now edit it.');\r\n        this.editBlockedPopup = false;\r\n        this.fetchQuestions(this.selectedQuestionType); // reload with new question included\r\n      } catch (err) {\r\n        console.error('Failed to create copy:', err);\r\n        alert('Failed to create a copy of this question.');\r\n      }\r\n    }\r\n\r\n  },\r\n  mounted() {\r\n    this.textbookTitle = this.$route.query.title || 'Book Title';\r\n    this.textbookId = this.$route.query.textbook_id || '';\r\n    if (this.textbookId) {\r\n      this.fetchTestBanks();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import '../assets/publisher_styles.css';\r\n</style>\r\n","import { render } from \"./PubQuestions.vue?vue&type=template&id=3e943274&scoped=true\"\nimport script from \"./PubQuestions.vue?vue&type=script&lang=js\"\nexport * from \"./PubQuestions.vue?vue&type=script&lang=js\"\n\nimport \"./PubQuestions.vue?vue&type=style&index=0&id=3e943274&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3e943274\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"theme-publisher\">\r\n    <div class=\"top-banner\">\r\n      <div class=\"banner-title\">Draft Pool: {{ selectedTestBank }}</div>\r\n      <div class=\"banner-actions\">\r\n        <router-link to=\"/PubHome\" class=\"p_banner-btn\">Home</router-link>\r\n        <router-link to=\"/\" class=\"p_banner-btn\">Log Out</router-link>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"page-wrapper\">\r\n      <router-link :to=\"{\r\n        path: '/PubViewTB',\r\n        query: {\r\n          name: selectedTestBank,\r\n          textbook_id: textbookId,\r\n          testbank_id: $route.query.testbank_id,  //  Add this!\r\n          title: $route.query.title\r\n        }\r\n      }\">\r\n        <button class=\"p_button\">Return to Draft Pools</button>\r\n      </router-link>\r\n\r\n\r\n      <hr />\r\n\r\n      <div id=\"feedbackContainer\">\r\n        <p v-if=\"loading\">Loading feedback...</p>\r\n        <p v-else-if=\"feedbackList.length === 0\">No questions in this draft pool have feedback yet.</p>\r\n\r\n        <div v-else>\r\n          <div v-for=\"(entry, index) in feedbackList\" :key=\"index\"\r\n            :class=\"['p_question-box', { selected: selectedQuestionId === entry.question_id }]\"\r\n            @click=\"toggleQuestionSelection(entry.question_id)\">\r\n            <strong>Question {{ index + 1 }}:</strong> {{ entry.question_text }}\r\n\r\n            <!-- Always show feedback -->\r\n            <div v-if=\"entry.feedback && entry.feedback.length\" class=\"feedback-section\">\r\n              <p><strong>Feedback:</strong></p>\r\n              \r\n              <ul>\r\n                <li v-for=\"(fb, i) in entry.feedback\" :key=\"i\">\r\n                  \"{{ fb.comment }}\"  <em>{{ fb.username }} ({{ fb.role }})</em>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n            <div v-else>\r\n              <p>No feedback yet.</p>\r\n            </div>\r\n\r\n            <!--  Button shows only if question is selected -->\r\n            <div v-if=\"selectedQuestionId === entry.question_id\" class=\"p_button-group\">\r\n              <button @click.stop=\"openFeedbackForm(entry.question_id)\">Leave Feedback</button>\r\n            </div>\r\n          </div>\r\n\r\n          <!--  Feedback popup -->\r\n          <div v-if=\"showFeedbackForm\" class=\"popup-overlay\">\r\n            <div class=\"form-popup-modal\">\r\n              <h2>Leave Feedback</h2>\r\n              <textarea v-model=\"feedbackText\" rows=\"5\" placeholder=\"Enter your comment here...\"></textarea>\r\n              <br /><br />\r\n              <button class=\"btn\" @click=\"submitFeedback\">Submit</button>\r\n              <button class=\"btn cancel\" @click=\"closeFeedbackForm\">Cancel</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api';\r\n\r\nexport default {\r\n  name: 'PubViewFeedback',\r\n  data() {\r\n    return {\r\n      testbankId: null,\r\n      textbookId: this.$route.query.textbook_id || null,\r\n      selectedTestBank: '',\r\n      feedbackList: [],\r\n      loading: true,\r\n      userRole: '',\r\n      selectedQuestionId: null,\r\n      showFeedbackForm: false,\r\n      selectedQuestionIdForFeedback: null,\r\n      feedbackText: ''\r\n    };\r\n  },\r\n  async mounted() {\r\n    const query = this.$route.query;\r\n    this.testbankId = parseInt(query.testbank_id);\r\n    this.selectedTestBank = query.title || 'No Draft Pool Selected';\r\n\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      const payload = JSON.parse(atob(token.split('.')[1]));\r\n      this.userRole = payload.role;\r\n    }\r\n\r\n    this.fetchFeedbackByTestbank();\r\n  },\r\n  methods: {\r\n    async fetchFeedbackByTestbank() {\r\n      try {\r\n        const res = await api.get(`/feedback/${this.testbankId}/questions-with-feedback`);\r\n        this.feedbackList = res.data;\r\n        console.log('Feedback loaded:', this.feedbackList);\r\n      } catch (err) {\r\n        console.error('Error loading feedback:', err);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    toggleQuestionSelection(questionId) {\r\n      this.selectedQuestionId = this.selectedQuestionId === questionId ? null : questionId;\r\n    },\r\n\r\n    openFeedbackForm(questionId) {\r\n      this.selectedQuestionIdForFeedback = questionId;\r\n      this.feedbackText = '';\r\n      this.showFeedbackForm = true;\r\n    },\r\n\r\n    closeFeedbackForm() {\r\n      this.selectedQuestionIdForFeedback = null;\r\n      this.feedbackText = '';\r\n      this.showFeedbackForm = false;\r\n    },\r\n\r\n    async submitFeedback() {\r\n      try {\r\n        await api.post('/feedback/create', {\r\n          question_id: this.selectedQuestionIdForFeedback,\r\n          comment_field: this.feedbackText\r\n        }, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        this.closeFeedbackForm();\r\n\r\n        const entry = this.feedbackList.find(q => q.question_id === this.selectedQuestionIdForFeedback);\r\n        if (entry) {\r\n          if (!entry.feedback) entry.feedback = [];\r\n          entry.feedback.push({\r\n            comment: this.feedbackText,\r\n            username: 'You',\r\n            role: this.userRole\r\n          });\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Error submitting feedback:', error);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n@import '../assets/publisher_styles.css';\r\n</style>\r\n","import { render } from \"./PubViewFeedback.vue?vue&type=template&id=50d05966&scoped=true\"\nimport script from \"./PubViewFeedback.vue?vue&type=script&lang=js\"\nexport * from \"./PubViewFeedback.vue?vue&type=script&lang=js\"\n\nimport \"./PubViewFeedback.vue?vue&type=style&index=0&id=50d05966&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-50d05966\"]])\n\nexport default __exports__","<!-- filepath: c:\\Users\\laure\\Senior-Project\\TestCreationVue\\my-vue-app\\src\\components\\PubViewTB.vue -->\r\n<template>\r\n  <div class=\"theme-publisher\">\r\n    <div class=\"top-banner\">\r\n      <div class=\"banner-title\">Draft Pool: {{ selectedTestBank }}</div>\r\n\r\n      <div class=\"banner-actions\">\r\n        <router-link to=\"/PubHome\" class=\"p_banner-btn\">Home</router-link>\r\n        <router-link to=\"/\" class=\"p_banner-btn\">Log Out</router-link>\r\n      </div>\r\n    </div>\r\n    <div class=\"page-wrapper\">\r\n      <div class=\"button-row\">\r\n        <!-- Edit Test Bank Info Button -->\r\n        <button class=\"p_button\" @click=\"showEditForm = true\">Edit Draft Pool Info</button>\r\n\r\n        <router-link :to=\"{ path: '/PubQuestions', query: { title: textbookTitle, textbook_id: textbookId } }\">\r\n          <button class=\"p_button\">Return to Question Page</button>\r\n        </router-link>\r\n\r\n        <router-link\r\n          :to=\"{ name: 'PubViewFeedback', query: { testbank_id: selectedTestBankId, title: selectedTestBank, textbook_id: textbookId } }\">\r\n          <button class=\"p_button\">View Feedback</button>\r\n        </router-link>\r\n\r\n        <button class=\"p_button\" @click=\"publishTestbank\" :disabled=\"published\">\r\n          {{ published ? \"Draft Pool Published\" : \"Publish Draft Pool\" }}\r\n        </button>\r\n        <button class=\"p_button delete\" v-if=\"!published\" @click=\"deleteTestBank\">\r\n          Delete Draft Pool\r\n        </button>\r\n      </div>\r\n      <!-- Modal Popup -->\r\n      <div class=\"popup-overlay\" v-if=\"showEditForm\">\r\n        <div class=\"form-popup-modal\">\r\n          <form class=\"form-container\" @submit.prevent=\"updateTestBank\">\r\n            <label><strong>Draft Pool Name:</strong></label>\r\n            <input type=\"text\" v-model=\"editForm.name\" required />\r\n\r\n            <label><strong>Chapter Number:</strong></label>\r\n            <input type=\"text\" v-model=\"editForm.chapter\" required />\r\n\r\n            <label><strong>Section Number:</strong></label>\r\n            <input type=\"text\" v-model=\"editForm.section\" required />\r\n\r\n            <button type=\"submit\" class=\"btn\">Save Changes</button>\r\n            <button type=\"button\" class=\"btn cancel\" @click=\"showEditForm = false\">Cancel</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n      <div v-if=\"published\" class=\"publish-warning\">\r\n        <strong>Note:</strong> This draft pool has been published. Question details can no longer be\r\n        edited or removed. The draft pool cannot be deleted or modified.\r\n      </div>\r\n      <hr>\r\n      <br>\r\n      <!--Test bank questions will be generated here-->\r\n      <div id=\"questionsContainer\">\r\n        <p v-for=\"question in selectedQuestions\" :key=\"question\">{{ question }}</p>\r\n      </div>\r\n\r\n      <!-- Insert the fetched questions display here -->\r\n      <ul>\r\n        <li v-for=\"(question, index) in questions\" :key=\"index\" class=\"p_question-box\"\r\n          :class=\"{ 'selected': selectedQuestionId === question.id }\" @click=\"toggleQuestionSelection(question.id)\">\r\n          <strong>Question {{ index + 1 }}:</strong> {{ question.text }}<br>\r\n          <span><strong>Type:</strong> {{ question.type }}</span><br>\r\n          <span><strong>Chapter:</strong> {{ question.chapter || 'N/A' }}</span><br>\r\n          <span><strong>Section:</strong> {{ question.section || 'N/A' }}</span><br>\r\n          <span><strong>Points:</strong> {{ question.points }}</span><br>\r\n          <span><strong>Estimated Time:</strong> {{ question.time }} minutes</span><br>\r\n\r\n          <!-- Answer types -->\r\n          <div v-if=\"question.type === 'True/False'\">\r\n            <strong>Answer:</strong> {{ question.answer ? 'True' : 'False' }}\r\n          </div>\r\n\r\n          <div v-if=\"question.type === 'Multiple Choice'\">\r\n            <strong>Correct Answer:</strong> {{ (question.correctOption && question.correctOption.option_text) ||\r\n              'Not specified' }}<br>\r\n            <p><strong>Other Options:</strong></p>\r\n            <ul>\r\n              <li v-for=\"(option, i) in question.incorrectOptions\" :key=\"i\" class=\"incorrect-answer\">\r\n                {{ option.option_text }}\r\n              </li>\r\n            </ul>\r\n          </div>\r\n\r\n          <!-- <div v-if=\"question.type === 'Short Answer'\">\r\n            <strong>Answer:</strong> {{ question.answer || 'Not provided' }}\r\n          </div> -->\r\n\r\n          <div v-if=\"question.type === 'Fill in the Blank'\">\r\n            <strong>Correct Answer(s):</strong>\r\n            <ul>\r\n              <li v-for=\"(blank, i) in question.blanks\" :key=\"i\">{{ blank.correct_text }}</li>\r\n            </ul>\r\n          </div>\r\n\r\n          <div v-if=\"question.type === 'Matching'\">\r\n            <strong>Pairs:</strong>\r\n            <ul>\r\n              <li v-for=\"(pair, i) in question.pairs\" :key=\"i\">{{ pair.term }} - {{ pair.definition }}</li>\r\n            </ul>\r\n          </div>\r\n\r\n          <!-- <div v-if=\"question.type === 'Essay'\">\r\n            <strong>Essay Instructions:</strong> {{ question.instructions || 'None' }}\r\n          </div> -->\r\n\r\n          <!-- <div v-if=\"question.attachment\">\r\n            <p><strong>Attached Image:</strong></p>\r\n            <img :src=\"question.attachment\" alt=\"Question Attachment:\"\r\n              style=\"max-width: 100%; max-height: 400px; margin-bottom: 10px;\" />\r\n          </div> -->\r\n\r\n          <span><strong>Grading Instructions:</strong> {{ question.instructions || 'None' }}</span><br>\r\n\r\n          <div v-if=\"question.attachment && question.attachment.url\">\r\n            <strong>Attachment:</strong><br />\r\n            <div v-if=\"question.attachment.name.match(/\\.(jpg|jpeg|png|gif)$/i)\">\r\n              <img :src=\"question.attachment.url\" alt=\"Attachment\" style=\"max-width: 250px; margin-top: 10px;\" />\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Buttons shown only if selected -->\r\n          <div v-if=\"selectedQuestionId === question.id && !published\" class=\"p_button-group\">\r\n            <button @click.stop=\"removeQuestionFromTestBank(question.id)\" :disabled=\"published\"\r\n              :title=\"published ? 'Published  cannot remove question' : 'Remove from Draft Pool'\">\r\n              {{ published ? \"Published - Cannot Remove\" : \"Remove from Draft Pool\" }}\r\n            </button>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n\r\n      <!--file input element -->\r\n      <input type=\"file\" id=\"fileInput\" style=\"display: none;\" @change=\"handleFileUpload\">\r\n\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api';\r\n\r\nexport default {\r\n  name: 'PublisherViewTB',\r\n  data() {\r\n    return {\r\n      showPopup: false,\r\n      showEditForm: false,\r\n      textbookTitle: this.$route.query.title || 'Book Title',\r\n      textbookId: this.$route.query.textbook_id || '',\r\n      selectedTestBank: this.$route.query.name || 'No Draft Pool Selected',\r\n      selectedTestBankId: this.$route.query.testbank_id || this.$route.params.testbank_id || null,\r\n      //textbookId: this.$route.query.textbook_id || null,\r\n      //textbookTitle: this.$route.query.title || null,\r\n      selectedQuestionId: null,\r\n      published: false,\r\n      questions: [],\r\n      editForm: {\r\n        name: this.$route.query.name || '',\r\n        chapter: this.$route.query.chapter || '',\r\n        section: this.$route.query.section || ''\r\n      }\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    selectedQuestions() {\r\n      return this.questions[this.selectedTestBank] || [];\r\n    }\r\n  },\r\n\r\n  async mounted() {\r\n    await this.checkPublishedStatus();\r\n    await this.loadQuestions();\r\n  },\r\n\r\n  methods: {\r\n    selectTestBank(testBank) {\r\n      this.selectedTestBank = testBank;\r\n    },\r\n    edit() {\r\n      this.showPopup = true;\r\n    },\r\n    closeForm() {\r\n      this.showPopup = false;\r\n      this.showEditForm = false;\r\n    },\r\n    async updateTestBank() {\r\n      try {\r\n        await api.put(`/testbanks/publisher/${this.selectedTestBankId}`, {\r\n          name: this.editForm.name,\r\n          chapter_number: this.editForm.chapter,\r\n          section_number: this.editForm.section\r\n        }, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        this.selectedTestBank = this.editForm.name;\r\n        this.showEditForm = false;\r\n      } catch (err) {\r\n        console.error('Error updating test bank:', err);\r\n      }\r\n    },\r\n\r\n    // ... your existing methods ...\r\n    async loadQuestions() {\r\n      if (this.selectedTestBankId) {\r\n        try {\r\n          const questionsRes = await api.get(`/testbanks/publisher/${this.selectedTestBankId}/questions`, {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem('token')}`\r\n            }\r\n          });\r\n\r\n          const rawQuestions = questionsRes.data.questions || [];\r\n\r\n          //  Transform each question into full display shape\r\n          this.questions = rawQuestions.map((q) => {\r\n            const base = {\r\n              id: q.id,\r\n              text: q.question_text,\r\n              type: q.type,\r\n              chapter: q.chapter_number || 'N/A',\r\n              section: q.section_number || 'N/A',\r\n              points: q.default_points || 'N/A',\r\n              time: q.est_time || 'N/A',\r\n              instructions: q.grading_instructions || 'None',\r\n              attachment: q.attachment || null\r\n            };\r\n\r\n            switch (q.type) {\r\n              case 'True/False':\r\n                return { ...base, answer: q.true_false_answer };\r\n              case 'Multiple Choice':\r\n                return {\r\n                  ...base,\r\n                  correctOption: q.correct_option || null,\r\n                  incorrectOptions: q.incorrect_options || []\r\n                };\r\n              case 'Matching':\r\n                return {\r\n                  ...base,\r\n                  pairs: (q.matches || []).map(pair => ({\r\n                    term: pair.prompt_text,\r\n                    definition: pair.match_text\r\n                  }))\r\n                };\r\n              case 'Fill in the Blank':\r\n                return {\r\n                  ...base,\r\n                  blanks: q.blanks || []\r\n                };\r\n              case 'Short Answer':\r\n                return {\r\n                  ...base,\r\n                  answer: q.answer || ''\r\n                };\r\n              case 'Essay':\r\n                return base;\r\n              default:\r\n                return base;\r\n            }\r\n          });\r\n\r\n        } catch (error) {\r\n          console.error('Error loading test bank questions:', error);\r\n        }\r\n      }\r\n    },\r\n\r\n    toggleQuestionSelection(id) {\r\n      if (this.selectedQuestionId === id) {\r\n        this.selectedQuestionId = null; // Deselect if already selected\r\n      } else {\r\n        this.selectedQuestionId = id; // Select the clicked question\r\n      }\r\n    },\r\n    async removeQuestionFromTestBank(questionId) {\r\n\r\n      if (!confirm('Are you sure you want to remove this question from the Draft Pool?')) return;\r\n\r\n      try {\r\n        //  Force the DELETE to use the publisher-specific version\r\n        await api.delete(`/testbanks/${this.selectedTestBankId}/questions/${questionId}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        this.questions = this.questions.filter(q => q.id !== questionId);\r\n        this.selectedQuestionId = null;\r\n      } catch (err) {\r\n        console.error('Error removing question:', err);\r\n      }\r\n    },\r\n    async publishTestbank() {\r\n      if (!this.selectedTestBankId) return;\r\n\r\n      try {\r\n        const response = await api.post(`/testbanks/${this.selectedTestBankId}/publish`, {}, {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n        });\r\n\r\n        this.published = true;\r\n      } catch (error) {\r\n        console.error(\"Error publishing test bank:\", error);\r\n      }\r\n    },\r\n    async deleteTestBank() {\r\n      if (this.published) {\r\n        return;\r\n      }\r\n\r\n      if (!confirm('Are you sure you want to delete this entire draft pool? This action cannot be undone.')) return;\r\n\r\n      try {\r\n        await api.delete(`/testbanks/${this.selectedTestBankId}`, {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n        });\r\n\r\n        this.$router.push({\r\n          path: '/PubQuestions',\r\n          query: {\r\n            title: this.textbookTitle,\r\n            textbook_id: this.textbookId\r\n          }\r\n        });\r\n      } catch (err) {\r\n        console.error('Error deleting draft pool:', err);\r\n      }\r\n    },\r\n    async checkPublishedStatus() {\r\n      try {\r\n        const res = await api.get('/testbanks/publisher', {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\r\n          params: { textbook_id: this.textbookId }\r\n        });\r\n\r\n        const testbanks = res.data.testbanks || [];\r\n        const found = testbanks.find(tb => tb.testbank_id == this.selectedTestBankId);\r\n\r\n        if (found) {\r\n          this.published = found.is_published === true;\r\n        } else {\r\n          console.warn(\"Testbank not found in returned list\");\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch testbank status:\", err);\r\n      }\r\n    }\r\n\r\n\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import '../assets/publisher_styles.css';\r\n\r\nul {\r\n  list-style-type: none;\r\n  padding-left: 0;\r\n}\r\n</style>","import { render } from \"./PubViewTB.vue?vue&type=template&id=0dcbdc32&scoped=true\"\nimport script from \"./PubViewTB.vue?vue&type=script&lang=js\"\nexport * from \"./PubViewTB.vue?vue&type=script&lang=js\"\n\nimport \"./PubViewTB.vue?vue&type=style&index=0&id=0dcbdc32&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0dcbdc32\"]])\n\nexport default __exports__","<!-- filepath: /c:/Users/laure/Senior-Project/TestCreationVue/src/components/TeacherHome.vue -->\r\n<template>\r\n  <div class=\"theme-teacher\">\r\n    <div class=\"top-banner\">\r\n      <div class=\"banner-title\">Course Selection</div>\r\n\r\n      <div class=\"t_banner-actions\">\r\n        <router-link to=\"/\" class=\"t_banner-btn\">Log Out</router-link>\r\n      </div>\r\n    </div>\r\n    <div class=\"center large-paragraph\" style=\"color:#222\">\r\n      <div class=\"page-wrapper\">\r\n        Download all your question data: \r\n        <div class=\"button-row\">\r\n          <button class=\"t_button\">Download Questions</button>\r\n        </div>\r\n\r\n\r\n        Please select or create a course:\r\n\r\n        <div class=\"button-row\">\r\n          <!-- Conditionally render the dropdown or the no courses message -->\r\n          <div class=\"t_dropdown\" v-if=\"courses.length\">\r\n            <button class=\"t_dropbtn\">Select Course</button>\r\n            <div class=\"t_dropdown-content\">\r\n              <!-- Display all course titles in the dropdown -->\r\n              <a v-for=\"course in courses\" :key=\"course.id\" @click=\"selectCourse(course)\">\r\n                {{ course.title }}\r\n              </a>\r\n            </div>\r\n          </div>\r\n          <div v-else>\r\n            No courses available.\r\n          </div>\r\n          <!-- Button to create a new course will always be shown -->\r\n          <router-link to=\"TeacherNewClass\">\r\n            <button class=\"t_button\">Create New Course</button>\r\n          </router-link>\r\n        </div>\r\n\r\n        <!-- Test Options Section -->\r\n        <div class=\"center large-paragraph\" style=\"color:#222\">\r\n          Test Options:\r\n          <div class=\"button-row\">\r\n            <button class=\"t_button\" @click=\"viewPreviousTests\">View Previous Tests</button>\r\n            <button class=\"t_button\" @click=\"chooseTestToPublish\">Choose Test to Publish</button>\r\n          </div>\r\n\r\n        </div>\r\n\r\n\r\n\r\n        <!-- Finalized Test Popup -->\r\n        <div class=\"popup-overlay\" v-if=\"showPopup\">\r\n          <div class=\"form-popup-modal\">\r\n            <form class=\"form-container\">\r\n              Your Finalized Tests\r\n              <ul style=\"list-style-type: none; padding-left: 0;\">\r\n                <li v-for=\"test in testFiles\" :key=\"test.test_id\">\r\n                  <button v-if=\"test.download_url && test.hasAnswerKey\" class=\"t_button\"\r\n                    @click.prevent=\"downloadTestAndKey(test)\">\r\n                    {{ test.name }}\r\n                  </button>\r\n                </li>\r\n              </ul>\r\n              <button type=\"button\" class=\"btn cancel\" @click=\"showPopup = false\">Close</button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n\r\n\r\n        <!-- Choose Test to Publish Popup -->\r\n        <div class=\"popup-overlay\" v-if=\"showPublishSelector\">\r\n          <div class=\"form-popup-modal\">\r\n            <form class=\"form-container\" @submit.prevent=\"publishSelectedTest\" style=\"font-size: 16px;\">\r\n              <h1 style=\"align-items: center;\"> Choose a Finalized Test to Publish:</h1>\r\n              <strong>Note:</strong> Any questions on tests that are published can no longer be edited or deleted.\r\n              <br><br>\r\n              <ul style=\"list-style-type: none; padding-left: 0;\">\r\n                <li v-for=\"test in testFiles\" :key=\"test.test_id\" style=\"margin-bottom: 8px;\">\r\n                  <label style=\"display: flex; align-items: center;\">\r\n                    <input type=\"radio\" v-model=\"selectedTestIdToPublish\" :value=\"test.test_id\"\r\n                      style=\"margin-right: 10px;\" />\r\n                    {{ test.name }}\r\n                  </label>\r\n                </li>\r\n              </ul>\r\n\r\n              <div style=\"display: flex; justify-content: center; gap: 10px; margin-top: 20px;\">\r\n                <button type=\"submit\" class=\"btn\">Confirm Publish</button>\r\n                <button type=\"button\" class=\"btn cancel\" @click=\"showPublishSelector = false\">Cancel</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n\r\n\r\n\r\n      </div>\r\n    </div>\r\n    <br>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport api from '@/api'; // <-- your custom Axios instance with token handling\r\nimport jwtDecode from 'jwt-decode';\r\nexport default {\r\n  name: 'TeacherHome',\r\n  data() {\r\n    return {\r\n      courses: [],\r\n      error: null,\r\n      testFiles: [],\r\n      showPopup: false,\r\n      showPublishSelector: false,\r\n      selectedTestIdToPublish: null\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchCourses();\r\n  },\r\n  methods: {\r\n    // fetch courses from the database\r\n    async fetchCourses() {\r\n      try {\r\n        console.log('Fetching courses...'); // Debugging\r\n\r\n        const response = await api.get('/courses', {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        console.log('Courses fetched:', response.data); // Debugging\r\n        if (Array.isArray(response.data)) {\r\n          this.courses = response.data.map(course => ({\r\n            id: course.course_id,\r\n            title: course.course_name,\r\n            textbook_id: course.textbook_id\r\n          }));\r\n        } else {\r\n          this.error = 'Failed to fetch course data.';\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching course:', error);\r\n\r\n        // Check if error has a response from the backend\r\n        if (error.response) {\r\n          this.error = error.response.data.error || error.response.statusText;\r\n        } else {\r\n          this.error = 'Network error or server is not responding.';\r\n        }\r\n      }\r\n    },\r\n    // Handle course selection\r\n    selectCourse(course) {\r\n      // Navigate to the TeacherQuestions page with the selected course's ID and title\r\n      this.$router.push({\r\n        name: 'TeacherQuestions',\r\n        query: {\r\n          courseId: course.id,\r\n          courseTitle: course.title,\r\n          textbook_id: course.textbook_id\r\n        }\r\n      });\r\n    },\r\n\r\n\r\n    async viewPreviousTests() {\r\n      try {\r\n        const response = await api.get('/tests/final', {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        const tests = response.data.final_tests || [];\r\n\r\n        const enrichedTests = await Promise.all(tests.map(async test => {\r\n          try {\r\n            const keyRes = await api.get(`/tests/${test.test_id}/answer_key`, {\r\n              headers: {\r\n                Authorization: `Bearer ${localStorage.getItem('token')}`\r\n              }\r\n            });\r\n            test.hasAnswerKey = !!(keyRes.data && keyRes.data.file_url);\r\n          } catch {\r\n            test.hasAnswerKey = false;\r\n          }\r\n          return test;\r\n        }));\r\n\r\n        this.testFiles = enrichedTests;\r\n        this.showPopup = true;\r\n      } catch (err) {\r\n        console.error('Failed to fetch final tests:', err);\r\n        alert('Could not load previous tests.');\r\n      }\r\n    },\r\n\r\n    async downloadTestAndKey(test) {\r\n      if (!test.download_url) {\r\n        alert('Test file not available for download.');\r\n        return;\r\n      }\r\n\r\n      const testLink = document.createElement('a');\r\n      testLink.href = test.download_url;\r\n      testLink.download = '';\r\n      document.body.appendChild(testLink);\r\n      testLink.click();\r\n      document.body.removeChild(testLink);\r\n\r\n      try {\r\n        const response = await api.get(`/tests/${test.test_id}/answer_key`, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        if (response.data.file_url) {\r\n          const keyLink = document.createElement('a');\r\n          keyLink.href = response.data.file_url;\r\n          keyLink.download = '';\r\n          document.body.appendChild(keyLink);\r\n          keyLink.click();\r\n          document.body.removeChild(keyLink);\r\n        }\r\n      } catch (err) {\r\n        console.warn(`Failed to download answer key for test ${test.test_id}:`, err);\r\n      }\r\n    },\r\n\r\n    async chooseTestToPublish() {\r\n      try {\r\n        const response = await api.get('/tests/final', {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        this.testFiles = response.data.final_tests || [];\r\n        this.selectedTestIdToPublish = null;\r\n        this.showPublishSelector = true;\r\n      } catch (err) {\r\n        console.error(\"Failed to load final tests for publishing:\", err);\r\n        alert(\"Could not load test list.\");\r\n      }\r\n    },\r\n\r\n    async publishSelectedTest() {\r\n      if (!this.selectedTestIdToPublish) {\r\n        alert(\"Please select a test to publish.\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        await api.post(`/tests/${this.selectedTestIdToPublish}/publish`, {}, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        //alert(\" Test successfully published!\");\r\n        this.showPublishSelector = false;\r\n      } catch (err) {\r\n        console.error(\" Publish failed:\", (err.response && err.response.data) || err.message);\r\n        alert(\"Failed to publish the selected test.\");\r\n      }\r\n    }\r\n  },\r\n\r\n\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import '../assets/teacher_styles.css';\r\n</style>","import { render } from \"./TeacherHome.vue?vue&type=template&id=d53dde1e&scoped=true\"\nimport script from \"./TeacherHome.vue?vue&type=script&lang=js\"\nexport * from \"./TeacherHome.vue?vue&type=script&lang=js\"\n\nimport \"./TeacherHome.vue?vue&type=style&index=0&id=d53dde1e&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d53dde1e\"]])\n\nexport default __exports__","<!-- filepath: /c:/Users/laure/Senior-Project/TestCreationVue/src/components/TeacherLog.vue -->\r\n\r\n<template>\r\n  <div class=\"theme-teacher\">\r\n    <div class=\"top-banner\">\r\n      <div class=\"banner-title\">Teacher Login</div>\r\n    </div>\r\n\r\n    <div class=\"center large-paragraph\" style=\"color: #222\">\r\n      Please enter your teacher username and password:\r\n      <br />\r\n      <br />\r\n      <form @submit.prevent=\"submitForm\">\r\n        <!-- create username text box-->\r\n        <label for=\"uname\">Username:</label><br />\r\n        <input type=\"text\" id=\"uname\" v-model=\"username\" /><br />\r\n        <br />\r\n        <!-- create password textbox-->\r\n        <label for=\"pass\">Password:</label><br />\r\n        <input type=\"password\" id=\"pass\" v-model=\"password\" /><br /><br />\r\n        <!-- submit button, when pressed it takes user to url specified-->\r\n        <input type=\"submit\" value=\"Submit\" :disabled=\"loading\" />\r\n      </form>\r\n\r\n      <!-- Show error message if user and password are entered incorrectly -->\r\n      <div v-if=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</div>\r\n\r\n      <!-- Show loading spinner if the form is submitting -->\r\n      <div v-if=\"loading\" class=\"loading-message\">Logging in...</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api'; // <-- your custom Axios instance with token handling\r\nimport { default as jwtDecode } from 'jwt-decode';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      username: '',\r\n      password: '',\r\n      errorMessage: '',\r\n      loading: false\r\n    };\r\n  },\r\n  mounted() {\r\n    // Optional: Check if token exists and redirect if still valid\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      try {\r\n        const decoded = jwtDecode(token);\r\n        const currentTime = Date.now() / 1000;\r\n        console.log('Decoded token:', decoded);\r\n\r\n\r\n        if (decoded.exp > currentTime && decoded.role === 'teacher') {\r\n          this.$router.push('/TeacherHome');\r\n        }\r\n      } catch (error) {\r\n        console.error('Invalid token', error);\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async submitForm() {\r\n      if (!this.username || !this.password) {\r\n        this.errorMessage = \"Please enter both username and password.\";\r\n        return;\r\n      }\r\n\r\n      if (this.username.trim().length < 3 || this.password.trim().length < 6) {\r\n        this.errorMessage = \"Username must be at least 3 characters and password at least 6 characters.\";\r\n        return;\r\n      }\r\n\r\n      this.loading = true;\r\n      this.errorMessage = \"\";\r\n\r\n      try {\r\n        const res = await api.post('/auth/login', {\r\n          username: this.username.toLowerCase(),\r\n          password: this.password\r\n        });\r\n\r\n        const { token, user_id, role } = res.data;\r\n\r\n        // Store token and identity in localStorage\r\n        localStorage.setItem('token', token);\r\n        localStorage.setItem('user_id', user_id);\r\n        localStorage.setItem('role', role);\r\n\r\n        // Redirect based on role\r\n        if (role === 'teacher') {\r\n          this.$router.push('/TeacherHome');\r\n        } else {\r\n          this.errorMessage = \"Only teachers can log in here.\";\r\n          localStorage.clear(); // Clear stored data for non-teachers\r\n        }\r\n      } catch (error) {\r\n        if (!error.response) {\r\n          this.errorMessage = \"Network error. Please check your connection.\";\r\n        } else if (error.response.status === 401) {\r\n          this.errorMessage = \"Invalid username or password.\";\r\n        } else {\r\n          this.errorMessage = (error.response && error.response.data && error.response.data.message) || \"An error occurred during login.\";\r\n        }\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n@import '../assets/teacher_styles.css';\r\n\r\n.teacher-log-container {\r\n  background-color: #43215a;\r\n  font-family: Arial, sans-serif;\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.error-message {\r\n  color: rgb(174, 38, 38);\r\n  margin-top: 10px;\r\n}\r\n\r\n.loading-message {\r\n  color: #ffffff;\r\n  margin-top: 10px;\r\n}\r\n.center {\r\n  text-align: center;\r\n}\r\n\r\n.large-heading {\r\n  font-size: 2em;\r\n}\r\n\r\n.large-paragraph {\r\n  font-size: 1.2em;\r\n}\r\n</style>\r\n","import { render } from \"./TeacherLog.vue?vue&type=template&id=29f43bdf&scoped=true\"\nimport script from \"./TeacherLog.vue?vue&type=script&lang=js\"\nexport * from \"./TeacherLog.vue?vue&type=script&lang=js\"\n\nimport \"./TeacherLog.vue?vue&type=style&index=0&id=29f43bdf&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-29f43bdf\"]])\n\nexport default __exports__","<!-- filepath: /c:/Users/laure/Senior-Project/TestCreationVue/src/components/TeacherNewClass.vue -->\r\n<template>\r\n  <div class=\"theme-teacher\">\r\n  <div class=\"top-banner\">\r\n  <div class=\"banner-title\">Create New Class</div>\r\n\r\n  <div class=\"t_banner-actions\">\r\n    <router-link to=\"/TeacherHome\" class=\"t_banner-btn\">Home</router-link>\r\n    <router-link to=\"/\" class=\"t_banner-btn\">Log Out</router-link>\r\n  </div>\r\n</div>\r\n    <div class=\"center large-paragraph\" style = \"color:#222\">\r\n      <!-- form that redirects after clicking save -->\r\n      <form @submit.prevent=\"saveCourse\">\r\n        <label for=\"courseTitle\">Course Title:</label>\r\n        <input type=\"text\" id=\"courseTitle\" v-model=\"courseTitle\" style=\"height:20px\"><br>\r\n\r\n        <label for=\"courseNumber\">Course Number:</label>\r\n        <input type=\"text\" id=\"courseNumber\" v-model=\"courseNumber\" style=\"height:20px\"><br>\r\n\r\n        <label for=\"textbookTitle\">Textbook Title:</label>\r\n        <select id=\"textbookTitle\" v-model=\"selectedTextbookId\" style=\"height:50px; width:200px\" required>\r\n          <option v-for=\"textbook in textbooks\" :key=\"textbook.id\" :value=\"textbook.id\">\r\n            {{ textbook.title }}\r\n          </option>\r\n        </select>\r\n        <div v-if=\"!textbooks.length\" style=\"color: red; margin-top: 10px;\">\r\n          No textbooks available.\r\n        </div><br>\r\n\r\n        <div class=\"center large-heading\">\r\n          <input type=\"submit\" value=\"Save\">\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api';\r\n\r\nexport default {\r\n  name: 'TeacherNewClass',\r\n  data() {\r\n    return {\r\n      courseTitle: '',\r\n      courseNumber: '',\r\n      selectedTextbookId: null, // Stores the selected textbook's ID\r\n      textbooks: [], // Array to store textbook data\r\n      error: null\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchTextbooks(); // Fetch textbooks when the component is created\r\n  },\r\n\r\n  methods: {\r\n    // Method to fetch textbooks from the database\r\n    async fetchTextbooks() {\r\n      try {\r\n        console.log('Fetching textbooks...'); // Debugging\r\n\r\n        const response = await api.get('/textbooks/all', {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        console.log('Textbooks fetched:', response.data); // Debugging\r\n\r\n        if (response.data && response.data.textbooks) {\r\n          this.textbooks = response.data.textbooks; // Populate the textbooks array\r\n        } else {\r\n          this.error = 'Failed to fetch textbooks data.';\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching textbooks:', error);\r\n\r\n        // Check if error has a response from the backend\r\n        if (error.response) {\r\n          this.error = `Error: ${error.response.status} - ${error.response.data.message || error.response.statusText}`;\r\n        } else {\r\n          this.error = 'Network error or server is not responding.';\r\n        }\r\n      }\r\n    },\r\n\r\n    // Method to select a textbook from the dropdown\r\n    selectTextbook(textbook) {\r\n      this.selectedTextbookId = textbook.id;\r\n      this.selectedTextbookTitle = textbook.title;\r\n    },\r\n\r\n    // Method to save the course to the database\r\n    async saveCourse() {\r\n      if (this.courseTitle && this.courseNumber && this.selectedTextbookId) {\r\n        const courseData = {\r\n          course_name: this.courseTitle,\r\n          course_number: this.courseNumber,\r\n          textbook_id: this.selectedTextbookId // Only send the textbook_id\r\n        };\r\n\r\n        try {\r\n          const response = await api.post('/courses', courseData, {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem('token')}`\r\n            }\r\n          });\r\n          console.log('Course saved successfully:', response.data);\r\n          this.$router.push({ path: '/TeacherHome' });\r\n        } catch (error) {\r\n          console.error('Error saving course:', error);\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import '../assets/teacher_styles.css';\r\n\r\nselect {\r\n  appearance: none;\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n\r\n  background-color: #e9dbf7; /* Light green, feel free to change */\r\n  border: 2px solid #cda9f1;\r\n  color: #222;\r\n  padding: 10px 14px;\r\n  font-size: 16px;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  transition: border-color 0.3s ease;\r\n  width: 250px;\r\n}\r\n\r\nselect:focus {\r\n  outline: none;\r\n  border-color: #cda9f1;\r\n}\r\n\r\nselect:hover {\r\n  border-color: #b985ec;\r\n}\r\n\r\n/* Optional: style the label to match */\r\nlabel {\r\n  font-weight: bold;\r\n  font-size: 20px;\r\n  margin-bottom: 8px;\r\n  display: block;\r\n}\r\n\r\n</style>","import { render } from \"./TeacherNewClass.vue?vue&type=template&id=37be9029&scoped=true\"\nimport script from \"./TeacherNewClass.vue?vue&type=script&lang=js\"\nexport * from \"./TeacherNewClass.vue?vue&type=script&lang=js\"\n\nimport \"./TeacherNewClass.vue?vue&type=style&index=0&id=37be9029&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-37be9029\"]])\n\nexport default __exports__","<!-- filepath: /c:/Users/laure/Senior-Project/TestCreationVue/src/components/TeacherNewTB.vue -->\r\n<template>\r\n  <div class=\"theme-teacher\">\r\n    <div class=\"top-banner\">\r\n      <div class=\"banner-title\">Create New Draft Pool</div>\r\n\r\n      <div class=\"t_banner-actions\">\r\n        <router-link to=\"/TeacherHome\" class=\"t_banner-btn\">Home</router-link>\r\n        <router-link to=\"/\" class=\"t_banner-btn\">Log Out</router-link>\r\n      </div>\r\n    </div>\r\n    <div class=\"center large-paragraph\" style=\"color:#222\">\r\n      <!-- This is the page where the teacher can create a new test bank-->\r\n      <form @submit.prevent=\"saveTestBank\">\r\n        <!-- create TB Name text box-->\r\n        <label for=\"bankName\">Name of Draft Pool:</label>\r\n        <input type=\"text\" id=\"bankName\" v-model=\"bankName\" style=\"height: 20px;\"><br>\r\n        <br>\r\n\r\n        <!-- create Chapter text box-->\r\n        <label for=\"bankCh\">Textbook Chapter:</label>\r\n        <input type=\"text\" id=\"bankCh\" v-model=\"bankChapter\" style=\"height: 20px;\"><br>\r\n        <br>\r\n\r\n        <!-- create section text box-->\r\n        <label for=\"bankSec\">Textbook Section:</label>\r\n        <input type=\"text\" id=\"bankSec\" v-model=\"bankSection\" style=\"height: 20px;\"><br>\r\n        <br>\r\n\r\n        <!-- submit button, when pressed it takes user to url specified-->\r\n        <input type=\"submit\" value=\"Submit\">\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api';\r\n\r\nexport default {\r\n  name: 'TeacherNewTB',\r\n  data() {\r\n    return {\r\n      courseId: this.$route.query.courseId || '',\r\n      courseTitle: this.$route.query.courseTitle || '',\r\n      bankName: '',\r\n      bankChapter: '',\r\n      bankSection: ''\r\n    };\r\n  },\r\n  methods: {\r\n    async saveTestBank() {\r\n      if (this.bankName && this.bankChapter && this.bankSection && this.courseId) {\r\n        const testBankData = {\r\n          testbank_name: this.bankName,\r\n          chapter_number: this.bankChapter,\r\n          section_number: this.bankSection,\r\n          course_id: this.courseId\r\n        };\r\n\r\n        try {\r\n          const response = await api.post('/testbanks/teacher', testBankData, {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem('token')}`\r\n            }\r\n          });\r\n          console.log('Test bank saved successfully:', response.data);\r\n          alert('Test bank saved successfully!');\r\n          this.$router.push({\r\n            path: '/TeacherQuestions',\r\n            query: {\r\n              courseTitle: this.$route.query.courseTitle,  // use what was passed in\r\n              courseId: this.courseId\r\n            }\r\n          });\r\n\r\n        } catch (error) {\r\n          console.error('Error saving test bank:', error);\r\n          alert('Failed to save the test bank. Please try again.');\r\n        }\r\n      } else {\r\n        alert('Please fill out all fields.');\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import '../assets/teacher_styles.css';\r\n\r\n.teacher-newTB-container {\r\n  background-color: #43215a;\r\n  font-family: Arial, sans-serif;\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\ninput[type=\"submit\"] {\r\n  background-color: rgb(84, 178, 150);\r\n  color: black;\r\n  font-size: 20px;\r\n  padding: 10px 20px;\r\n}\r\n</style>","import { render } from \"./TeacherNewTB.vue?vue&type=template&id=67b0bed1&scoped=true\"\nimport script from \"./TeacherNewTB.vue?vue&type=script&lang=js\"\nexport * from \"./TeacherNewTB.vue?vue&type=script&lang=js\"\n\nimport \"./TeacherNewTB.vue?vue&type=style&index=0&id=67b0bed1&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-67b0bed1\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"theme-teacher\">\r\n    <div class=\"top-banner\">\r\n      <div class=\"banner-title\">Community Resources</div>\r\n      <div class=\"t_banner-actions\">\r\n        <router-link to=\"/TeacherHome\" class=\"t_banner-btn\">Home</router-link>\r\n        <router-link to=\"/\" class=\"t_banner-btn\">Log Out</router-link>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"center large-paragraph\" style=\"color:#222;\">\r\n      Please select an option to view:\r\n      <div class=\"button-row\">\r\n        <button class=\"t_button\" @click=\"viewPublishedTests\">Published Tests</button>\r\n        <button class=\"t_button\" @click=\"fetchFeedback\">View Community Draft Pools</button>\r\n      </div>\r\n\r\n      <div v-if=\"viewing === 'published'\">\r\n        <div v-if=\"loadingPublished\" class=\"center large-paragraph\" style=\"color: #555;\">\r\n          Loading published draft pools...\r\n        </div>\r\n\r\n        <div v-else-if=\"fullTestbanks.length === 0\" class=\"center large-paragraph\" style=\"color: #222;\">\r\n          No published draft pools available for this course.\r\n        </div>\r\n\r\n        <div v-else>\r\n          <div v-for=\"tb in fullTestbanks\" :key=\"tb.testbank_id\" class=\"published-bank\">\r\n            <h3>{{ tb.name }} (Chapter {{ tb.chapter_number }}, Section {{ tb.section_number }})</h3>\r\n            <div v-for=\"(q, index) in tb.questions\" :key=\"q.id\"\r\n              :class=\"['question-box', { selected: selectedQuestionId === q.id }]\"\r\n              @click=\"toggleQuestionSelection(q.id)\">\r\n              <strong>Question {{ index + 1 }}:</strong> {{ q.question_text }}<br />\r\n              <span><strong>Type:</strong> {{ q.type }}</span><br />\r\n              <span><strong>Chapter:</strong> {{ q.chapter_number || 'N/A' }}</span><br />\r\n              <span><strong>Section:</strong> {{ q.section_number || 'N/A' }}</span><br />\r\n\r\n              <div v-if=\"q.type === 'True/False'\">\r\n                <strong>Answer:</strong> {{ q.true_false_answer ? 'True' : 'False' }}\r\n              </div>\r\n\r\n              <div v-if=\"q.type === 'Multiple Choice'\">\r\n                <span class=\"correct-answer\">Correct Answer:</span> {{ q.correct_option && q.correct_option.option_text\r\n                  ||\r\n                  'Not specified' }}\r\n                <br />\r\n                <p><strong>Other Options:</strong></p>\r\n                <ul>\r\n                  <li v-for=\"(option, i) in q.incorrect_options\" :key=\"i\" class=\"incorrect-answer\">\r\n                    {{ option.option_text }}\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n\r\n\r\n              <div v-if=\"q.type === 'Matching'\">\r\n                <strong>Pairs:</strong>\r\n                <ul>\r\n                  <li v-for=\"(pair, i) in q.matches\" :key=\"i\">\r\n                    {{ pair.prompt_text }} - {{ pair.match_text }}\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n\r\n              <div v-if=\"q.type === 'Fill in the Blank'\">\r\n                <strong>Correct Answers:</strong>\r\n                <ul>\r\n                  <li v-for=\"(blank, i) in q.blanks\" :key=\"i\">{{ blank.correct_text }}</li>\r\n                </ul>\r\n              </div>\r\n\r\n              <div v-if=\"q.type === 'Short Answer'\">\r\n                <strong>Answer:</strong> {{ q.answer || 'Not provided' }}\r\n              </div>\r\n\r\n              <div v-if=\"q.type === 'Essay'\">\r\n                <strong>Essay Instructions:</strong> {{ q.grading_instructions || 'None' }}\r\n              </div>\r\n\r\n              <div><strong>Grading Instructions:</strong> {{ q.grading_instructions || 'None' }}</div>\r\n\r\n              <!-- Feedback Section -->\r\n              <div v-if=\"q.feedback && q.feedback.length\" class=\"feedback-section\">\r\n                <strong>Feedback:</strong>\r\n                <!-- Show average rating if available -->\r\n                <div v-if=\"q.feedback && q.feedback.length\">\r\n                  <p v-if=\"q.class_average !== undefined\">\r\n                    <strong>Average Question Rating:</strong> {{ q.class_average.toFixed(1) }}/100\r\n                  </p>\r\n                </div>\r\n\r\n                <ul>\r\n                  <li v-for=\"(f, i) in q.feedback\" :key=\"i\">\r\n                    <em>{{ f.username }} ({{ f.role }})</em>: \"{{ f.comment_field }}\"\r\n                    <span v-if=\"f.rating !== undefined\"> - Class Average: {{ f.rating }}/100</span>\r\n                  </li>\r\n\r\n                </ul>\r\n              </div>\r\n              <div v-if=\"q.attachment || (q.attachments && q.attachments.length)\">\r\n                <strong>Attachments:</strong>\r\n                <ul>\r\n                  <li v-if=\"q.attachment\">\r\n                    <img :src=\"q.attachment.url\" :alt=\"q.attachment.name\" style=\"max-width: 100%; margin-top: 10px;\" />\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n\r\n              <!--  Buttons only visible when box is selected -->\r\n              <div v-if=\"selectedQuestionId === q.id\" class=\"button-group\">\r\n                <button @click.stop=\"openFeedbackForm(q.id)\">Leave Feedback</button>\r\n                <button @click.stop=\"openTestBankModal(q.id)\">Add to Draft Pool</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Published Test Questions -->\r\n      <div v-if=\"viewing === 'published-tests'\">\r\n\r\n        <div v-if=\"loadingPublished\" class=\"center large-paragraph\" style=\"color: #555;\">\r\n          Loading published tests...\r\n        </div>\r\n\r\n        <div v-else-if=\"fullTestbanks.length === 0\" class=\"center large-paragraph\" style=\"color: #222;\">\r\n          No published tests available for this course.\r\n        </div>\r\n\r\n        <div v-else>\r\n          <div v-for=\"tb in fullTestbanks\" :key=\"tb.testbank_id\" class=\"published-bank\">\r\n            <h3>{{ tb.name }} (Chapter {{ tb.chapter_number }}, Section {{ tb.section_number }})</h3>\r\n            <div v-for=\"(q, index) in tb.questions\" :key=\"q.id\"\r\n              :class=\"['question-box', { selected: selectedQuestionId === q.id }]\"\r\n              @click=\"toggleQuestionSelection(q.id)\">\r\n              <strong>Question {{ index + 1 }}:</strong> {{ q.question_text }}<br />\r\n              <span><strong>Type:</strong> {{ q.type }}</span><br />\r\n              <span><strong>Chapter:</strong> {{ q.chapter_number || 'N/A' }}</span><br />\r\n              <span><strong>Section:</strong> {{ q.section_number || 'N/A' }}</span><br />\r\n\r\n              <div v-if=\"q.type === 'True/False'\">\r\n                <strong>Answer:</strong> {{ q.true_false_answer ? 'True' : 'False' }}\r\n              </div>\r\n              <div v-if=\"q.type === 'Multiple Choice'\">\r\n                <span class=\"correct-answer\">Correct Answer:</span> {{ (q.correct_option &&\r\n                  q.correct_option.option_text) || 'Not specified' }}\r\n\r\n                <br />\r\n                <p><strong>Other Options:</strong></p>\r\n                <ul>\r\n                  <li v-for=\"(option, i) in q.incorrect_options\" :key=\"i\" class=\"incorrect-answer\">\r\n                    {{ option.option_text }}\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n              <div v-if=\"q.type === 'Matching'\">\r\n                <strong>Pairs:</strong>\r\n                <ul>\r\n                  <li v-for=\"(pair, i) in q.matches\" :key=\"i\">\r\n                    {{ pair.prompt_text }} - {{ pair.match_text }}\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n              <div v-if=\"q.type === 'Fill in the Blank'\">\r\n                <strong>Correct Answers:</strong>\r\n                <ul>\r\n                  <li v-for=\"(blank, i) in q.blanks\" :key=\"i\">{{ blank.correct_text }}</li>\r\n                </ul>\r\n              </div>\r\n              <div v-if=\"q.type === 'Short Answer'\">\r\n                <strong>Answer:</strong> {{ q.answer || 'Not provided' }}\r\n              </div>\r\n              <div v-if=\"q.type === 'Essay'\">\r\n                <strong>Essay Instructions:</strong> {{ q.grading_instructions || 'None' }}\r\n              </div>\r\n\r\n              <div><strong>Grading Instructions:</strong> {{ q.grading_instructions || 'None' }}</div>\r\n\r\n              <div v-if=\"q.feedback && q.feedback.length\" class=\"feedback-section\">\r\n                <strong>Feedback:</strong>\r\n\r\n                <!-- Show average rating if available -->\r\n                <div v-if=\"q.feedback && q.feedback.length\">\r\n                  <p v-if=\"q.class_average !== undefined\">\r\n                    <strong>Average Question Rating:</strong> {{ q.class_average.toFixed(1) }}/100\r\n                  </p>\r\n                </div>\r\n\r\n                <ul>\r\n                  <li v-for=\"(f, i) in q.feedback\" :key=\"i\">\r\n                    <em>{{ f.username }} ({{ f.role }})</em>: \"{{ f.comment_field }}\"\r\n                    <span v-if=\"f.rating !== undefined\"> - Class Average: {{ f.rating }}/100</span>\r\n                    </li>\r\n\r\n                </ul>\r\n              </div>\r\n              <div v-if=\"q.attachment || (q.attachments && q.attachments.length)\">\r\n                <strong>Attachments:</strong>\r\n                <ul>\r\n                  <li v-if=\"q.attachment\">\r\n                    <img :src=\"q.attachment.url\" :alt=\"q.attachment.name\" style=\"max-width: 100%; margin-top: 10px;\" />\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n\r\n              <div v-if=\"selectedQuestionId === q.id\" class=\"button-group\">\r\n                <button @click.stop=\"openFeedbackForm(q.id)\">Leave Feedback</button>\r\n                <button @click.stop=\"openTestBankModal(q.id)\">Add to Draft Pool</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n    <!-- Popups -->\r\n    <div class=\"popup-overlay\" v-if=\"showFeedbackForm\">\r\n      <div class=\"form-popup-modal\">\r\n        <h2>Leave Feedback</h2>\r\n        <textarea v-model=\"feedbackText\" rows=\"5\" style=\"width: 100%;\"\r\n          placeholder=\"Enter your comment here...\"></textarea>\r\n        <br /><br />\r\n        <label><strong>Please enter class average for this question: (0100):</strong></label>\r\n        <input type=\"number\" v-model=\"feedbackRating\" min=\"0\" max=\"100\" style=\"width: 100%;\" />\r\n\r\n        <br /><br />\r\n        <div class=\"button-row\">\r\n          <button class=\"btn\" @click=\"submitFeedback\">Submit</button>\r\n          <button class=\"btn cancel\" @click=\"closeFeedbackForm\">Cancel</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"popup-overlay\" v-if=\"showTestBankModal\">\r\n      <div class=\"form-popup-modal\">\r\n        <h2>Select draft pool to add question to:</h2>\r\n        <div style=\"display: flex; flex-direction: column; align-items: flex-start;\">\r\n          <div v-for=\"tb in unpublishedDraftPools\" :key=\"tb.testbank_id\" style=\"margin-bottom: 10px; width: 100%;\">\r\n            <button class=\"t_button\" style=\"width: 100%;\" @click=\"assignToDraftPool(tb.testbank_id)\">\r\n              {{ tb.name }}\r\n            </button>\r\n          </div>\r\n          <div style=\"width: 100%;\">\r\n            <button type=\"button\" class=\"btn cancel\" style=\"width: 100%; margin-top: 20px;\" @click=\"closeTestBankModal\">\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api';\r\n\r\nexport default {\r\n  name: 'TeacherPubQ',\r\n  data() {\r\n    return {\r\n      courseId: '',\r\n      textbookId: '',\r\n      fullTestbanks: [],\r\n      viewing: '',\r\n      showFeedbackForm: false,\r\n      selectedQuestionIdForFeedback: null,\r\n      feedbackText: '',\r\n      testBanks: [],\r\n      selectedQuestionToAdd: null,\r\n      showTestBankModal: false,\r\n      selectedQuestionId: null,\r\n      loadingPublished: false,\r\n      feedbackRating: ''\r\n    };\r\n  },\r\n  mounted() {\r\n    this.courseId = this.$route.query.course_id;\r\n    this.fetchCourseTextbook();\r\n    this.fetchTeacherTestbanks();\r\n  },\r\n  computed: {\r\n    unpublishedDraftPools() {\r\n      return this.testBanks.filter(tb => !tb.is_published);\r\n    }\r\n  },\r\n  methods: {\r\n\r\n    async fetchFeedback() {\r\n      this.viewing = 'published';\r\n      this.loadingPublished = true;\r\n      try {\r\n        const res = await api.get(`/resources/full-testbanks?course_id=${this.courseId}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n        this.fullTestbanks = res.data.testbanks || [];\r\n        console.log(\"Full published testbanks loaded:\", this.fullTestbanks);\r\n\r\n        for (const tb of this.fullTestbanks) {\r\n          for (const q of tb.questions) {\r\n            await this.loadFeedbackForQuestion(q);\r\n\r\n            console.log(\"Fetched questions:\", tb.questions);\r\n            if (q.attachment && !q.attachments) {\r\n              q.attachments = [q.attachment];\r\n            }\r\n          }\r\n        }\r\n\r\n      } catch (err) {\r\n        console.error('Failed to load testbanks:', err);\r\n        alert('Could not load published testbanks.');\r\n      }\r\n      finally {\r\n        this.loadingPublished = false;\r\n      }\r\n    },\r\n    async fetchCourseTextbook() {\r\n      try {\r\n        const res = await api.get(`/courses/${this.courseId}`, {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n        });\r\n        this.textbookId = res.data.textbook_id;\r\n        console.log(\"Fetched textbook ID:\", this.textbookId); //  Add this\r\n      } catch (err) {\r\n        console.error(\"Failed to fetch course textbook:\", err);\r\n      }\r\n    },\r\n    async viewPublishedTests() {\r\n      this.viewing = 'published-tests';\r\n      this.fullTestbanks = [];\r\n      this.loadingPublished = true;\r\n\r\n\r\n      try {\r\n        // Step 1: Get textbook ID if not already set\r\n        if (!this.textbookId) {\r\n          const courseRes = await api.get(`/courses/${this.courseId}`, {\r\n            headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n          });\r\n          this.textbookId = courseRes.data.textbook_id;\r\n        }\r\n\r\n        // Step 2: Fetch all courses to get all that share the textbook\r\n        const courseListRes = await api.get(`/courses`, {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n        });\r\n        const matchingCourseIds = (courseListRes.data || [])\r\n          .filter(c => c.textbook_id == this.textbookId)\r\n          .map(c => c.course_id);\r\n\r\n        // Step 3: Get all published tests\r\n        const testList = await api.get('/tests/published', {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n        });\r\n\r\n        const publishedTests = (testList.data || []).filter(\r\n          t => matchingCourseIds.includes(t.course_id)\r\n        );\r\n\r\n        // Step 4: Load questions for each test (skip broken ones)\r\n        for (const test of publishedTests) {\r\n          try {\r\n            const res = await api.get(`/resources/tests/${test.test_id}/questions`, {\r\n              headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n            });\r\n\r\n            const questions = res.data.questions || [];\r\n\r\n            for (const q of questions) {\r\n              await this.loadFeedbackForQuestion(q);\r\n\r\n              if (q.attachment && !q.attachments) {\r\n                q.attachments = [q.attachment];\r\n              }\r\n              console.log(\"Attachment for question\", q.id, \":\", q.attachment);\r\n\r\n            }\r\n\r\n            this.fullTestbanks.push({\r\n              testbank_id: test.test_id,\r\n              name: test.name || `Test ${test.test_id}`,\r\n              chapter_number: 'N/A',\r\n              section_number: 'N/A',\r\n              questions\r\n            });\r\n          } catch (err) {\r\n            console.error(` Failed to fetch questions for test ID ${test.test_id}`, err);\r\n            // Skips to the next test\r\n          } finally {\r\n            this.loadingPublished = false;\r\n          }\r\n        }\r\n\r\n        console.log(\" Published test questions loaded:\", this.fullTestbanks);\r\n      } catch (err) {\r\n        console.error(\" Failed to load published tests:\", err);\r\n      }\r\n    }\r\n\r\n    ,\r\n    async fetchTeacherTestbanks() {\r\n      try {\r\n        const res = await api.get(`/testbanks/teacher?course_id=${this.courseId}`, {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n        });\r\n        this.testBanks = res.data.testbanks || [];\r\n      } catch (err) {\r\n        console.error(\"Failed to load teacher testbanks:\", err);\r\n      }\r\n    },\r\n    toggleQuestionSelection(questionId) {\r\n      this.selectedQuestionId = this.selectedQuestionId === questionId ? null : questionId;\r\n    },\r\n    openFeedbackForm(id) {\r\n      this.selectedQuestionIdForFeedback = id;\r\n      this.feedbackText = '';\r\n      this.showFeedbackForm = true;\r\n    },\r\n    closeFeedbackForm() {\r\n      this.selectedQuestionIdForFeedback = null;\r\n      this.feedbackText = '';\r\n      this.showFeedbackForm = false;\r\n    },\r\n    async submitFeedback() {\r\n      try {\r\n        console.log(\"Submitting feedback:\", {\r\n          question_id: this.selectedQuestionIdForFeedback,\r\n          comment_field: this.feedbackText,\r\n          rating: this.feedbackRating\r\n        });\r\n\r\n        await api.post('/feedback/create', {\r\n          question_id: this.selectedQuestionIdForFeedback,\r\n          comment_field: this.feedbackText,\r\n          rating: this.feedbackRating || null\r\n        }, {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n        });\r\n        this.closeFeedbackForm();\r\n      } catch (err) {\r\n        console.error(\"Error submitting feedback:\", err);\r\n        alert(\" Failed to submit feedback.\");\r\n      }\r\n    },\r\n    openTestBankModal(id) {\r\n      this.selectedQuestionToAdd = id;\r\n      this.showTestBankModal = true;\r\n    },\r\n    closeTestBankModal() {\r\n      this.selectedQuestionToAdd = null;\r\n      this.showTestBankModal = false;\r\n    },\r\n    async assignToDraftPool(testbankId) {\r\n      try {\r\n        await api.post(`/testbanks/${testbankId}/questions`, {\r\n          question_ids: [this.selectedQuestionToAdd]\r\n        }, {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n        });\r\n        this.closeTestBankModal();\r\n      } catch (err) {\r\n        console.error(\"Failed to assign to draft pool:\", err);\r\n      }\r\n    },\r\n    async loadFeedbackForQuestion(q) {\r\n      try {\r\n        const res = await api.get(`/feedback/question/${q.id}`, {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n        });\r\n\r\n        const feedbackList = res.data.feedback || [];\r\n        q.feedback = feedbackList.map(f => ({\r\n          ...f,\r\n          comment_field: f.comment || f.comment_field,  // ensure compatibility\r\n        }));\r\n\r\n        q.newRating = ''; // default for new rating\r\n\r\n        // Assign class average to each feedback entry so we can show it\r\n        if (res.data.class_average !== null) {\r\n          q.class_average = res.data.class_average;\r\n        }\r\n      } catch (err) {\r\n        console.error(`Failed to load feedback for question ${q.id}`, err);\r\n      }\r\n    },\r\n    async submitRating(questionId, rating) {\r\n      try {\r\n        await api.post('/feedback/create', {\r\n          question_id: questionId,\r\n          rating: rating\r\n        }, {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n        });\r\n\r\n        alert(\" Rating submitted!\");\r\n        const q = this.fullTestbanks.flatMap(tb => tb.questions).find(q => q.id === questionId);\r\n        if (q) await this.loadFeedbackForQuestion(q); // refresh feedback\r\n\r\n      } catch (err) {\r\n        console.error(`Error submitting rating for question ${questionId}:`, err);\r\n        alert(\" Failed to submit rating.\");\r\n      }\r\n    }\r\n\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import '../assets/teacher_styles.css';\r\n\r\n.btn.cancel {\r\n  background-color: red !important;\r\n  color: white !important;\r\n  font-weight: bold;\r\n  border: none;\r\n  padding: 12px 20px;\r\n  /*  make it taller */\r\n  border-radius: 8px;\r\n  font-size: 16px;\r\n  transition: background-color 0.2s ease;\r\n}\r\n</style>\r\n","import { render } from \"./TeacherPubQ.vue?vue&type=template&id=6bde37a5&scoped=true\"\nimport script from \"./TeacherPubQ.vue?vue&type=script&lang=js\"\nexport * from \"./TeacherPubQ.vue?vue&type=script&lang=js\"\n\nimport \"./TeacherPubQ.vue?vue&type=style&index=0&id=6bde37a5&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6bde37a5\"]])\n\nexport default __exports__","<!-- filepath: /c:/Users/laure/Senior-Project/TestCreationVue/src/components/TeacherQuestions.vue -->\r\n<template>\r\n  <div class=\"theme-teacher\">\r\n    <div class=\"top-banner\">\r\n      <div class=\"banner-title\">{{ courseTitle }}</div>\r\n\r\n      <div class=\"t_banner-actions\">\r\n        <router-link to=\"/TeacherHome\" class=\"t_banner-btn\">Home</router-link>\r\n        <router-link to=\"/\" class=\"t_banner-btn\">Log Out</router-link>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Edit Blocked Warning Popup -->\r\n    <div class=\"popup-overlay\" v-if=\"editBlockedPopup\">\r\n      <div class=\"form-popup-modal\">\r\n        <form class=\"form-container\" @submit.prevent>\r\n          <h1>Cannot Edit Question</h1>\r\n          <p style=\"margin-top: 15px;\">{{ editBlockedReason }}</p>\r\n          <p>A new copy will be made instead.</p>\r\n\r\n          <br />\r\n          <button type=\"button\" class=\"btn\" @click=\"createCopyInstead\">Create a Copy</button>\r\n          <button type=\"button\" class=\"btn cancel\" @click=\"editBlockedPopup = false\">Cancel</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"page-wrapper\">\r\n      <div class=\"button-row\">\r\n        <div class=\"t_dropdown\">\r\n          <button class=\"t_dropbtn\">\r\n            {{ selectedTestBank ? selectedTestBank.name : 'Select Draft Pool' }}\r\n          </button>\r\n          <div class=\"t_dropdown-content\">\r\n            <a v-for=\"tb in testBanks\" :key=\"tb.testbank_id\" href=\"#\" @click.prevent=\"selectTestBank(tb)\">\r\n              {{ tb.name }}\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <router-link :to=\"{ path: '/TeacherNewTB', query: { courseId: courseId, courseTitle: courseTitle } }\">\r\n          <button class=\"t_button\">New Draft Pool</button>\r\n        </router-link>\r\n        <button class=\"t_button\" @click=\"importTest\">Import Test</button>\r\n\r\n        <div class=\"t_dropdown\">\r\n          <button class=\"t_dropbtn\">Question Type</button>\r\n          <div class=\"t_dropdown-content\">\r\n            <a @click=\"selectQuestionType('True/False')\">True/False</a>\r\n            <a @click=\"selectQuestionType('Multiple Choice')\">Multiple Choice</a>\r\n            <a @click=\"selectQuestionType('Matching')\">Matching</a>\r\n            <a @click=\"selectQuestionType('Fill in the Blank')\">Fill in the Blank</a>\r\n            <a @click=\"selectQuestionType('Short Answer')\">Short Answer</a>\r\n            <a @click=\"selectQuestionType('Essay')\">Essay</a>\r\n\r\n          </div>\r\n        </div>\r\n\r\n        <!--button to edit course info-->\r\n        <button class=\"t_button\" @click=\"showCourseEditPopup = true\">Edit Course Info</button>\r\n\r\n        <button class=\"t_button\" @click=\"edit\">New Question</button>\r\n        <router-link :to=\"{\r\n          name: 'TeacherPubQ',\r\n          query: {\r\n            course_id: courseId,\r\n            textbook_id: textbookId\r\n          }\r\n        }\">\r\n          <button class=\"t_button\">Community Resources</button>\r\n        </router-link>\r\n        <div id=\"selectedQuestionType\" style=\"color: #222\" class=\"center large-paragraph\">{{ selectedQuestionType }}\r\n        </div>\r\n      </div>\r\n\r\n      <p><strong>Note:</strong> Import one Canvas quiz in the QTI at a time please.</p>\r\n\r\n      <hr>\r\n    </div>\r\n\r\n\r\n    <ul>\r\n      <div v-for=\"(question, index) in questions\" :key=\"index\"\r\n        :class=\"['question-box', { selected: selectedQuestionId === question.id }]\"\r\n        @click=\"toggleQuestionSelection(question.id)\">\r\n        <strong>Question {{ index + 1 }}:</strong> {{ question.text }}<br>\r\n        <span><strong>Type:</strong> {{ question.type }}</span><br>\r\n        <span><strong>Chapter:</strong> {{ question.chapter || 'N/A' }}</span><br>\r\n        <span><strong>Section:</strong> {{ question.section || 'N/A' }}</span><br>\r\n        <span><strong>Points:</strong> {{ question.points }}</span><br>\r\n        <span><strong>Estimated Time:</strong> {{ question.time }} minutes</span><br>\r\n\r\n        <div v-if=\"question.type === 'True/False'\"><strong>Answer:</strong> {{ question.answer ? 'True' : 'False' }}\r\n        </div>\r\n        <div v-if=\"question.type === 'Multiple Choice'\">\r\n          <strong>Correct Answer:</strong> {{ question.correctOption && question.correctOption.option_text ||\r\n            'Not specified' }}<br>\r\n          <p><strong>Other Options:</strong></p>\r\n          <ul>\r\n            <li v-for=\"(option, i) in question.incorrectOptions\" :key=\"i\" class=\"incorrect-answer\">{{ option.option_text\r\n            }}</li>\r\n          </ul>\r\n        </div>\r\n        <!-- <div v-if=\"question.type === 'Short Answer'\">\r\n          <strong>Answer:</strong> {{ question.answer || 'Not provided' }}\r\n        </div> -->\r\n        <div v-if=\"question.type === 'Fill in the Blank'\">\r\n          <strong>Correct Answer(s):</strong>\r\n          <ul>\r\n            <li v-for=\"(blank, i) in question.blanks\" :key=\"i\">{{ blank.correct_text }}</li>\r\n          </ul>\r\n        </div>\r\n        <div v-if=\"question.type === 'Matching'\">\r\n          <strong>Pairs:</strong>\r\n          <ul>\r\n            <li v-for=\"(pair, i) in question.pairs\" :key=\"i\">{{ pair.term }} - {{ pair.definition }}</li>\r\n          </ul>\r\n        </div>\r\n        <div v-if=\"question.image_url\">\r\n          <p><strong>Attached Image:</strong></p>\r\n          <img :src=\"question.image_url\" alt=\"Question Attachment:\"\r\n            style=\"max-width: 100%; max-height: 400px; margin-bottom: 10px;\" />\r\n        </div>\r\n        <span><strong>Grading Instructions:</strong> {{ question.instructions || 'None' }}</span><br>\r\n\r\n        <div v-if=\"selectedQuestionId === question.id\" class=\"button-group\">\r\n          <button @click.stop=\"editQuestion(question)\">Edit</button>\r\n          <button @click.stop=\"deleteQuestion(question.id)\">Delete</button>\r\n          <button @click.stop=\"openAddToTestBank(question.id)\">Add to Draft Pool</button>\r\n        </div>\r\n      </div>\r\n    </ul>\r\n\r\n\r\n    <!-- Add to Test Bank Modal -->\r\n    <div class=\"popup-overlay\" v-show=\"showAddToTBModal\">\r\n      <div class=\"form-popup-modal\">\r\n        <h2>Select draft pool to add question to:</h2>\r\n        <div style=\"display: flex; flex-direction: column; align-items: flex-start;\">\r\n          <div v-for=\"tb in testBanks\" :key=\"tb.testbank_id\" style=\"margin-bottom: 10px; width: 100%;\">\r\n            <button class=\"t_button\" style=\"width: 100%;\" @click=\"assignQuestionToTestBank(tb.testbank_id)\">\r\n              {{ tb.name }}\r\n            </button>\r\n          </div>\r\n          <div class=\"form-container\" style=\"width: 100%;\">\r\n            <button type=\"button\" class=\"btn cancel\" style=\"width: 100%;\" @click=\"closeAddToTBModal\">\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <input type=\"file\" id=\"fileInput\" style=\"display: none;\" @change=\"handleFileUpload\">\r\n\r\n\r\n    <!-- Final Tests Popup -->\r\n    <div class=\"popup-overlay\" v-if=\"showPopup\">\r\n      <div class=\"form-popup-modal\">\r\n        <form class=\"form-container\" @submit.prevent>\r\n          <h3>Your Finalized Tests</h3>\r\n          <ul style=\"list-style-type: none; padding-left: 0;\">\r\n            <li v-for=\"test in testFiles\" :key=\"test.test_id\">\r\n              <button v-if=\"test.download_url && test.hasAnswerKey\" class=\"t_button\" @click=\"downloadTestAndKey(test)\">\r\n                {{ test.name }}\r\n              </button>\r\n            </li>\r\n          </ul>\r\n          <button type=\"button\" class=\"btn cancel\" @click=\"closeForm\">Close</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Popup Overlay -->\r\n    <div class=\"popup-overlay\" v-show=\"showForm\">\r\n      <div class=\"form-popup-modal\">\r\n        <form class=\"form-container\" @submit.prevent=\"handleQuestionSave\">\r\n          <h1>{{ editingQuestionId ? 'Edit Question' : 'New Question' }}</h1>\r\n\r\n          <label><b>Chapter Number</b></label>\r\n          <input type=\"text\" v-model=\"chapter\" required />\r\n\r\n          <label><b>Section Number</b></label>\r\n          <input type=\"text\" v-model=\"section\" required />\r\n\r\n          <label><b>Question Type</b><br /></label>\r\n          <div v-if=\"!editingQuestionId\">\r\n            <select v-model=\"selectedQuestionType\" required>\r\n              <option disabled value=\"\">Select a type</option>\r\n              <option>True/False</option>\r\n              <option>Multiple Choice</option>\r\n              <option>Matching</option>\r\n              <option>Fill in the Blank</option>\r\n              <option>Short Answer</option>\r\n              <option>Essay</option>\r\n            </select>\r\n          </div>\r\n          <div v-else>\r\n            <input type=\"text\" :value=\"selectedQuestionType\" disabled />\r\n          </div>\r\n\r\n          <br /><br />\r\n          <label><b>Question Text</b></label>\r\n          <input type=\"text\" v-model=\"question\" required />\r\n\r\n          <div v-if=\"selectedQuestionType === 'True/False'\">\r\n            <label><b>Answer</b></label>\r\n            <select v-model=\"answer\">\r\n              <option value=\"True\">True</option>\r\n              <option value=\"False\">False</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div v-if=\"selectedQuestionType === 'Multiple Choice'\">\r\n            <label><b>Correct Answer</b></label>\r\n            <input type=\"text\" v-model=\"answer\" />\r\n            <label><b>Incorrect Answer Choices (comma-separated)</b></label>\r\n            <input type=\"text\" v-model=\"answerChoices\" />\r\n          </div>\r\n\r\n          <div v-if=\"selectedQuestionType === 'Matching'\">\r\n            <label><b>Matching Pairs</b></label>\r\n            <div v-for=\"(pair, index) in matchingPairs\" :key=\"index\">\r\n              <input type=\"text\" v-model=\"pair.term\" placeholder=\"Term\" />\r\n              <input type=\"text\" v-model=\"pair.definition\" placeholder=\"Definition\" />\r\n              <button type=\"button\" @click=\"removePair(index)\">Remove</button>\r\n            </div>\r\n            <button type=\"button\" @click=\"addPair\">Add Pair</button>\r\n          </div>\r\n\r\n          <div v-if=\"selectedQuestionType === 'Fill in the Blank'\">\r\n            <label><b>Correct Answer</b></label>\r\n            <input type=\"text\" v-model=\"answer\" />\r\n          </div>\r\n\r\n          <!-- <div v-if=\"selectedQuestionType === 'Short Answer'\">\r\n            <label><b>Answer</b></label>\r\n            <input type=\"text\" v-model=\"answer\" />\r\n          </div> -->\r\n\r\n          <div v-if=\"selectedQuestionType === 'Essay'\"></div>\r\n\r\n          <br />\r\n          <label><b>Points Worth</b></label>\r\n          <input type=\"text\" v-model=\"points\" required />\r\n\r\n          <label><b>Estimated Time (in minutes)</b></label>\r\n          <input type=\"text\" v-model=\"time\" required />\r\n\r\n          <label><b>Grading Instructions</b></label>\r\n          <input type=\"text\" v-model=\"instructions\" required />\r\n\r\n          <!-- Show Upload Only When Creating -->\r\n          <div v-if=\"!editingQuestionId\">\r\n            <label><b>Upload Image</b></label>\r\n            <input type=\"file\" @change=\"handleImageUpload\" accept=\"image/*\" />\r\n            <img v-if=\"imagePreview\" :src=\"imagePreview\" alt=\"Preview\" style=\"max-width: 100%;\" />\r\n          </div>\r\n\r\n          <!-- Show Existing Image on Edit -->\r\n          <div v-if=\"editingQuestionId && imagePreview\">\r\n            <p><strong>Attached Image:</strong></p>\r\n            <img :src=\"imagePreview\" alt=\"Attached Image\"\r\n              style=\"max-width: 100%; max-height: 300px; margin-bottom: 10px;\" />\r\n          </div>\r\n\r\n          <br /><br />\r\n          <button type=\"submit\" class=\"btn\">Save</button>\r\n          <button type=\"button\" class=\"btn cancel\" @click=\"closeForm\">Close</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Course Edit Popup -->\r\n    <div class=\"popup-overlay\" v-if=\"showCourseEditPopup\">\r\n      <div class=\"form-popup-modal\">\r\n        <form class=\"form-container\" @submit.prevent=\"saveCourseInfo\">\r\n          <h1>Edit Course Info</h1>\r\n\r\n          <label><b>Course Title</b></label>\r\n          <input type=\"text\" v-model=\"editCourseTitle\" required />\r\n\r\n          <label><b>Course Number</b></label>\r\n          <input type=\"text\" v-model=\"editCourseNumber\" required />\r\n\r\n          <br />\r\n          <button type=\"submit\" class=\"btn\">Save</button>\r\n          <button type=\"button\" class=\"btn cancel\" @click=\"showCourseEditPopup = false\">Cancel</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api';\r\n\r\nexport default {\r\n  name: 'TeacherQuestions',\r\n  data() {\r\n    return {\r\n      courseTitle: this.$route.query.courseTitle || 'Untitled Course',\r\n      courseId: this.$route.query.courseId || null,\r\n      textbookId: this.$route.query.textbook_id,\r\n      chapter: '',\r\n      section: '',\r\n      question: '',\r\n      reference: '',\r\n      answer: '',\r\n      answerChoices: '',\r\n      points: '',\r\n      time: '',\r\n      instructions: '',\r\n      image: '',\r\n      imagePreview: '',\r\n      selectedQuestionType: '',\r\n      matchingPairs: [], // Array to store matching pairs for matching question type\r\n      questions: [], // Initialize questions as an empty array\r\n      selectedQuestionId: null, // To store the ID of the selected question for editing\r\n      editingQuestionId: null, // To store the ID of the question being edited\r\n      showForm: false,\r\n      selectedTestBank: null,\r\n      testBanks: [], // Array to store testbank options\r\n      showCourseEditPopup: false,\r\n      editCourseTitle: this.$route.query.courseTitle || '',\r\n      editCourseNumber: '',\r\n      showAddToTBModal: false,\r\n      questionToAddToTB: null,\r\n      oldMCOptionIds: [], // used for tracking MC option deletions\r\n      editBlockedPopup: false, // flag and variable for the edit warning popup\r\n      editBlockedReason: ''\r\n    };\r\n  },\r\n  mounted() {\r\n    const testbankId = this.$route.params.id;\r\n    console.log(\"Viewing testbank:\", testbankId);\r\n    this.loadTestbanks();\r\n\r\n    // Set selectedTestBank from query if provided\r\n    if (this.$route.query.testBankName) {\r\n      this.selectedTestBank = { name: this.$route.query.testBankName };\r\n    }\r\n  },\r\n\r\n  methods: {\r\n\r\n\r\n    //functions to add question to test bank\r\n    openAddToTestBank(questionId) {\r\n      this.questionToAddToTB = questionId;\r\n      this.showAddToTBModal = true;\r\n    },\r\n    closeAddToTBModal() {\r\n      this.questionToAddToTB = null;\r\n      this.showAddToTBModal = false;\r\n    },\r\n    async assignQuestionToTestBank(testbankId) {\r\n      if (!this.questionToAddToTB) return;\r\n      try {\r\n        await api.post(`/testbanks/${testbankId}/questions`, {\r\n          question_ids: [this.questionToAddToTB]\r\n        }, {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n        });\r\n\r\n\r\n        this.closeAddToTBModal();\r\n      } catch (error) {\r\n        console.error('Failed to add question to testbank:', error);\r\n      }\r\n    },\r\n    //functions to edit course info\r\n    openCourseEditPopup() {\r\n      const titleParts = this.courseTitle.trim().split(' ');\r\n      this.editCourseNumber = titleParts.length > 1 ? titleParts.pop() : '';\r\n      this.editCourseTitle = titleParts.join(' ');\r\n      this.showCourseEditPopup = true;\r\n    },\r\n\r\n    async saveCourseInfo() {\r\n      try {\r\n        const response = await api.patch(`/courses/${this.courseId}`, {\r\n          course_name: this.editCourseTitle,\r\n          course_number: this.editCourseNumber\r\n        }, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        const newTitle = `${this.editCourseTitle} ${this.editCourseNumber}`.trim();\r\n        this.courseTitle = newTitle;\r\n        document.title = newTitle;\r\n        this.showCourseEditPopup = false;\r\n      } catch (error) {\r\n        console.error('Failed to update course:', error);\r\n      }\r\n    },\r\n\r\n\r\n    async loadTestbanks() {\r\n      try {\r\n        const response = await api.get(`/testbanks/teacher?course_id=${this.courseId}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          },\r\n        });\r\n\r\n        this.testBanks = response.data.testbanks;\r\n      } catch (error) {\r\n        console.error(\"Failed to load teacher testbanks:\", error);\r\n      }\r\n    },\r\n    selectTestBank(tb) {\r\n      this.selectedTestBank = tb;\r\n      this.selectedTestbankId = tb.value;\r\n      this.$router.push({\r\n        name: 'TeacherViewTB',\r\n        params: { id: tb.testbank_id },\r\n        query: {\r\n          courseId: this.courseId,\r\n          courseTitle: this.courseTitle,\r\n          testBankId: tb.testbank_id,\r\n          testBankName: tb.name,\r\n          chapter: tb.chapter_number,\r\n          section: tb.section_number\r\n        }\r\n      });\r\n    },\r\n\r\n    //function to fetch questions from the database based on selected question type\r\n    async fetchQuestions(type) {\r\n      this.selectedQuestionType = type;\r\n      try {\r\n        const response = await api.get(`/questions`, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          },\r\n          params: {\r\n            course_id: this.$route.query.courseId,\r\n            type: type\r\n          }\r\n        });\r\n\r\n        console.log('Questions fetched:', response.data);\r\n\r\n        if (Array.isArray(response.data.questions)) {\r\n          this.questions = response.data.questions.map((question) => {\r\n            // Common base\r\n            const base = {\r\n              text: question.question_text,\r\n              type: question.type,\r\n              points: question.default_points,\r\n              id: question.id,\r\n              instructions: question.grading_instructions || '',\r\n              time: question.est_time,\r\n              chapter: question.chapter_number,\r\n              section: question.section_number,\r\n              image_url: question.attachment && question.attachment.url ? question.attachment.url : '' //  Fixed\r\n            };\r\n\r\n            // Extend based on type\r\n            switch (question.type) {\r\n              case 'True/False':\r\n                return {\r\n                  ...base,\r\n                  answer: question.true_false_answer\r\n                };\r\n              case 'Multiple Choice':\r\n                return {\r\n                  ...base,\r\n                  correctOption: question.correct_option || null,\r\n                  incorrectOptions: question.incorrect_options || []\r\n                };\r\n\r\n\r\n              case 'Matching':\r\n                return {\r\n                  ...base,\r\n                  pairs: (question.matches || []).map(pair => ({\r\n                    match_id: pair.match_id,\r\n                    term: pair.prompt_text,\r\n                    definition: pair.match_text\r\n                  }))\r\n\r\n                };\r\n              case 'Fill in the Blank':\r\n                return {\r\n                  ...base,\r\n                  blanks: question.blanks || [],\r\n                  instructions: question.grading_instructions || ''\r\n                };\r\n\r\n              case 'Short Answer':\r\n                return {\r\n                  ...base,\r\n                  answer: question.answer || ''\r\n                };\r\n              case 'Essay':\r\n                return {\r\n                  ...base,\r\n                  instructions: question.instructions || ''\r\n                };\r\n              default:\r\n                return base;\r\n            }\r\n          });\r\n        } else {\r\n          this.questions = [];\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Error fetching questions:', error);\r\n        this.questions = [];\r\n      }\r\n    },\r\n    //function to display questions fetched\r\n    displayQuestionType(type) {\r\n      this.selectedQuestionType = `Selected Question Type: ${type}`;\r\n    },\r\n    created() {\r\n      console.log('Query Parameters:', this.$route.query);\r\n    },\r\n\r\n    importTest() {\r\n      document.getElementById('fileInput').click();\r\n    },\r\n    async handleFileUpload(event) {\r\n      const file = event.target.files[0];\r\n      if (!file) {\r\n        alert(\"No file selected.\");\r\n        return;\r\n      }\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n\r\n      try {\r\n        //Phase 1: Uplod QTI file\r\n        const uploadResponse = await api.post('/qti/upload', formData, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n            'Content-Type': 'multipart/form-data'\r\n          }\r\n        });\r\n        const file_path = uploadResponse.data.file_path;\r\n        console.log('File uploaded successfully:', file_path);\r\n\r\n        //Phase 1.B: Create import record\r\n        const importResponse = await api.post('/qti/import', { file_path }, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          }\r\n        });\r\n        const import_id = importResponse.data.import_id;\r\n        console.log('QTI import created. Import ID:', import_id);\r\n\r\n        //Phase 3: save imported questions to the database\r\n        const saveResponse = await api.post(`qti/save/${import_id}`, {\r\n          course_id: this.courseId\r\n        }, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n          }\r\n        });\r\n        console.log('Questions imported successfully:', saveResponse.data);\r\n\r\n        //refrsh the question list\r\n        this.fetchQuestions(this.selectedQuestionType);\r\n      }\r\n      catch (error) {\r\n        console.error('QTI import Failed:', error);\r\n\r\n      }\r\n    },\r\n    async handleQuestionSave() {\r\n      try {\r\n        let postData;\r\n        let config;\r\n        const editingQuestion = this.questions.find(q => q.id === this.editingQuestionId);\r\n        const isEditing = !!this.editingQuestionId;\r\n\r\n        const commonFields = {\r\n          question_text: this.question,\r\n          default_points: parseInt(this.points),\r\n          est_time: parseInt(this.time),\r\n          chapter_number: this.chapter,\r\n          section_number: this.section,\r\n          grading_instructions: this.instructions,\r\n          type: this.selectedQuestionType,\r\n          source: 'manual',\r\n          course_id: this.courseId\r\n        };\r\n\r\n        let options = [];\r\n        if (this.selectedQuestionType === 'Multiple Choice') {\r\n          const incorrectChoices = this.answerChoices\r\n            .split(',')\r\n            .map(c => c.trim())\r\n            .filter(Boolean);\r\n\r\n          const correctAnswerText = this.answer.trim();\r\n          if (!correctAnswerText) {\r\n            alert(\"Correct answer cannot be empty.\");\r\n            return;\r\n          }\r\n\r\n          options.push({ option_text: correctAnswerText, is_correct: true });\r\n          incorrectChoices.forEach(choice => {\r\n            options.push({ option_text: choice, is_correct: false });\r\n          });\r\n\r\n          if (!options.some(opt => opt.is_correct)) {\r\n            alert(\"Multiple Choice questions must have at least one correct answer.\");\r\n            return;\r\n          }\r\n        }\r\n\r\n        if (this.image) {\r\n          postData = new FormData();\r\n          postData.append('file', this.image);\r\n          for (const [key, val] of Object.entries(commonFields)) {\r\n            postData.append(key, val);\r\n          }\r\n\r\n          switch (this.selectedQuestionType) {\r\n            case 'True/False':\r\n              postData.append('true_false_answer', this.answer === 'True');\r\n              break;\r\n            case 'Multiple Choice':\r\n              postData.append('options', JSON.stringify(options));\r\n              if (isEditing && this.oldMCOptionIds.length > 0) {\r\n                postData.append('to_delete', JSON.stringify(this.oldMCOptionIds));\r\n              }\r\n              break;\r\n            case 'Matching':\r\n              postData.append('matches', JSON.stringify(this.matchingPairs.map(p => ({ prompt_text: p.term, match_text: p.definition }))));\r\n              if (isEditing && editingQuestion) {\r\n                const oldMatchIds = (editingQuestion.pairs || []).map(p => p.match_id);\r\n                postData.append('to_delete', JSON.stringify(oldMatchIds));\r\n              }\r\n              break;\r\n            case 'Fill in the Blank':\r\n              postData.append('blanks', JSON.stringify([{ correct_text: this.answer }]));\r\n              if (isEditing && editingQuestion) {\r\n                const oldBlankIds = (editingQuestion.blanks || []).map(b => b.blank_id);\r\n                postData.append('to_delete', JSON.stringify(oldBlankIds));\r\n              }\r\n              break;\r\n            case 'Short Answer':\r\n              postData.append('answer', this.answer);\r\n              break;\r\n            case 'Essay':\r\n              postData.append('grading_instructions', this.instructions);\r\n              break;\r\n          }\r\n\r\n          config = {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n              'Content-Type': 'multipart/form-data'\r\n            }\r\n          };\r\n        } else {\r\n          postData = { ...commonFields };\r\n\r\n          switch (this.selectedQuestionType) {\r\n            case 'True/False':\r\n              postData.true_false_answer = this.answer === 'True';\r\n              break;\r\n            case 'Multiple Choice':\r\n              postData.options = options;\r\n              if (isEditing && this.oldMCOptionIds.length > 0) {\r\n                postData.to_delete = this.oldMCOptionIds;\r\n              }\r\n              break;\r\n            case 'Matching':\r\n              postData.matches = this.matchingPairs.map(p => ({ prompt_text: p.term, match_text: p.definition }));\r\n              if (isEditing && editingQuestion) {\r\n                const oldMatchIds = (editingQuestion.pairs || []).map(p => p.match_id);\r\n                postData.to_delete = oldMatchIds;\r\n              }\r\n              break;\r\n            case 'Fill in the Blank':\r\n              postData.blanks = [{ correct_text: this.answer }];\r\n              if (isEditing && editingQuestion) {\r\n                const oldBlankIds = (editingQuestion.blanks || []).map(b => b.blank_id);\r\n                postData.to_delete = oldBlankIds;\r\n              }\r\n              break;\r\n            case 'Short Answer':\r\n              postData.answer = this.answer;\r\n              break;\r\n            case 'Essay':\r\n              postData.grading_instructions = this.instructions;\r\n              break;\r\n          }\r\n\r\n          config = {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem('token')}`\r\n            }\r\n          };\r\n        }\r\n\r\n        if (isEditing) {\r\n          await api.patch(`/questions/${this.editingQuestionId}`, postData, config);\r\n        } else {\r\n          await api.post('/questions', postData, config);\r\n        }\r\n\r\n        this.closeForm();\r\n        this.resetForm();\r\n        this.fetchQuestions(this.selectedQuestionType);\r\n      } catch (err) {\r\n        let serverMsg = 'Something went wrong.';\r\n        if (err && err.response && err.response.data) {\r\n          serverMsg = err.response.data.error || err.response.data.message || serverMsg;\r\n        }\r\n        console.error('Error saving question:', err);\r\n      }\r\n    },\r\n\r\n    selectQuestionType(type) {\r\n      this.selectedQuestionType = `Selected Question Type: ${type}`;\r\n      this.fetchQuestions(type);\r\n    },\r\n    edit() {\r\n      this.resetForm(); // Clear old data\r\n      this.showForm = true;\r\n    },\r\n    closeForm() {\r\n      this.showForm = false;\r\n    },\r\n    addPair() {\r\n      this.matchingPairs.push({ term: '', definition: '' });\r\n    },\r\n    removePair(index) {\r\n      this.matchingPairs.splice(index, 1);\r\n    },\r\n\r\n    handleImageUpload(event) {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        this.image = file;  //  This was the missing link\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n          this.imagePreview = e.target.result;\r\n        };\r\n        reader.readAsDataURL(file);\r\n      }\r\n    },\r\n    resetForm() {\r\n      this.chapter = '';\r\n      this.section = '';\r\n      this.question = '';\r\n      this.reference = '';\r\n      this.answer = '';\r\n      this.answerChoices = '';\r\n      this.points = '';\r\n      this.time = '';\r\n      this.instructions = '';\r\n      this.image = '';\r\n      this.imagePreview = '';\r\n      this.matchingPairs = [];\r\n      this.selectedQuestionType = '';\r\n      this.editingQuestionId = null;\r\n      this.image = '';\r\n      this.imagePreview = '';\r\n\r\n    },\r\n\r\n    async editQuestion(question) {\r\n      try {\r\n        const res = await api.get(`/questions/${question.id}/used_in`, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        if (res.data.is_used) {\r\n          // Question is used in a published/final test\r\n          this.editBlockedReason = `This question is used in a \"${res.data.tests[0].status}\" test: \"${res.data.tests[0].name}\".`;\r\n          this.editingQuestionId = question.id;\r\n          this.editBlockedPopup = true;\r\n          return;\r\n        }\r\n      } catch (err) {\r\n        console.error('Error checking question status:', err);\r\n        alert('Could not verify question status.');\r\n        return;\r\n      }\r\n\r\n      // If not used, proceed with edit\r\n\r\n      this.editingQuestionId = question.id;\r\n      this.question = question.text;\r\n      this.chapter = question.chapter;\r\n      this.section = question.section;\r\n      this.points = question.points;\r\n      this.time = question.time;\r\n      this.instructions = question.instructions;\r\n      this.answer = question.answer || '';\r\n      this.selectedQuestionType = question.type;\r\n\r\n      if (question.type === 'Multiple Choice') {\r\n        this.answer = (question.correctOption && question.correctOption.option_text) || '';\r\n        this.answerChoices = (question.incorrectOptions || []).map(opt => opt.option_text).join(', ');\r\n        this.oldMCOptionIds = [];\r\n        if (question.correctOption && question.correctOption.option_id) {\r\n          this.oldMCOptionIds.push(question.correctOption.option_id);\r\n        }\r\n        if (Array.isArray(question.incorrectOptions)) {\r\n          question.incorrectOptions.forEach(opt => {\r\n            if (opt.option_id) this.oldMCOptionIds.push(opt.option_id);\r\n          });\r\n        }\r\n      } else if (question.type === 'Matching') {\r\n        this.matchingPairs = (question.pairs || []).map(pair => ({\r\n          term: pair.term,\r\n          definition: pair.definition\r\n        }));\r\n      }\r\n      this.imagePreview = question.image_url || '';\r\n      this.image = null; // block file re-upload on edit\r\n      this.showForm = true;\r\n      const el = document.getElementById('q_edit');\r\n      if (el && el.style) {\r\n        el.style.display = 'block';\r\n      }\r\n    },\r\n\r\n\r\n    //functions to delete questions\r\n    toggleQuestionSelection(questionId) {\r\n      this.selectedQuestionId = this.selectedQuestionId === questionId ? null : questionId;\r\n    },\r\n\r\n    async deleteQuestion(id) {\r\n      if (confirm('Are you sure you want to delete this question?')) {\r\n        try {\r\n          await api.delete(`/questions/${id}`, {\r\n            headers: {\r\n              Authorization: `Bearer ${localStorage.getItem('token')}`\r\n            }\r\n          });\r\n          this.questions = this.questions.filter(q => q.id !== id);\r\n        } catch (err) {\r\n          console.error(err);\r\n        }\r\n      }\r\n    },\r\n    async createCopyInstead() {\r\n      try {\r\n        const res = await api.post(`/questions/${this.editingQuestionId}/copy_to_course`, {\r\n          course_id: this.courseId\r\n        }, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        alert('A copy of the question was created. You can now edit it.');\r\n        this.editBlockedPopup = false;\r\n        this.fetchQuestions(this.selectedQuestionType); // reload with new question included\r\n      } catch (err) {\r\n        console.error('Failed to create copy:', err);\r\n        alert('Failed to create a copy of this question.');\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n@import '../assets/teacher_styles.css';\r\n</style>\r\n","import { render } from \"./TeacherQuestions.vue?vue&type=template&id=8af99efc&scoped=true\"\nimport script from \"./TeacherQuestions.vue?vue&type=script&lang=js\"\nexport * from \"./TeacherQuestions.vue?vue&type=script&lang=js\"\n\nimport \"./TeacherQuestions.vue?vue&type=style&index=0&id=8af99efc&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8af99efc\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"theme-teacher\">\r\n    <div class=\"top-banner\">\r\n      <div class=\"banner-title\">{{ testOptions.testName || 'Test Template' }}</div>\r\n      <div class=\"t_banner-actions\">\r\n        <router-link to=\"/TeacherHome\" class=\"t_banner-btn\">Home</router-link>\r\n        <router-link to=\"/\" class=\"t_banner-btn\">Log Out</router-link>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"button-row\">\r\n      <button class=\"t_button\" @click=\"showBackWarning = true\">Back to Draft Pool</button>\r\n      <button class=\"t_button\" @click=\"exportWarning = true\">Export Test to Document</button>\r\n    </div>\r\n\r\n\r\n    <p class=\"export-note\">\r\n      <strong>Note:</strong> Anything displayed in <span class=\"green-text\">green</span> will not appear on the student\r\n      test but will be included in the test key. <br />\r\n      If selected, a cover page and any uploaded graphic will be added automatically to the exported document.\r\n    </p>\r\n\r\n    <p class=\"export-note\">\r\n      <strong>Total Test Time:</strong> {{ totalEstimatedTime }} minutes\r\n    </p>\r\n    <p class=\"export-note\">\r\n      <strong>Total Points:</strong> {{ totalPoints }} points\r\n    </p>\r\n    <hr />\r\n\r\n    <!-- Warning Modal -->\r\n    <div class=\"popup-overlay\" v-if=\"showBackWarning\">\r\n      <div class=\"form-popup-modal\">\r\n        <div class=\"form-container\">\r\n          <h2 style=\"text-align: center;\">Warning</h2>\r\n          <p style=\"text-align: center; font-size: 18px;\">\r\n            If you go back to the Draft Pool, any unsaved changes on this page may be lost.\r\n          </p>\r\n          <div class=\"popup-button-group\">\r\n            <button class=\"btn\" @click=\"confirmBack\">Continue</button>\r\n            <button class=\"btn cancel\" @click=\"showBackWarning = false\">Cancel</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Export Warning Modal -->\r\n    <div class=\"popup-overlay\" v-if=\"exportWarning\">\r\n      <div class=\"form-popup-modal\">\r\n        <div class=\"form-container\">\r\n          <h2 style=\"text-align: center;\">Confirm Export</h2>\r\n          <p style=\"text-align: center; font-size: 18px;\">\r\n            Exporting will generate a Word document based on the current test setup.\r\n            Any unsaved changes will not be included. Continue?\r\n          </p>\r\n          <div style=\"display: flex; justify-content: center; gap: 10px; margin-top: 20px;\">\r\n            <button class=\"btn\" @click=\"confirmExport\">Yes, Export</button>\r\n            <button class=\"btn cancel\" @click=\"exportWarning = false\">Cancel</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Edit Blocked Warning Modal -->\r\n    <div class=\"popup-overlay\" v-if=\"editBlockedPopup\">\r\n      <div class=\"form-popup-modal\">\r\n        <h2>Cannot Edit Question</h2>\r\n        <p>{{ editBlockedReason }}</p>\r\n        <p>A new copy will be made and inserted to your draft pool instead.</p>\r\n        <div class=\"button-group\">\r\n          <button @click=\"createCopyInstead\">Create a Copy</button>\r\n          <button @click=\"editBlockedPopup = false\">Cancel</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Edit Question Modal -->\r\n    <div class=\"popup-overlay\" v-if=\"showEditForm\">\r\n      <div class=\"form-popup-modal\">\r\n        <form class=\"form-container\" @submit.prevent=\"saveEditedQuestion\">\r\n          <h2>Edit Question</h2>\r\n          <label><b>Chapter Number</b></label>\r\n          <input type=\"text\" v-model=\"editForm.chapter\" required />\r\n\r\n          <label><b>Section Number</b></label>\r\n          <input type=\"text\" v-model=\"editForm.section\" required />\r\n\r\n          <label><b>Question Text</b></label>\r\n          <input type=\"text\" v-model=\"editForm.question_text\" required />\r\n\r\n          <!-- Inside your Edit Question Modal -->\r\n          <label><b>Question Type</b></label>\r\n          <input type=\"text\" :value=\"editForm.type\" disabled />\r\n\r\n          <!-- True/False -->\r\n          <div v-if=\"editForm.type === 'True/False'\">\r\n            <label><b>Answer</b></label>\r\n            <select v-model=\"editForm.true_false_answer\">\r\n              <option :value=\"true\">True</option>\r\n              <option :value=\"false\">False</option>\r\n            </select>\r\n          </div>\r\n\r\n          <!-- Multiple Choice -->\r\n          <div v-if=\"editForm.type === 'Multiple Choice'\">\r\n            <label><b>Correct Answer</b></label>\r\n            <input type=\"text\" v-model=\"editForm.correct_option.option_text\" />\r\n\r\n            <label><b>Incorrect Answers (readonly)</b></label>\r\n            <ul>\r\n              <li v-for=\"(opt, index) in editForm.incorrect_options\" :key=\"index\">{{ opt.option_text }}</li>\r\n            </ul>\r\n          </div>\r\n\r\n          <!-- Fill in the Blank -->\r\n          <div v-if=\"editForm.type === 'Fill in the Blank'\">\r\n            <label><b>Blanks</b></label>\r\n            <ul>\r\n              <li v-for=\"(blank, index) in editForm.blanks\" :key=\"index\">\r\n                <input type=\"text\" v-model=\"blank.correct_text\" />\r\n              </li>\r\n            </ul>\r\n          </div>\r\n\r\n          <!-- Matching -->\r\n          <div v-if=\"editForm.type === 'Matching'\">\r\n            <label><b>Matching Pairs</b></label>\r\n            <ul>\r\n              <li v-for=\"(match, index) in editForm.matches\" :key=\"index\">\r\n                <input type=\"text\" v-model=\"match.prompt_text\" placeholder=\"Prompt\" />\r\n                <input type=\"text\" v-model=\"match.match_text\" placeholder=\"Match\" />\r\n              </li>\r\n            </ul>\r\n          </div>\r\n\r\n\r\n          <label><b>Points</b></label>\r\n          <input type=\"text\" v-model=\"editForm.points\" required />\r\n\r\n          <label><b>Estimated Time (in minutes)</b></label>\r\n          <input type=\"text\" v-model=\"editForm.est_time\" required />\r\n\r\n          <label><b>Grading Instructions</b></label>\r\n          <input type=\"text\" v-model=\"editForm.grading_instructions\" />\r\n\r\n          <br /><br />\r\n          <button type=\"submit\" class=\"btn\">Save</button>\r\n          <button type=\"button\" class=\"btn cancel\" @click=\"showEditForm = false\">Cancel</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n\r\n\r\n\r\n\r\n\r\n    <div class=\"question-list-container\">\r\n      <draggable v-model=\"questions\" item-key=\"id\" class=\"drag-list\" handle=\".drag-handle\" @update=\"saveOrder\">\r\n        <template #header></template>\r\n\r\n        <template #item=\"{ element, index }\">\r\n          <div class=\"question-box\" :class=\"{ selected: selectedQuestionId === element.id }\"\r\n            @click=\"toggleQuestionSelection(element.id)\">\r\n            <div class=\"drag-header\">\r\n              <span class=\"drag-handle\" title=\"Drag to reorder\"></span>\r\n              <h3>{{ index + 1 }}. {{ element.question_text }}</h3>\r\n            </div>\r\n\r\n            <!-- Image Preview if available -->\r\n            <div v-if=\"element.attachment && element.attachment.url\" class=\"question-image-preview\">\r\n              <img :src=\"element.attachment.url\" alt=\"Question Image\"\r\n                style=\"max-width: 100%; max-height: 300px; margin-top: 10px; margin-bottom: 10px;\" />\r\n            </div>\r\n\r\n\r\n            <!-- Multiple Choice Question boxes-->\r\n            <div v-if=\"element.type === 'Multiple Choice'\">\r\n              <ol type=\"A\">\r\n                <li v-for=\"(opt, i) in shuffleOptions(element)\" :key=\"opt.option_id || i\"\r\n                  :class=\"{ 'correct-answer': opt.is_correct }\">\r\n                  {{ opt.option_text }}\r\n                </li>\r\n              </ol>\r\n              <div class=\"question-type-label\">{{ element.type }}</div>\r\n            </div>\r\n\r\n            <!-- Fill in the Blank Question boxes-->\r\n            <div v-else-if=\"element.type === 'Fill in the Blank'\">\r\n              <p><strong>Answer:</strong> __________________________</p>\r\n              <p class=\"correct-answer-display\">\r\n                Correct Answer: {{element.blanks.map(b => b.correct_text).join(', ')}}\r\n              </p>\r\n              <div class=\"question-type-label\">{{ element.type }}</div>\r\n            </div>\r\n\r\n\r\n            <!-- Matching Question boxes-->\r\n            <div v-else-if=\"element.type === 'Matching'\">\r\n              <div class=\"matching-container\">\r\n                <div class=\"matching-prompts\">\r\n                  <h4>Match the following:</h4>\r\n                  <ul>\r\n                    <li v-for=\"(pair, i) in getShuffledMatches(element)\" :key=\"i\">\r\n                      {{ i + 1 }}. {{ pair.prompt_text }}\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n                <div class=\"matching-answers\">\r\n                  <h4>Answer Bank:</h4>\r\n                  <ul>\r\n                    <li v-for=\"(text, i) in getShuffledAnswerBank(element)\" :key=\"i\">\r\n                      {{ String.fromCharCode(65 + i) }}. {{ text }}\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"matching-footer\">\r\n                <p class=\"correct-answer-display\">\r\n                  Correct Matches: {{ getMatchingKeyString(element) }}\r\n                </p>\r\n\r\n\r\n                <div class=\"question-type-label\">{{ element.type }}</div>\r\n              </div>\r\n            </div>\r\n\r\n\r\n\r\n            <!-- True/False -->\r\n            <div v-else-if=\"element.type === 'True/False'\">\r\n              <p><strong>Answer:</strong> __________________________</p>\r\n              <p class=\"correct-answer-display\">\r\n                Correct Answer: {{ element.true_false_answer ? 'True' : 'False' }}\r\n              </p>\r\n              <div class=\"question-type-label\">{{ element.type }}</div>\r\n            </div>\r\n\r\n\r\n\r\n            <!-- Short Answer or Essay -->\r\n            <div v-else-if=\"element.type === 'Short Answer' || element.type === 'Essay'\">\r\n              <p class=\"correct-answer-display\">\r\n                Grading Instructions: {{ element.grading_instructions || 'None provided' }}\r\n              </p>\r\n              <div class=\"question-type-label\">{{ element.type }}</div>\r\n            </div>\r\n\r\n\r\n            <!-- Other fallback -->\r\n            <div v-else>\r\n              <em>Type: {{ element.type }}</em>\r\n            </div>\r\n\r\n            <div v-if=\"selectedQuestionId === element.id\" class=\"button-group\">\r\n              <button @click.stop=\"editQuestion(element)\">Edit</button>\r\n              <button @click.stop=\"removeFromTest(element.id)\">Remove from Test</button>\r\n            </div>\r\n\r\n\r\n          </div>\r\n        </template>\r\n\r\n        <template #footer></template>\r\n      </draggable>\r\n\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport draggable from 'vuedraggable';\r\nimport api from '@/api'; // consistent with your other components\r\nimport { saveAs } from 'file-saver';\r\n\r\nexport default {\r\n  components: { draggable },\r\n  data() {\r\n    const savedOptions = JSON.parse(localStorage.getItem(\"testOptions\") || \"{}\");\r\n\r\n    return {\r\n      questions: [],\r\n      testOptions: {\r\n        testName: savedOptions.testName || this.$route.query.testBankName || \"Test Template\",\r\n        coverPage: savedOptions.coverPage === true || savedOptions.coverPage === 'true', selectedTemplate: savedOptions.selectedTemplate || \"All Questions\",\r\n        uploadedImage: savedOptions.uploadedImage || '',\r\n        graphicPreview: savedOptions.graphicPreview || '',\r\n        selectedTypes: this.$route.query.selectedTypes\r\n          ? JSON.parse(this.$route.query.selectedTypes)\r\n          : savedOptions.selectedTypes || [],\r\n      },\r\n      testBankId: this.$route.query.testBankId,\r\n      showBackWarning: false,\r\n      hasUnsavedChanges: true,\r\n      publishWarning: false,\r\n      exportWarning: false,\r\n      selectedQuestionId: null,\r\n      editingQuestionId: null,\r\n      editBlockedPopup: false,\r\n      editBlockedReason: '',\r\n      showEditForm: false,\r\n      editForm: {\r\n        question_text: '',\r\n        chapter: '',\r\n        section: '',\r\n        type: '',\r\n        points: '',\r\n        est_time: '',\r\n        grading_instructions: ''\r\n      }\r\n\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.fetchQuestions();\r\n    window.addEventListener('beforeunload', this.confirmExit);\r\n  },\r\n  beforeDestroy() {\r\n    window.removeEventListener('beforeunload', this.confirmExit);\r\n  },\r\n\r\n  //this looks for the order of questions changing and updates storage\r\n  watch: {\r\n    questions: {\r\n      deep: true,\r\n      handler(newList) {\r\n        const idOrder = newList.map(q => q.id);\r\n        localStorage.setItem(`questionOrder_${this.testBankId}`, JSON.stringify(idOrder));\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    totalEstimatedTime() {\r\n      return this.questions.reduce((sum, q) => {\r\n        const time = parseInt(q.est_time, 10);\r\n        return sum + (isNaN(time) ? 0 : time);\r\n      }, 0);\r\n    },\r\n    totalPoints() {\r\n      return this.questions.reduce((sum, q) => {\r\n        const pts = parseFloat(q.default_points);\r\n        return sum + (isNaN(pts) ? 0 : pts);\r\n      }, 0);\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    //methods for editing questions==========================================\r\n    async editQuestion(question) {\r\n      try {\r\n        const res = await api.get(`/questions/${question.id}/used_in`, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        if (res.data.is_used) {\r\n          // Question is used in a finalized test\r\n          this.editBlockedReason = `This question is used in a \"${res.data.tests[0].status}\" test: \"${res.data.tests[0].name}\".`;\r\n          this.editingQuestionId = question.id;\r\n          this.editBlockedPopup = true;\r\n          return;\r\n        }\r\n        this.editingQuestionId = question.id;\r\n        this.editForm = {\r\n          question_text: question.question_text,\r\n          chapter: question.chapter_number,\r\n          section: question.section_number,\r\n          type: question.type,\r\n          points: question.default_points,\r\n          est_time: question.est_time,\r\n          grading_instructions: question.grading_instructions || '',\r\n          correct_option: question.correct_option || null,\r\n          incorrect_options: question.incorrect_options || [],\r\n          blanks: question.blanks || [],\r\n          matches: question.matches || [],\r\n          true_false_answer: question.true_false_answer\r\n        };\r\n\r\n\r\n        this.showEditForm = true;\r\n\r\n      } catch (err) {\r\n        console.error('Error checking question status:', err);\r\n        alert('Could not verify question status.');\r\n      }\r\n    },\r\n    async createCopyInstead() {\r\n      try {\r\n        // Step 1: Copy the question to the current course\r\n        const res = await api.post(`/questions/${this.editingQuestionId}/copy_to_course`, {\r\n          course_id: this.$route.query.courseId\r\n        }, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        const newQuestionId = res.data.new_question_id;\r\n        if (!newQuestionId) throw new Error(\"New question ID not returned.\");\r\n\r\n        // Step 2: Remove the original question from the test bank (backend)\r\n        await api.delete(`/testbanks/${this.testBankId}/questions/${this.editingQuestionId}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        //  Remove old question ID from localStorage to keep it out on reload\r\n        const orderKey = `questionOrder_${this.testBankId}`;\r\n        const savedOrder = JSON.parse(localStorage.getItem(orderKey) || \"[]\");\r\n        const updatedOrder = savedOrder.filter(id => id !== this.editingQuestionId);\r\n        localStorage.setItem(orderKey, JSON.stringify(updatedOrder));\r\n\r\n\r\n        // Step 3: Add the copied question to the test bank (backend)\r\n        await api.post(`/testbanks/${this.testBankId}/questions`, {\r\n          question_ids: [newQuestionId]\r\n        }, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        // Step 4: Refresh all questions in local state\r\n        await this.fetchQuestions();\r\n\r\n        // Step 5: Scroll to and open the new question in edit mode\r\n        this.$nextTick(() => {\r\n          const newQuestion = this.questions.find(q => q.id === newQuestionId);\r\n          if (!newQuestion) {\r\n            alert(\"Newly copied question not found after refresh.\");\r\n            return;\r\n          }\r\n\r\n          // Scroll to the question in the DOM (optional, improve UX)\r\n          const el = document.querySelector(`[data-id=\"${newQuestion.id}\"]`);\r\n          if (el) el.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n\r\n          this.editingQuestionId = newQuestion.id;\r\n          this.selectedQuestionId = newQuestion.id;\r\n          this.editForm = {\r\n            question_text: newQuestion.question_text,\r\n            chapter: newQuestion.chapter_number,\r\n            section: newQuestion.section_number,\r\n            type: newQuestion.type,\r\n            points: newQuestion.default_points,\r\n            est_time: newQuestion.est_time,\r\n            grading_instructions: newQuestion.grading_instructions || '',\r\n            correct_option: newQuestion.correct_option || null,\r\n            incorrect_options: newQuestion.incorrect_options || [],\r\n            blanks: newQuestion.blanks || [],\r\n            matches: newQuestion.matches || [],\r\n            true_false_answer: newQuestion.true_false_answer\r\n          };\r\n\r\n          this.editBlockedPopup = false;\r\n          this.showEditForm = true;\r\n        });\r\n\r\n      } catch (err) {\r\n        console.error(' Failed to create or edit copy:', err);\r\n        alert('An error occurred while replacing the uneditable question.');\r\n      }\r\n    },\r\n\r\n    async saveEditedQuestion() {\r\n      try {\r\n        const payload = {\r\n          question_text: this.editForm.question_text,\r\n          chapter_number: this.editForm.chapter,\r\n          section_number: this.editForm.section,\r\n          default_points: parseFloat(this.editForm.points),\r\n          est_time: parseInt(this.editForm.est_time),\r\n          grading_instructions: this.editForm.grading_instructions\r\n        };\r\n\r\n        // Type-specific fields\r\n        if (this.editForm.type === 'True/False') {\r\n          payload.true_false_answer = this.editForm.true_false_answer;\r\n        }\r\n\r\n        if (this.editForm.type === 'Multiple Choice') {\r\n          payload.options = [\r\n            { option_text: this.editForm.correct_option.option_text, is_correct: true },\r\n            ...this.editForm.incorrect_options.map(opt => ({\r\n              option_text: opt.option_text,\r\n              is_correct: false\r\n            }))\r\n          ];\r\n        }\r\n\r\n        if (this.editForm.type === 'Fill in the Blank') {\r\n          payload.blanks = this.editForm.blanks.map(b => ({\r\n            correct_text: b.correct_text\r\n          }));\r\n        }\r\n\r\n        if (this.editForm.type === 'Matching') {\r\n          payload.matches = this.editForm.matches.map(pair => ({\r\n            prompt_text: pair.prompt_text,\r\n            match_text: pair.match_text\r\n          }));\r\n        }\r\n\r\n        const res = await api.patch(`/questions/${this.editingQuestionId}`, payload, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        alert(\" Question updated!\");\r\n        this.showEditForm = false;\r\n        await this.fetchQuestions(); // Refresh questions from backend\r\n\r\n      } catch (err) {\r\n        console.error(\" Failed to update question:\", err);\r\n        alert(\"Could not update question.\");\r\n      }\r\n    },\r\n\r\n\r\n\r\n    //methods for exporting, publishing, and going back to the draft pool\r\n    // finalize the document export\r\n    blobToFile(blob, filename) {\r\n      return new File([blob], filename, {\r\n        type: \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\r\n      });\r\n    },\r\n\r\n    //finalize test key before export\r\n    async uploadAnswerKey(testId, keyFile) {\r\n      const formData = new FormData();\r\n      formData.append('file', keyFile);\r\n\r\n      try {\r\n        const response = await api.post(`/tests/${testId}/upload_answer_key`, formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        console.log(\" Answer key uploaded:\", response.data);\r\n      } catch (err) {\r\n        console.error(\" Failed to upload answer key:\", err);\r\n        alert(\"The answer key could not be saved to the backend.\");\r\n      }\r\n    },\r\n\r\n    //publish the test\r\n    async publishTest() {\r\n      try {\r\n        const testId = localStorage.getItem('finalizedTestId');\r\n\r\n        if (!testId) {\r\n          alert(\" No finalized test found. Please export the test first.\");\r\n          return;\r\n        }\r\n\r\n        // Step 1: Publish the finalized test\r\n        await api.post(`/tests/${testId}/publish`, {}, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        alert(\" Test successfully published!\");\r\n        localStorage.removeItem('finalizedTestId');\r\n\r\n      } catch (err) {\r\n        console.error(\" Failed to publish test:\", (err.response && err.response.data) || err.message);\r\n        alert(\"An error occurred while publishing. Check the console.\");\r\n      }\r\n    },\r\n\r\n\r\n    async finalizeTestBeforeExport() {\r\n      try {\r\n        const selectedTemplate = this.testOptions.selectedTemplate || \"All Questions\";\r\n\r\n        const finalizePayload = {\r\n          test_bank_id: parseInt(this.testBankId),\r\n          name: this.testOptions.testName,\r\n          estimated_time: this.totalEstimatedTime > 0 ? this.totalEstimatedTime : 1,\r\n          test_instructions: \"\",\r\n          course_id: parseInt(this.$route.query.courseId),\r\n          type: selectedTemplate\r\n        };\r\n\r\n        //  If it's not \"All Questions\", provide question_ids\r\n        if (selectedTemplate !== \"All Questions\") {\r\n          finalizePayload.question_ids = this.questions.map(q => q.id);\r\n        }\r\n\r\n        console.log(\" Finalizing test with payload:\", finalizePayload);\r\n\r\n        const response = await api.post('/tests/finalize', finalizePayload, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        if (response.status === 201) {\r\n          const testId = response.data.test_id;\r\n\r\n          //this needs to be debugged\r\n          // // Upload graphic if present\r\n          // if (this.testOptions.graphicPreview) {\r\n          //   const imageFile = this.dataUrlToFile(this.testOptions.graphicPreview, \"resource_image.png\");\r\n          //   const formData = new FormData();\r\n          //   formData.append('file', imageFile);\r\n\r\n          //   await api.post(`/tests/${testId}/upload_attachment`, formData, {\r\n          //     headers: {\r\n          //       'Content-Type': 'multipart/form-data',\r\n          //       Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          //     }\r\n          //   });\r\n          // }\r\n\r\n          return {\r\n            testId,\r\n            questionCount: response.data.question_count\r\n          };\r\n        } else {\r\n          throw new Error(\"Finalize test failed with non-201 response\");\r\n        }\r\n\r\n      } catch (err) {\r\n        console.error(\" Finalize error:\", (err.response && err.response.data) || err.message);\r\n        alert(\"Failed to finalize test. See console for details.\");\r\n        throw err;\r\n      }\r\n    },\r\n\r\n    // Convert data URL to File object\r\n    dataUrlToFile(dataUrl, filename) {\r\n      const arr = dataUrl.split(',');\r\n      const mime = arr[0].match(/:(.*?);/)[1];\r\n      const bstr = atob(arr[1]);\r\n      let n = bstr.length;\r\n      const u8arr = new Uint8Array(n);\r\n      while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n);\r\n      }\r\n      return new File([u8arr], filename, { type: mime });\r\n    },\r\n\r\n\r\n    async confirmExport() {\r\n      this.exportWarning = false;\r\n      try {\r\n        const finalizedMeta = await this.finalizeTestBeforeExport();\r\n        const testId = finalizedMeta.testId;\r\n\r\n        //  Save to localStorage or Vue data\r\n        localStorage.setItem('finalizedTestId', testId); // OR use: this.finalizedTestId = testId;\r\n\r\n        await this.exportToWord(finalizedMeta);\r\n      } catch (err) {\r\n        console.error(\"Export canceled due to finalize error\");\r\n      }\r\n    },\r\n    confirmPublish() {\r\n      this.publishWarning = false;\r\n      this.publishTest(); // call your existing publish logic\r\n    },\r\n\r\n    confirmExit(e) {\r\n      if (this.hasUnsavedChanges) {\r\n        e.preventDefault();\r\n        e.returnValue = ''; // For modern browsers to trigger prompt\r\n      }\r\n    },\r\n\r\n    confirmBack() {\r\n      this.showBackWarning = false;\r\n      this.goBackTB();\r\n    },\r\n\r\n    //function to go back to draft pool\r\n    goBackTB() {\r\n      this.$router.push({\r\n        path: '/TeacherViewTB',\r\n        query: {\r\n          courseId: this.$route.query.courseId,\r\n          courseTitle: this.$route.query.courseTitle,\r\n          testBankId: this.testBankId,\r\n          testBankName: this.$route.query.testBankName\r\n        }\r\n      });\r\n\r\n    },\r\n    //methods for question management==========================================\r\n    toggleQuestionSelection(questionId) {\r\n      this.selectedQuestionId = this.selectedQuestionId === questionId ? null : questionId;\r\n    },\r\n    removeFromTest(questionId) {\r\n      if (confirm(\"Remove this question from the test?\")) {\r\n        this.questions = this.questions.filter(q => q.id !== questionId);\r\n        this.selectedQuestionId = null;\r\n\r\n        //  Update localStorage to exclude removed ID\r\n        const orderKey = `questionOrder_${this.testBankId}`;\r\n        const savedOrder = JSON.parse(localStorage.getItem(orderKey) || \"[]\");\r\n        const updatedOrder = savedOrder.filter(id => id !== questionId);\r\n        localStorage.setItem(orderKey, JSON.stringify(updatedOrder));\r\n      }\r\n    },\r\n\r\n\r\n    //methods for page contents==========================================\r\n    //fetch desired testbank questions\r\n    async fetchQuestions() {\r\n      try {\r\n        const selectedTypes = this.testOptions.selectedTypes || [];\r\n\r\n        const params = {\r\n          test_bank_id: this.testBankId\r\n        };\r\n\r\n        // Only include 'types' param if not selecting all questions\r\n        if (!selectedTypes.includes(\"All Questions\")) {\r\n          params.types = JSON.stringify(selectedTypes);\r\n        }\r\n\r\n        const response = await api.get(`/tests/draft-questions`, {\r\n          params,\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        const rawQuestions = response.data.questions || [];\r\n        const savedOrder = localStorage.getItem(`questionOrder_${this.testBankId}`);\r\n\r\n        let finalOrdered = [];\r\n\r\n        if (savedOrder) {\r\n          const idOrder = JSON.parse(savedOrder);\r\n          const questionMap = new Map(rawQuestions.map(q => [q.id, q]));\r\n\r\n          // Preserve order from localStorage\r\n          finalOrdered = idOrder.map(id => questionMap.get(id)).filter(Boolean);\r\n\r\n          // Add any newly added questions not in saved order\r\n          rawQuestions.forEach(q => {\r\n            if (!idOrder.includes(q.id)) {\r\n              finalOrdered.push(q);\r\n            }\r\n          });\r\n        } else {\r\n          finalOrdered = rawQuestions;\r\n        }\r\n\r\n        // Deep clone to ensure Vue reactivity and clear stale properties\r\n        this.questions = JSON.parse(JSON.stringify(finalOrdered));\r\n\r\n        // Clear any cached memoized data like _shuffledAnswers\r\n        this.questions.forEach(q => {\r\n          if (q._shuffledAnswers) delete q._shuffledAnswers;\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error(\" Failed to fetch questions:\", error);\r\n      }\r\n    },\r\n\r\n\r\n\r\n\r\n    //save order of questions\r\n    saveOrder() {\r\n      const idOrder = this.questions.map(q => q.id);\r\n      localStorage.setItem(`questionOrder_${this.testBankId}`, JSON.stringify(idOrder));\r\n    },\r\n\r\n    //randomly assign order for answer choices\r\n    shuffleOptions(question) {\r\n      const options = [...question.incorrect_options, question.correct_option].map(opt => ({\r\n        ...opt, is_correct: !!opt.is_correct\r\n      }));\r\n\r\n      // Fisher-Yates shuffle\r\n      for (let i = options.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [options[i], options[j]] = [options[j], options[i]];\r\n      }\r\n\r\n      return options;\r\n    },\r\n\r\n    shuffleArray(arr) {\r\n      const copy = [...arr];\r\n      for (let i = copy.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1));\r\n        [copy[i], copy[j]] = [copy[j], copy[i]];\r\n      }\r\n      return copy;\r\n    },\r\n\r\n    getShuffledBlanks(question) {\r\n      return this.shuffleArray(question.blanks || []);\r\n    },\r\n\r\n    //shuffle matches terms\r\n    getShuffledMatches(question) {\r\n      const matches = question.matches || [];\r\n      const prompts = matches.map(pair => pair.prompt_text);\r\n      const answers = this.getShuffledAnswerBank(question);\r\n      return prompts.map((prompt, index) => ({\r\n        prompt_text: prompt,\r\n        match_text: answers[index]\r\n      }));\r\n    },\r\n\r\n    //shuffle matches answers\r\n    getShuffledAnswerBank(question) {\r\n      // Memoize shuffle on question\r\n      if (!question._shuffledAnswers) {\r\n        const matches = question.matches || [];\r\n        const answers = this.shuffleArray(matches.map(pair => pair.match_text));\r\n        question._shuffledAnswers = answers;\r\n      }\r\n      return question._shuffledAnswers;\r\n    },\r\n\r\n    //helper for matches answers\r\n    getMatchingKeyString(question) {\r\n      const shuffledAnswers = this.getShuffledAnswerBank(question);\r\n      return (question.matches || [])\r\n        .map((pair, index) => {\r\n          const matchIndex = shuffledAnswers.findIndex(ans => ans === pair.match_text);\r\n          return `${index + 1}  ${String.fromCharCode(65 + matchIndex)}`;\r\n        })\r\n        .join(', ');\r\n    },\r\n\r\n    //export the questions to a document\r\n    async exportToWord(finalizedMeta) {\r\n      const totalPoints = this.questions.reduce((sum, q) => {\r\n        const pts = parseFloat(q.default_points);\r\n        return sum + (isNaN(pts) ? 0 : pts);\r\n      }, 0);\r\n\r\n      const totalTime = this.questions.reduce((sum, q) => {\r\n        const time = parseInt(q.est_time, 10);\r\n        return sum + (isNaN(time) ? 0 : time);\r\n      }, 0);\r\n\r\n      const confirmedPoints = totalPoints;\r\n      const confirmedTime = this.totalEstimatedTime || totalTime;\r\n\r\n      const {\r\n        Document,\r\n        Packer,\r\n        Paragraph,\r\n        TextRun,\r\n        ImageRun,\r\n        Table,\r\n        TableRow,\r\n        TableCell,\r\n        HeadingLevel,\r\n        AlignmentType,\r\n        BorderStyle,\r\n        ThematicBreak,\r\n        WidthType\r\n      } = await import(\"docx\");\r\n\r\n      const createHorizontalLine = () => new Paragraph(new ThematicBreak());\r\n\r\n\r\n      const pageBreak = new Paragraph({ children: [], pageBreakBefore: true });\r\n      //----Cover Page Content-----\r\n      const coverPageContent = () => {\r\n        const cover = [\r\n          new Paragraph({\r\n            text: this.testOptions.testName,\r\n            heading: HeadingLevel.TITLE,\r\n            alignment: AlignmentType.CENTER,\r\n            spacing: { after: 200 },\r\n          }),\r\n          new Paragraph({\r\n            text: \"Version: XXXX\",\r\n            heading: HeadingLevel.HEADING_1,\r\n            alignment: AlignmentType.CENTER,\r\n            spacing: { after: 200 },\r\n          }),\r\n          new Paragraph({ text: \"Name: __________________________\", spacing: { after: 400 } }),\r\n          new Paragraph({ text: \"Date: __________________________\", spacing: { after: 400 } }),\r\n          new Paragraph({ text: \"Course: \" + (this.$route.query.courseTitle || \"N/A\") }),\r\n          new Paragraph({\r\n            text: \"Time Allowed: \" + (this.totalEstimatedTime || \"N/A\") + \" minutes\",\r\n            spacing: { after: 400 }\r\n          }),\r\n          createHorizontalLine(),\r\n          new Paragraph({\r\n            text: \"Instructions:\",\r\n            heading: HeadingLevel.HEADING_2,\r\n            spacing: { after: 100 },\r\n          }),\r\n          ...[\r\n            `This exam is worth ${confirmedPoints} points.`,\r\n            `You have ${confirmedTime || \"N/A\"} minutes to complete the exam.`,\r\n            \"Read each question carefully.\",\r\n            \"Be sure to answer all questions, do not leave anything blank.\",\r\n            \"Turn in all work and scratch paper with your exam.\",\r\n            \"You may not use any external materials unless permitted by the instructor.\",\r\n            \"This exam is closed-book, closed-notes, and no external devices or help.\",\r\n            \"Check your work before submitting.\"\r\n          ].map(instruction => new Paragraph({\r\n            text: instruction,\r\n            bullet: { level: 0 },\r\n            spacing: { after: 100 }\r\n          })),\r\n          pageBreak\r\n        ];\r\n\r\n        return cover;\r\n      };\r\n\r\n      // ------Test Page-----\r\n      const testContent = async () => {\r\n        const content = [\r\n          new Paragraph({\r\n            text: `${this.testOptions.testName} - Version: XXXX`,\r\n            heading: HeadingLevel.HEADING_1,\r\n            spacing: { after: 300 },\r\n          }),\r\n          new Paragraph({ text: \"Name: __________________________\", spacing: { after: 400 } }),\r\n          new Paragraph({ text: `Score: ______ / ${confirmedPoints} points`, spacing: { after: 400 } }),\r\n          createHorizontalLine()\r\n        ];\r\n\r\n        for (let index = 0; index < this.questions.length; index++) {\r\n          const q = this.questions[index];\r\n          //  Fetch and insert question attachment image\r\n          if (q.attachment && q.attachment.url) {\r\n            try {\r\n              const imageResponse = await fetch(q.attachment.url);\r\n              const imageBuffer = await imageResponse.arrayBuffer();\r\n              const imageBytes = new Uint8Array(imageBuffer);\r\n\r\n              content.push(\r\n                new Paragraph({\r\n                  children: [\r\n                    new ImageRun({\r\n                      data: imageBytes,\r\n                      transformation: {\r\n                        width: 500,\r\n                        height: 300\r\n                      }\r\n                    })\r\n                  ],\r\n                  spacing: { after: 100 }\r\n                })\r\n              );\r\n            } catch (err) {\r\n              console.warn(` Failed to fetch image for question ${index + 1}:`, err);\r\n            }\r\n          };\r\n\r\n\r\n          //question text\r\n          content.push(\r\n            new Paragraph({\r\n              text: `${index + 1}. ${q.question_text}`,\r\n              spacing: { after: 200 }\r\n            })\r\n          );\r\n\r\n          if (q.type === \"Multiple Choice\") {\r\n            const options = this.shuffleOptions(q);\r\n            options.forEach((opt, i) => {\r\n              content.push(new Paragraph({\r\n                text: `${String.fromCharCode(65 + i)}. ${opt.option_text}`,\r\n                indent: { left: 720 },\r\n                spacing: { after: 100 }\r\n              }));\r\n            });\r\n          } else if (q.type === \"True/False\") {\r\n            content.push(new Paragraph(\"True/False: __________________________\"));\r\n          } else if (q.type === \"Fill in the Blank\") {\r\n            content.push(new Paragraph(\"Blank: _____________________\"));\r\n          } else if (q.type === \"Short Answer\") {\r\n            for (let i = 0; i < 15; i++) content.push(new Paragraph(\" \"));\r\n          } else if (q.type === \"Essay\") {\r\n            for (let i = 0; i < 30; i++) content.push(new Paragraph(\" \"));\r\n          } else if (q.type === \"Matching\") {\r\n            content.push(new Paragraph({\r\n              spacing: { after: 200 }\r\n            }));\r\n\r\n            const shuffledMatches = this.getShuffledMatches(q);\r\n            const answerBank = this.getShuffledAnswerBank(q);\r\n\r\n            const tableRows = shuffledMatches.map((pair, i) => {\r\n              const prompt = `${i + 1}. ${pair.prompt_text}`;\r\n              const answer = `${String.fromCharCode(65 + i)}. ${pair.match_text}`;\r\n              return new TableRow({\r\n                children: [\r\n                  new TableCell({\r\n                    width: { size: 50, type: WidthType.PERCENTAGE },\r\n                    children: [\r\n                      new Paragraph({\r\n                        text: prompt,\r\n                        spacing: { after: 150 } // extra spacing below\r\n                      })\r\n                    ],\r\n                    margins: { top: 100, bottom: 100 }\r\n                  }),\r\n                  new TableCell({\r\n                    width: { size: 50, type: WidthType.PERCENTAGE },\r\n                    children: [\r\n                      new Paragraph({\r\n                        text: answer,\r\n                        spacing: { after: 150 }\r\n                      })\r\n                    ],\r\n                    margins: { top: 100, bottom: 100 }\r\n                  })\r\n                ]\r\n              });\r\n            });\r\n\r\n            content.push(new Table({\r\n              rows: tableRows,\r\n              width: { size: 100, type: WidthType.PERCENTAGE },\r\n              borders: {\r\n                top: { style: BorderStyle.NONE, size: 0, color: \"FFFFFF\" },\r\n                bottom: { style: BorderStyle.NONE, size: 0, color: \"FFFFFF\" },\r\n                left: { style: BorderStyle.NONE, size: 0, color: \"FFFFFF\" },\r\n                right: { style: BorderStyle.NONE, size: 0, color: \"FFFFFF\" },\r\n                insideHorizontal: { style: BorderStyle.NONE, size: 0, color: \"FFFFFF\" },\r\n                insideVertical: { style: BorderStyle.NONE, size: 0, color: \"FFFFFF\" }\r\n              }\r\n            }));\r\n\r\n            content.push(new Paragraph({ text: \" \", spacing: { after: 300 } }));\r\n          }\r\n\r\n\r\n\r\n          content.push(new Paragraph({ text: \" \", spacing: { after: 300 } }));\r\n        };\r\n\r\n        return content;\r\n      };\r\n\r\n      // ----Test Key Content-----\r\n      const keyContent = () => {\r\n        const content = [\r\n          new Paragraph({\r\n            children: [\r\n              new TextRun({\r\n                text: `${this.testOptions.testName} - Test Key`,\r\n                bold: true,\r\n                size: 32,\r\n                color: \"FF0000\",\r\n              })\r\n            ],\r\n            spacing: { after: 300 }\r\n          })\r\n        ];\r\n\r\n        this.questions.forEach((q, index) => {\r\n          let answerText = \"\";\r\n          if (q.type === \"Multiple Choice\") {\r\n            const options = this.shuffleOptions(q);\r\n            const correctIndex = options.findIndex(o => o.is_correct);\r\n            answerText = `Correct Answer: ${String.fromCharCode(65 + correctIndex)}. ${options[correctIndex].option_text}`;\r\n          } else if (q.type === \"True/False\") {\r\n            answerText = `Correct Answer: ${q.true_false_answer ? \"True\" : \"False\"}`;\r\n          } else if (q.type === \"Fill in the Blank\") {\r\n            answerText = `Correct Answer: ${q.blanks.map(b => b.correct_text).join(\", \")}`;\r\n          } else if (q.type === \"Short Answer\" || q.type === \"Essay\") {\r\n            answerText = `Grading Instructions: ${q.grading_instructions || \"None\"}`;\r\n          } else if (q.type === \"Matching\") {\r\n            answerText = `Correct Matches: ${this.getMatchingKeyString(q)}`;\r\n          }\r\n\r\n          content.push(\r\n            new Paragraph({\r\n              text: `${index + 1}. ${q.question_text}`,\r\n              spacing: { after: 100 },\r\n            }),\r\n            new Paragraph({\r\n              children: [new TextRun({ text: answerText, color: \"FF0000\" })],\r\n              spacing: { after: 300 }\r\n            })\r\n          );\r\n        });\r\n\r\n        return content;\r\n      };\r\n      // Helper to convert base64 string to ArrayBuffer\r\n      // Utility to convert base64 to Uint8Array (what docx expects)\r\n      const base64ToUint8Array = (base64) => {\r\n        const base64Data = base64.split(',')[1]; // remove the data:image/*;base64, part\r\n        const binaryString = window.atob(base64Data);\r\n        const len = binaryString.length;\r\n        const bytes = new Uint8Array(len);\r\n        for (let i = 0; i < len; i++) {\r\n          bytes[i] = binaryString.charCodeAt(i);\r\n        }\r\n        return bytes;\r\n      };\r\n\r\n      // Resource Page Content\r\n      const resourceContent = async () => {\r\n        const resourceSection = [];\r\n\r\n        if (this.testOptions.graphicPreview) {\r\n          try {\r\n            const base64Data = this.testOptions.graphicPreview.split(',')[1];\r\n            const binaryString = window.atob(base64Data);\r\n            const byteArray = new Uint8Array(binaryString.length);\r\n            for (let i = 0; i < binaryString.length; i++) {\r\n              byteArray[i] = binaryString.charCodeAt(i);\r\n            }\r\n\r\n            resourceSection.push(\r\n              new Paragraph({ children: [], pageBreakBefore: true }),\r\n              new Paragraph({\r\n                text: \"Resource Page\",\r\n                heading: HeadingLevel.HEADING_1,\r\n                spacing: { after: 300 }\r\n              }),\r\n              new Paragraph({\r\n                children: [\r\n                  new ImageRun({\r\n                    data: byteArray,\r\n                    transformation: {\r\n                      width: 500,\r\n                      height: 300\r\n                    }\r\n                  })\r\n                ],\r\n                spacing: { after: 300 }\r\n              })\r\n            );\r\n          } catch (err) {\r\n            console.error(\" Failed to load image for resource page:\", err);\r\n            resourceSection.push(new Paragraph(\" Could not load the uploaded image.\"));\r\n          }\r\n        }\r\n\r\n        return resourceSection;\r\n      };\r\n\r\n\r\n\r\n      // Build final documents\r\n      const resourceSection = await resourceContent();\r\n\r\n      const testDoc = new Document({\r\n        sections: [{\r\n          properties: {},\r\n          children: []\r\n            .concat(this.testOptions.coverPage ? coverPageContent() : [])\r\n            .concat(await testContent())\r\n            .concat(resourceSection)\r\n\r\n        }],\r\n        styles: {\r\n          default: {\r\n            document: {\r\n              run: {\r\n                font: \"Arial\",\r\n                size: 24  // 12pt (24 half-points)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n      const keyDoc = new Document({\r\n        sections: [{\r\n          properties: {},\r\n          children: keyContent()\r\n        }],\r\n        styles: {\r\n          default: {\r\n            document: {\r\n              run: {\r\n                font: \"Arial\",\r\n                size: 24  // 12pt (24 half-points)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n      const [testBlob, keyBlob] = await Promise.all([\r\n        Packer.toBlob(testDoc),\r\n        Packer.toBlob(keyDoc)\r\n      ]);\r\n\r\n\r\n      const testFile = this.blobToFile(testBlob, `${this.testOptions.testName || \"GeneratedTest\"}.docx`);\r\n      const keyFile = this.blobToFile(keyBlob, `${this.testOptions.testName || \"TestKey\"}.key.docx`);\r\n\r\n      const testId = finalizedMeta.testId;\r\n\r\n      try {\r\n        // Upload the test file as PDF equivalent\r\n        const testForm = new FormData();\r\n        testForm.append('file', testFile);\r\n\r\n        await api.post(`/tests/${testId}/upload_pdf`, testForm, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n\r\n        // Upload the answer key to its dedicated endpoint\r\n        await this.uploadAnswerKey(testId, keyFile);\r\n\r\n      } catch (err) {\r\n        console.error(\" Upload failed:\", err);\r\n        alert(\"Failed to upload test or answer key.\");\r\n      }\r\n\r\n\r\n\r\n\r\n      saveAs(testBlob, `${this.testOptions.testName || \"GeneratedTest\"}.docx`);\r\n      saveAs(keyBlob, `${this.testOptions.testName || \"TestKey\"}.key.docx`);\r\n    }\r\n\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.question-list-container {\r\n  margin: 20px auto;\r\n  max-width: 800px;\r\n}\r\n\r\n.question-box {\r\n  background: #f0f8f7;\r\n  padding: 15px;\r\n  margin-bottom: 10px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 0 4px rgba(0, 0, 0, 0.1);\r\n}\r\n</style>\r\n","import { render } from \"./TeacherTemplate.vue?vue&type=template&id=f9825cd8&scoped=true\"\nimport script from \"./TeacherTemplate.vue?vue&type=script&lang=js\"\nexport * from \"./TeacherTemplate.vue?vue&type=script&lang=js\"\n\nimport \"./TeacherTemplate.vue?vue&type=style&index=0&id=f9825cd8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f9825cd8\"]])\n\nexport default __exports__","<!-- filepath: /c:/Users/laure/Senior-Project/TestCreationVue/src/components/TeacherViewTB.vue -->\r\n<template>\r\n  <div class=\"theme-teacher\">\r\n    <div class=\"top-banner\">\r\n      <div class=\"banner-title\">Test Draft: {{ testBankName }}<br>\r\n        <span style=\"font-size: 16px; color: #222;\">\r\n          Chapter {{ displayChapter || 'N/A' }}, Section {{ displaySection || 'N/A' }}\r\n        </span>\r\n      </div>\r\n\r\n      <div class=\"t_banner-actions\">\r\n        <router-link to=\"/TeacherHome\" class=\"t_banner-btn\">Home</router-link>\r\n        <router-link to=\"/\" class=\"t_banner-btn\">Log Out</router-link>\r\n      </div>\r\n    </div>\r\n    <div class=\"center large-paragraph\" style=\"color:#222\">\r\n      <router-link :to=\"{ path: '/TeacherQuestions', query: { courseTitle: courseTitle, courseId: courseId } }\">\r\n        <button class=\"t_button\">Return to Question Page</button>\r\n      </router-link><br>\r\n      <div class=\"button-row\">\r\n        <!-- Edit Test Bank Info Button -->\r\n        <button class=\"t_button\" @click=\"showEditForm = true\">Edit Draft Pool Info</button>\r\n\r\n\r\n\r\n\r\n        <button class=\"t_button\" @click=\"showCreateTestWarning = true\">Create New Test</button>\r\n\r\n\r\n        <br>\r\n      </div>\r\n\r\n      <hr>\r\n\r\n      <!-- Delete Confirm Popup -->\r\n      <div class=\"popup-overlay\" v-if=\"showDeleteConfirm\">\r\n        <div class=\"form-popup-modal\">\r\n          <div class=\"form-container\">\r\n            <h2 style=\"text-align:center;\">Confirm Removal</h2>\r\n            <p style=\"text-align:center;\">Are you sure you want to remove this question from the test bank?</p>\r\n            <div class=\"popup-button-group\">\r\n              <button class=\"btn\" @click=\"confirmRemoveQuestion\">Yes, Remove</button>\r\n              <button class=\"btn cancel\" @click=\"showDeleteConfirm = false\">Cancel</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Info Message Popup -->\r\n      <div class=\"popup-overlay\" v-if=\"showInfoPopup\">\r\n        <div class=\"form-popup-modal\">\r\n          <div class=\"form-container\">\r\n            <p style=\"text-align:center;\">{{ popupMessage }}</p>\r\n            <div class=\"popup-button-group\" style=\"text-align:center; margin-top: 1rem;\">\r\n              <button class=\"btn\" @click=\"showInfoPopup = false\">OK</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      <!-- Edit Test Bank Info Popup Form -->\r\n      <!-- Modal Popup -->\r\n      <div class=\"popup-overlay\" v-if=\"showEditForm\">\r\n        <div class=\"form-popup-modal\">\r\n          <form class=\"form-container\" @submit.prevent=\"updateTestBank\">\r\n            <label><strong>Draft Pool Name:</strong></label>\r\n            <input type=\"text\" v-model=\"editForm.name\" required />\r\n\r\n            <label><strong>Chapter Number:</strong></label>\r\n            <input type=\"text\" v-model=\"editForm.chapter\" required />\r\n\r\n            <label><strong>Section Number:</strong></label>\r\n            <input type=\"text\" v-model=\"editForm.section\" required />\r\n\r\n            <button type=\"submit\" class=\"btn\">Save Changes</button>\r\n            <button type=\"button\" class=\"btn cancel\" @click=\"showEditForm = false\">Cancel</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Create New Test Popup -->\r\n      <div class=\"center large-paragraph\" style=\"color:#222\">\r\n        <div class=\"popup-overlay\" v-if=\"showCreateTestWarning\">\r\n          <div class=\"form-popup-modal\">\r\n            <form class=\"form-container\" @submit.prevent=\"goToCreateTest\">\r\n              <label><strong>Test Name:</strong></label>\r\n              <input type=\"text\" v-model=\"testOptions.testName\" placeholder=\"Enter a name for this test\" required />\r\n\r\n              <!-- Cover Page Checkbox -->\r\n              <label class=\"checkbox-label\">\r\n                <input type=\"checkbox\" v-model=\"testOptions.coverPage\" />\r\n                Add a cover page\r\n              </label>\r\n\r\n\r\n              <label><strong>Select Question Types for Your Test:</strong></label>\r\n              <div class=\"checkbox-group\">\r\n                <label>\r\n                  <input type=\"checkbox\" value=\"All Questions\" v-model=\"testOptions.selectedTypes\" />\r\n                  All Questions\r\n                </label>\r\n                <label>\r\n                  <input type=\"checkbox\" value=\"True/False\" v-model=\"testOptions.selectedTypes\" />\r\n                  True/False\r\n                </label>\r\n                <label>\r\n                  <input type=\"checkbox\" value=\"Multiple Choice\" v-model=\"testOptions.selectedTypes\" />\r\n                  Multiple Choice\r\n                </label>\r\n                <label>\r\n                  <input type=\"checkbox\" value=\"Short Answer\" v-model=\"testOptions.selectedTypes\" />\r\n                  Short Answer\r\n                </label>\r\n                <label>\r\n                  <input type=\"checkbox\" value=\"Essay\" v-model=\"testOptions.selectedTypes\" />\r\n                  Essay\r\n                </label>\r\n                <label>\r\n                  <input type=\"checkbox\" value=\"Matching\" v-model=\"testOptions.selectedTypes\" />\r\n                  Matching\r\n                </label>\r\n                <label>\r\n                  <input type=\"checkbox\" value=\"Fill in the Blank\" v-model=\"testOptions.selectedTypes\" />\r\n                  Fill in the Blank\r\n                </label>\r\n              </div>\r\n\r\n\r\n              <label><strong>Embedded Graphic:</strong></label>\r\n              <input type=\"file\" accept=\"image/*\" @change=\"handleGraphicUpload\" />\r\n              <div v-if=\"testOptions.graphicPreview\" style=\"margin-top: 10px;\">\r\n                <p><strong>Preview:</strong></p>\r\n                <img :src=\"testOptions.graphicPreview\" alt=\"Uploaded Graphic Preview\"\r\n                  style=\"max-width: 100%; max-height: 200px; border: 1px solid #ccc;\" />\r\n              </div>\r\n\r\n\r\n\r\n              <button type=\"submit\" class=\"btn\">Yes, Continue</button>\r\n              <button type=\"button\" class=\"btn cancel\" @click=\"showCreateTestWarning = false\">Cancel</button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n\r\n\r\n      <!--Test bank questions will be generated here-->\r\n      <div v-for=\"(q, index) in selectedQuestions\" :key=\"q.id\" class=\"question-box\"\r\n        :class=\"{ selected: selectedQuestionId === q.id }\" @click=\"toggleQuestionSelection(q.id)\">\r\n        <strong>Question {{ index + 1 }}:</strong> {{ q.question_text }}<br>\r\n        <span><strong>Type:</strong> {{ q.type }}</span><br>\r\n        <span><strong>Chapter:</strong> {{ q.chapter_number || 'N/A' }}</span><br>\r\n        <span><strong>Section:</strong> {{ q.section_number || 'N/A' }}</span><br>\r\n        <span><strong>Points:</strong> {{ q.default_points }}</span><br>\r\n        <span><strong>Estimated Time:</strong> {{ q.est_time }} minutes</span><br>\r\n\r\n        <!-- Conditional content by type -->\r\n        <div v-if=\"q.type === 'True/False'\">\r\n          <strong>Answer:</strong> {{ q.true_false_answer ? 'True' : 'False' }}\r\n        </div>\r\n\r\n        <div v-if=\"q.type === 'Multiple Choice'\">\r\n          <strong>Correct Answer:</strong> {{ q.correct_option && q.correct_option.option_text || 'Not specified' }}<br>\r\n          <strong>Other Options:</strong>\r\n          <ul>\r\n            <li v-for=\"(option, i) in q.incorrect_options || []\" :key=\"i\">{{ option.option_text }}</li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div v-if=\"q.type === 'Matching'\">\r\n          <strong>Pairs:</strong>\r\n          <ul>\r\n            <li v-for=\"(pair, i) in q.matches || []\" :key=\"i\">{{ pair.prompt_text }} - {{ pair.match_text }}</li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div v-if=\"q.type === 'Fill in the Blank'\">\r\n          <strong>Correct Answer(s):</strong>\r\n          <ul>\r\n            <li v-for=\"(blank, i) in q.blanks || []\" :key=\"i\">{{ blank.correct_text }}</li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div v-if=\"q.type === 'Short Answer'\">\r\n          <strong>Answer:</strong> {{ q.answer || 'Not provided' }}\r\n        </div>\r\n\r\n        <div v-if=\"q.type === 'Essay'\">\r\n          <strong>Essay Instructions:</strong> {{ q.grading_instructions || 'None' }}\r\n        </div>\r\n\r\n        <span><strong>Grading Instructions:</strong> {{ q.grading_instructions || 'None' }}</span>\r\n\r\n        <div v-if=\"q.attachment && q.attachment.url\">\r\n          <p><strong>Attached Image:</strong></p>\r\n          <img :src=\"q.attachment.url\" alt=\"Attachment\" style=\"max-width: 100%; max-height: 300px; margin: 10px 0;\" />\r\n        </div>\r\n\r\n\r\n        <!-- Action buttons -->\r\n        <div v-if=\"selectedQuestionId === q.id\" class=\"button-group\">\r\n          <!-- <button @click.stop=\"editQuestion(q)\">Edit</button> -->\r\n          <button @click.stop=\"promptRemoveQuestion(q.id)\">Remove</button>\r\n        </div>\r\n        <hr>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api';\r\n\r\nexport default {\r\n  name: 'TeacherViewTB',\r\n  data() {\r\n    return {\r\n      showPopup: false,\r\n      showEditForm: false,\r\n      showEditQuestionForm: false,\r\n      showCreateTestWarning: false,\r\n      testFiles: [],\r\n      selectedQuestions: [],\r\n      selectedQuestionId: null,\r\n      editingQuestionData: {},\r\n      editingQuestionId: null,\r\n      courseId: this.$route.query.courseId || '',\r\n      courseTitle: this.$route.query.courseTitle || '',\r\n      testBankId: this.$route.query.testBankId || '',\r\n      testBankName: this.$route.query.testBankName || '',\r\n      editForm: {\r\n        name: this.$route.query.testBankName || '',\r\n        chapter: '',\r\n        section: ''\r\n      },\r\n      testOptions: {\r\n        testName: '',\r\n        coverPage: false,\r\n        selectedTemplate: '',\r\n        graphicFile: null,\r\n        graphicFileName: '',\r\n        graphicPreview: '',\r\n        selectedTypes: [], //array of selected question types\r\n      },\r\n      showDeleteConfirm: false,\r\n      questionIdToDelete: null,\r\n      popupMessage: '',\r\n      showInfoPopup: false\r\n\r\n\r\n    };\r\n  },\r\n  computed: {\r\n    displayChapter() {\r\n      return this.editForm.chapter || this.$route.query.chapter || '';\r\n    },\r\n    displaySection() {\r\n      return this.editForm.section || this.$route.query.section || '';\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.initialize();\r\n  },\r\n  methods: {\r\n    promptRemoveQuestion(questionId) {\r\n      this.questionIdToDelete = questionId;\r\n      this.showDeleteConfirm = true;\r\n    },\r\n    async confirmRemoveQuestion() {\r\n      try {\r\n        await api.delete(`/testbanks/${this.testBankId}/questions/${this.questionIdToDelete}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n        this.selectedQuestions = this.selectedQuestions.filter(q => q.id !== this.questionIdToDelete);\r\n        this.questionIdToDelete = null;\r\n        this.showDeleteConfirm = false;\r\n        this.popupMessage = 'Question removed from test bank.';\r\n        this.showInfoPopup = true;\r\n      } catch (err) {\r\n        console.error('Error removing question:', err);\r\n        this.popupMessage = 'Failed to remove question from test bank.';\r\n        this.showInfoPopup = true;\r\n      }\r\n    },\r\n\r\n\r\n\r\n\r\n    async fetchQuestions() {\r\n      if (!this.testBankId) return;\r\n      try {\r\n        const response = await api.get(`/testbanks/${this.testBankId}/questions`, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n        console.log(\"Fetched questions:\", response.data.questions);\r\n        this.selectedQuestions = response.data.questions || [];\r\n      } catch (err) {\r\n        console.error('Error fetching questions for test bank:', err);\r\n        this.selectedQuestions = [];\r\n      }\r\n\r\n    },\r\n\r\n    //helper functions for generated questions\r\n    toggleQuestionSelection(questionId) {\r\n      this.selectedQuestionId = this.selectedQuestionId === questionId ? null : questionId;\r\n    },\r\n\r\n    async removeQuestionFromTestBank(questionId) {\r\n      if (!confirm('Are you sure you want to remove this question from the test bank?')) return;\r\n\r\n      try {\r\n        await api.delete(`/testbanks/${this.testBankId}/questions/${questionId}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        });\r\n        this.selectedQuestions = this.selectedQuestions.filter(q => q.id !== questionId);\r\n      } catch (err) {\r\n        console.error('Error removing question:', err);\r\n      }\r\n    },\r\n\r\n    async updateTestBank() {\r\n      await api.put(`/testbanks/teacher/${this.testBankId}`, {\r\n        name: this.editForm.name,\r\n        chapter_number: this.editForm.chapter,\r\n        section_number: this.editForm.section\r\n      }, {\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n\r\n\r\n      this.testBankName = this.editForm.name; // update title\r\n      this.displayChapter = this.editForm.chapter;\r\n      this.displaySection = this.editForm.section;\r\n      this.showEditForm = false;\r\n\r\n    },\r\n\r\n    async initialize() {\r\n      if (!this.testBankId) {\r\n        console.warn('No testBankId provided  cannot load questions.');\r\n        return;\r\n      }\r\n      await this.fetchQuestions();\r\n\r\n    },\r\n    handleGraphicUpload(event) {\r\n      const file = event.target.files[0];\r\n      if (!file) return;\r\n\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        this.testOptions.graphicFile = file;\r\n        this.testOptions.graphicFileName = file.name;\r\n        this.testOptions.graphicPreview = e.target.result;\r\n      };\r\n      reader.readAsDataURL(file);\r\n    },\r\n\r\n    goToCreateTest() {\r\n      const payload = {\r\n        testName: this.testOptions.testName,\r\n        selectedTemplate: this.testOptions.selectedTemplate,\r\n        uploadedImage: this.testOptions.graphicFileName || '',\r\n        coverPage: this.testOptions.coverPage || false,\r\n        graphicPreview: this.testOptions.graphicPreview || ''\r\n      };\r\n\r\n      localStorage.setItem('testOptions', JSON.stringify(payload));\r\n\r\n      this.$router.push({\r\n        path: '/TeacherTemplate',\r\n        query: {\r\n          courseId: this.courseId,\r\n          courseTitle: this.courseTitle,\r\n          testBankId: this.testBankId,\r\n          testBankName: this.testBankName, \r\n          selectedTypes: JSON.stringify(this.testOptions.selectedTypes) // Pass as stringified array\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n\r\n</script>\r\n\r\n<style scoped>\r\n@import '../assets/teacher_styles.css';\r\n\r\n.teacher-viewTB-container {\r\n  background-color: #43215a;\r\n  font-family: Arial, sans-serif;\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n\r\n.question-box {\r\n  background-color: #ffffff;\r\n  /* or a soft color */\r\n  color: #000000;\r\n  /* black text */\r\n  padding: 16px;\r\n  margin-bottom: 16px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  font-size: 15px;\r\n  line-height: 1.5;\r\n  text-align: left;\r\n  text-align: left;\r\n}\r\n\r\n/* Ensure popup form labels are left-aligned */\r\n.form-container label {\r\n  text-align: left;\r\n  display: block;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  margin-top: 10px;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.download-link {\r\n  color: #4b0082;\r\n  text-decoration: underline;\r\n  cursor: pointer;\r\n}\r\n\r\n.checkbox-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start; /* left-align the group */\r\n  margin-bottom: 10px;\r\n}\r\n</style>","import { render } from \"./TeacherViewTB.vue?vue&type=template&id=472ecc14&scoped=true\"\nimport script from \"./TeacherViewTB.vue?vue&type=script&lang=js\"\nexport * from \"./TeacherViewTB.vue?vue&type=script&lang=js\"\n\nimport \"./TeacherViewTB.vue?vue&type=style&index=0&id=472ecc14&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-472ecc14\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"theme-webmaster\">\r\n    <div class=\"top-banner\">\r\n      <div class=\"banner-title\">Database Downloads</div>\r\n\r\n      <div class=\"banner-actions\">\r\n        <router-link to=\"/\" class=\"banner-btn\">Log Out</router-link>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"center large-paragraph\" style=\"color: #222;\">\r\n      <div class=\"page-wrapper\" style=\"font-size: 24px; text-align: center;\">\r\n        <h1>Select a dataset to download:</h1>\r\n        <br>\r\n       <strong>Note:</strong> Download All will download each file separately for readability.\r\n       <hr>\r\n        <div class=\"button-row\">\r\n          <button class=\"button\" @click=\"downloadData('users')\">Download Users</button>\r\n          <button class=\"button\" @click=\"downloadData('textbook')\">Download Textbooks</button>\r\n          <button class=\"button\" @click=\"downloadData('courses')\">Download Courses</button>\r\n          <button class=\"button\" @click=\"downloadData('questions')\">Download Questions</button>\r\n          <!-- <button class=\"button\" @click=\"downloadData('tests')\">Download Tests</button> -->\r\n          <button class=\"button\" @click=\"downloadData('all')\">Download All</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api'; // using your configured axios instance\r\n\r\nexport default {\r\n  name: 'WebmasterHome',\r\n  methods: {\r\n    async downloadData(type) {\r\n      const endpoints = {\r\n        users: 'users',\r\n        courses: 'courses',\r\n        textbook: 'textbook',\r\n        questions: 'questions'\r\n      };\r\n\r\n      if (type === 'all') {\r\n        for (const [key, endpoint] of Object.entries(endpoints)) {\r\n          await this.fetchAndDownload(endpoint, `${key}.csv`);\r\n        }\r\n        return;\r\n      }\r\n\r\n      const endpoint = endpoints[type];\r\n      if (!endpoint) {\r\n        alert(`Unsupported download type: ${type}`);\r\n        return;\r\n      }\r\n\r\n      await this.fetchAndDownload(endpoint, `${type}.csv`);\r\n    },\r\n\r\n    async fetchAndDownload(endpoint, filename) {\r\n      try {\r\n        const response = await api.get(`/download/${endpoint}`, {\r\n          responseType: 'blob'\r\n        });\r\n\r\n        const url = window.URL.createObjectURL(response.data);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = filename;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        window.URL.revokeObjectURL(url);\r\n      } catch (error) {\r\n        console.error(`Download error for ${endpoint}:`, error);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n@import '../assets/webmaster_styles.css';\r\n</style>","import { render } from \"./WebmasterHome.vue?vue&type=template&id=57cf651a&scoped=true\"\nimport script from \"./WebmasterHome.vue?vue&type=script&lang=js\"\nexport * from \"./WebmasterHome.vue?vue&type=script&lang=js\"\n\nimport \"./WebmasterHome.vue?vue&type=style&index=0&id=57cf651a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-57cf651a\"]])\n\nexport default __exports__","<!-- filepath: /c:/Users/laure/Senior-Project/TestCreationVue/src/components/WebmasterLog.vue -->\r\n<template>\r\n <div class=\"theme-webmaster\">\r\n  <div class=\"top-banner\">\r\n  <div class=\"banner-title\">Webmaster Login</div>\r\n  </div>\r\n\r\n    <div class=\"center large-paragraph\" style=\"color: #222;\">\r\n      Please enter your webmaster username and password:\r\n      <br />\r\n      <br />\r\n      <form @submit.prevent=\"submitForm\">\r\n        <!-- create username text box-->\r\n        <label for=\"uname\">Username:</label><br />\r\n        <input type=\"text\" id=\"uname\" v-model=\"username\" /><br />\r\n        <br />\r\n        <!-- create password textbox-->\r\n        <label for=\"pass\">Password:</label><br />\r\n        <input type=\"password\" id=\"pass\" v-model=\"password\" /><br /><br />\r\n        <!-- submit button, when pressed it takes user to url specified-->\r\n        <input type=\"submit\" value=\"Submit\" :disabled=\"loading\" />\r\n      </form>\r\n\r\n      <!-- Show error message if user and password are entered incorrectly -->\r\n      <div v-if=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</div>\r\n      \r\n      <!-- Show loading spinner if the form is submitting -->\r\n      <div v-if=\"loading\" class=\"loading-message\">Logging in...</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '@/api'; // <-- your custom Axios instance with token handling\r\nimport jwtDecode from 'jwt-decode';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      username: '',\r\n      password: '',\r\n      errorMessage: '',\r\n      loading: false\r\n    };\r\n  },\r\n  mounted() {\r\n    // Optional: Check if token exists and redirect if still valid\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      try {\r\n        const decoded = jwtDecode(token);\r\n        const currentTime = Date.now() / 1000;\r\n\r\n        if (decoded.exp > currentTime && decoded.role === 'webmaster') {\r\n          this.$router.push('/WebmasterHome');\r\n        }\r\n      } catch (error) {\r\n        console.error('Invalid token', error);\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async submitForm() {\r\n  if (!this.username || !this.password) {\r\n    this.errorMessage = \"Please enter both username and password.\";\r\n    return;\r\n  }\r\n\r\n  if (this.username.trim().length < 3 || this.password.trim().length < 6) {\r\n    this.errorMessage = \"Username must be at least 3 characters and password at least 6 characters.\";\r\n    return;\r\n  }\r\n\r\n  this.loading = true;\r\n  this.errorMessage = \"\";\r\n\r\n  try {\r\n    const res = await api.post('/auth/login', {\r\n      username: this.username.toLowerCase(),\r\n      password: this.password\r\n    });\r\n\r\n    const { token, user_id, role } = res.data;\r\n\r\n    // Store token and identity in localStorage\r\n    localStorage.setItem('token', token);\r\n    localStorage.setItem('user_id', user_id);\r\n    localStorage.setItem('role', role);\r\n\r\n    // Redirect based on role\r\n    if (role === 'webmaster') {\r\n      this.$router.push('/WebmasterHome');\r\n    } else {\r\n      this.errorMessage = \"Only webmasters can log in here.\";\r\n      localStorage.clear(); // Clear stored data for non-webmasters\r\n    }\r\n  } catch (error) {\r\n    if (!error.response) {\r\n      this.errorMessage = \"Network error. Please check your connection.\";\r\n    } else if (error.response.status === 401) {\r\n      this.errorMessage = \"Invalid username or password.\";\r\n    } else {\r\n  this.errorMessage = (error.response && error.response.data && error.response.data.message) || \"An error occurred during login.\";\r\n}\r\n  } finally {\r\n    this.loading = false;\r\n  }\r\n}\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import '../assets/webmaster_styles.css';\r\n\r\n.webmaster-log-container {\r\n  background-color: #082e75;\r\n  font-family: Arial, sans-serif;\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.error-message {\r\n  color: rgb(174, 38, 38);\r\n  margin-top: 10px;\r\n}\r\n\r\n.loading-message {\r\n  color: #ffffff;\r\n  margin-top: 10px;\r\n}\r\n\r\ninput[type=\"submit\"] {\r\n  background-color: rgb(84, 178, 150);\r\n  color: black;\r\n  font-size: 20px;\r\n  padding: 10px 20px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\ninput[type=\"submit\"]:disabled {\r\n  background-color: #cccccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\ninput[type=\"text\"], input[type=\"password\"] {\r\n  padding: 10px;\r\n  font-size: 16px;\r\n  border-radius: 4px;\r\n  border: 1px solid #ddd;\r\n}\r\n\r\n.center {\r\n  text-align: center;\r\n}\r\n\r\n.large-heading {\r\n  font-size: 2em;\r\n}\r\n\r\n.large-paragraph {\r\n  font-size: 1.2em;\r\n}\r\n</style>","import { render } from \"./WebmasterLog.vue?vue&type=template&id=2950ba08&scoped=true\"\nimport script from \"./WebmasterLog.vue?vue&type=script&lang=js\"\nexport * from \"./WebmasterLog.vue?vue&type=script&lang=js\"\n\nimport \"./WebmasterLog.vue?vue&type=style&index=0&id=2950ba08&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\derri\\\\Documents\\\\GitHub\\\\API-Testing\\\\my-vue-app\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2950ba08\"]])\n\nexport default __exports__","// /src/router/index.js (or similar)\r\nimport { createRouter, createWebHashHistory } from 'vue-router';\r\nimport Welcome from '../components/Welcome.vue';\r\nimport PubHome from '../components/PubHome.vue';\r\nimport PubLog from '../components/PubLog.vue';\r\nimport PubNewBook from '../components/PubNewBook.vue';\r\nimport PubNewTB from '../components/PubNewTB.vue';\r\nimport PubQuestions from '../components/PubQuestions.vue';\r\nimport PubViewFeedback from '../components/PubViewFeedback.vue';\r\nimport PubViewTB from '../components/PubViewTB.vue';\r\nimport TeacherHome from '../components/TeacherHome.vue';\r\nimport TeacherLog from '../components/TeacherLog.vue';\r\nimport TeacherNewClass from '../components/TeacherNewClass.vue';\r\nimport TeacherNewTB from '../components/TeacherNewTB.vue';\r\nimport TeacherPubQ from '../components/TeacherPubQ.vue';\r\nimport TeacherQuestions from '../components/TeacherQuestions.vue';\r\nimport TeacherTemplate from '../components/TeacherTemplate.vue';\r\nimport TeacherViewTB from '../components/TeacherViewTB.vue';\r\nimport WebmasterHome from '../components/WebmasterHome.vue';\r\nimport WebmasterLog from '../components/WebmasterLog.vue';\r\n\r\nconst routes = [\r\n  { path: '/', name: 'Welcome', component: Welcome },\r\n  { path: '/PubHome', name: 'PubHome', component: PubHome },\r\n  { path: '/PubLog', name: 'PubLog', component: PubLog },\r\n  { path: '/PubNewBook', name: 'PubNewBook', component: PubNewBook },\r\n  { path: '/PubNewTB', name: 'PubNewTB', component: PubNewTB },\r\n  { path: '/PubQuestions', name: 'PubQuestions', component: PubQuestions },\r\n  { path: '/PubViewFeedback', name: 'PubViewFeedback', component: PubViewFeedback },\r\n  { path: '/PubViewTB', name: 'PubViewTB', component: PubViewTB },\r\n  { path: '/TeacherHome', name: 'TeacherHome', component: TeacherHome },\r\n  { path: '/TeacherLog', name: 'TeacherLog', component: TeacherLog },\r\n  { path: '/TeacherNewClass', name: 'TeacherNewClass', component: TeacherNewClass },\r\n  { path: '/TeacherNewTB', name: 'TeacherNewTB', component: TeacherNewTB },\r\n  { path: '/TeacherPubQ', name: 'TeacherPubQ', component: TeacherPubQ },\r\n  { path: '/TeacherQuestions', name: 'TeacherQuestions', component: TeacherQuestions },\r\n  { path: '/TeacherTemplate', name: 'TeacherTemplate', component: TeacherTemplate },\r\n  { path: '/TeacherViewTB', name: 'TeacherViewTB', component: TeacherViewTB },\r\n  { path: '/WebmasterHome', name: 'WebmasterHome', component: WebmasterHome },\r\n  { path: '/WebmasterLog', name: 'WebmasterLog', component: WebmasterLog },\r\n];\r\n\r\nconst router = createRouter({\r\n  history: createWebHashHistory(),\r\n  routes,\r\n});\r\n\r\nexport default router;\r\n","import { createApp } from 'vue';\r\nimport App from './App.vue';\r\nimport router from './router';  // Assuming your router is in the `router/index.js` file\r\n\r\nconst app = createApp(App);\r\napp.use(router);\r\napp.mount('#app');","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./WebmasterHome.vue?vue&type=style&index=0&id=57cf651a&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PubHome.vue?vue&type=style&index=0&id=46fbfbd4&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TeacherHome.vue?vue&type=style&index=0&id=d53dde1e&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PubNewTB.vue?vue&type=style&index=0&id=6c70d6b4&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PubNewBook.vue?vue&type=style&index=0&id=4c95a948&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TeacherLog.vue?vue&type=style&index=0&id=29f43bdf&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TeacherNewTB.vue?vue&type=style&index=0&id=67b0bed1&scoped=true&lang=css\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=0c49bc5c&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TeacherTemplate.vue?vue&type=style&index=0&id=f9825cd8&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./WebmasterLog.vue?vue&type=style&index=0&id=2950ba08&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PubViewFeedback.vue?vue&type=style&index=0&id=50d05966&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PubViewTB.vue?vue&type=style&index=0&id=0dcbdc32&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./TeacherQuestions.vue?vue&type=style&index=0&id=8af99efc&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./PubQuestions.vue?vue&type=style&index=0&id=3e943274&scoped=true&lang=css\""],"sourceRoot":""}